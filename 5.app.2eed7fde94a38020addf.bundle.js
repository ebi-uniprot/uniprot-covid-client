(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{405:function(e,t,n){var a=n(74),o=n(406);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},406:function(e,t,n){(t=n(75)(!1)).push([e.i,".column-select-drag-drop__list{background:#e4e8eb;display:flex;padding:0.5rem;overflow:auto;white-space:nowrap;margin-bottom:1rem}.column-select-drag-drop__list__item{user-select:none;padding:0.5rem;margin:0 0.25rem 0 0;color:#fbfeff;background:#00639a}.column-select-drag-drop__list__item:focus{outline:none}.column-select-drag-drop__list__item:hover{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item--dragging{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item__button{background-color:transparent;margin-left:0.25rem;cursor:pointer}.column-select-drag-drop__list__item__button:focus{outline:none}.column-select-drag-drop__list__item__button__icon{color:#fbfeff;width:0.9rem;height:0.9rem;position:relative;top:0.085rem;left:0.35rem}\n",""]),e.exports=t},407:function(e,t,n){var a=n(74),o=n(408);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},408:function(e,t,n){(t=n(75)(!1)).push([e.i,".column-select{margin-bottom:1rem}.column-select__tab-title:first-letter{text-transform:capitalize}.column-select__tab-title__count{margin-left:0.5rem}.column-select__tab-title__count--visible{visibility:visible}.column-select__tab-title__count--hidden{visibility:hidden}\n",""]),e.exports=t},409:function(e,t,n){"use strict";var a=n(15),o=n.n(a),r=n(5),c=n.n(r),l=n(0),i=n.n(l),s=n(103),u=n(52),d=n(88),m=n(4),b=n(18),f=n(77),p=n(399),g=n.n(p),_=n(414),v=(n(405),function(e){var t=e.columns,n=e.onDragDrop,a=e.onRemove;return i.a.createElement(_.a,{onDragEnd:function(e){e.destination&&n(e.source.index,e.destination.index)}},i.a.createElement(_.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return i.a.createElement("div",g()({ref:e.innerRef,className:Object(b.b)({b:"column-select-drag-drop",e:"list"})},e.droppableProps),t.map((function(e,t){var n=e.itemId,o=e.label;return i.a.createElement(_.b,{key:n,draggableId:n,index:t},(function(e,t){return i.a.createElement("div",g()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"button ".concat(Object(b.b)({b:"column-select-drag-drop",e:["list","item"],m:t.isDragging&&"dragging"})),style:e.draggableProps.style}),o,i.a.createElement("button",{type:"button","data-testid":"column-select-dnd-remove-button",className:Object(b.b)({b:"column-select-drag-drop",e:["list","item","button"]}),onClick:function(){return a(n)}},i.a.createElement(m.CloseIcon,{className:Object(b.b)({b:"column-select-drag-drop",e:["list","item","button","icon"]})})))}))})),e.placeholder)})))}),h=n(31),O=(n(407),function(e,t){return i.a.createElement("div",{className:Object(b.b)({b:"column-select",e:"tab-title"})},e,i.a.createElement("span",{className:Object(b.b)({b:"column-select",e:["tab-title","count"],m:t.length?"visible":"hidden"})},i.a.createElement(m.Bubble,{size:"small",value:t.length})))}),y=function(e){var t=e.selectedColumns,n=e.fieldData,a=e.onDragDrop,o=e.onSelect,r=e.onReset,c=function(e,t){var n=new Array(e.length);return[h.a.data,h.a.links].forEach((function(a){t[a].forEach((function(t){var o=t.id;t.items.forEach((function(t){var r=t.id,c=t.label,l=e.indexOf(r);l>=0&&(n[l]={tabId:a,accordionId:o,itemId:r,label:c})}))}))})),n}(t,n),l=[h.a.data,h.a.links].map((function(e){var t=c.filter((function(t){return t.tabId===e}));return{title:O(e,t),id:e,key:e,content:i.a.createElement(m.AccordionSearch,{accordionData:Object.values(n[e]),onSelect:function(e,t){return o(t)},selected:t,columns:!0})}}));return i.a.createElement("div",{className:"column-select"},i.a.createElement(v,{columns:c,onDragDrop:a,onRemove:o}),i.a.createElement("button",{className:"button secondary",type:"button",tabIndex:0,onClick:r,"data-testid":"column-select-reset-button"},"Reset to default"),i.a.createElement(m.Tabs,{tabData:l}))},E=n(91),j=n(92);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={tabId:h.a.data,accordionId:"Names & Taxonomy",itemId:j.a.accession},w=Object(d.o)(Object(s.b)((function(e,t){return{onChange:t.onChange,fieldData:e.results.fields.data,isFetching:e.results.fields.isFetching}}),(function(e){return Object(u.b)({fetchFieldsIfNeeded:function(){return f.j()}},e)}))((function(e){var t=e.fetchFieldsIfNeeded,n=e.isFetching,a=e.fieldData,r=e.selectedColumns,l=e.onChange;if(n||!a||!a[h.a.data]||!a[h.a.data].length||!a[h.a.links]||!a[h.a.links].length)return t(),i.a.createElement(m.Loader,null);var s=r.filter((function(e){return e!==k.itemId})),u=function(e,t){var n=e.tabId,a=e.accordionId,o=e.itemId;return D({},t,c()({},n,t[n].map((function(e){return e.id===a?D({},e,{items:e.items.filter((function(e){return e.id!==o}))}):e}))))}(k,a),d=function(e){l([k.itemId].concat(o()(e)))};return i.a.createElement(y,{selectedColumns:s,fieldData:u,onReset:function(){return l(E.c)},onSelect:function(e){var t=s.indexOf(e);d(t>=0?Object(b.e)(s,t):[].concat(o()(s),[e]))},onDragDrop:function(e,t){d(Object(b.d)(s,e,t))}})})));t.a=w},428:function(e,t,n){var a=n(74),o=n(429);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},429:function(e,t,n){(t=n(75)(!1)).push([e.i,".customise-table{padding:1rem;width:100vw}.customise-table--cancel-submit-buttons{float:right}\n",""]),e.exports=t},438:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),c=n.n(r),l=n(103),i=n(52),s=n(88),u=n(77),d=n(409),m=(n(428),function(e){var t=e.selectedColumns,n=e.onChange,a=e.onSubmit,r=e.onCancel;return o.a.createElement("form",{onSubmit:a,className:"customise-table","data-testid":"customise-table-form"},o.a.createElement(d.a,{onChange:n,selectedColumns:t}),o.a.createElement("div",{className:"button-group customise-table--cancel-submit-buttons"},o.a.createElement("button",{className:"button secondary",type:"button",onClick:r,"data-testid":"customise-table-cancel-button"},"Cancel"),o.a.createElement("button",{className:"button",type:"submit"},"Save")))}),b=Object(s.o)(Object(l.b)((function(e){return{tableColumns:e.results.tableColumns}}),(function(e){return Object(i.b)({updateTableColumns:function(e){return u.l(e)}},e)}))((function(e){var t=e.tableColumns,n=e.updateTableColumns,r=e.history,l=Object(a.useState)(t),i=c()(l,2),s=i[0],u=i[1];return o.a.createElement(m,{selectedColumns:s,onChange:function(e){u(e)},onSubmit:function(e){e.preventDefault(),n(s),r.goBack()},onCancel:function(){r.goBack()}})})));t.default=function(){return o.a.createElement(b,null)}}}]);