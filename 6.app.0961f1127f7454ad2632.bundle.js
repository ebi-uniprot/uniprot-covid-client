(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{412:function(e,t,n){var a=n(68),o=n(413);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},413:function(e,t,n){(t=n(69)(!1)).push([e.i,".column-select-drag-drop__list{background:#e4e8eb;display:flex;padding:0.5rem;overflow:auto;white-space:nowrap;margin-bottom:1rem}.column-select-drag-drop__list__item{user-select:none;padding:0.5rem;margin:0 0.25rem 0 0;color:#fbfeff;background:#00639a}.column-select-drag-drop__list__item:focus{outline:none}.column-select-drag-drop__list__item:hover{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item--dragging{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item__button{background-color:transparent;margin-left:0.25rem;cursor:pointer}.column-select-drag-drop__list__item__button:focus{outline:none}.column-select-drag-drop__list__item__button__icon{color:#fbfeff;width:0.9rem;height:0.9rem;position:relative;top:0.085rem;left:0.35rem}\n",""]),e.exports=t},414:function(e,t,n){var a=n(68),o=n(415);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},415:function(e,t,n){(t=n(69)(!1)).push([e.i,".column-select{margin-bottom:1rem}.column-select__tab-title:first-letter{text-transform:capitalize}.column-select__tab-title__count{margin-left:0.5rem}.column-select__tab-title__count--visible{visibility:visible}.column-select__tab-title__count--hidden{visibility:hidden}\n",""]),e.exports=t},416:function(e,t,n){"use strict";var a=n(15),o=n.n(a),r=n(4),l=n.n(r),c=n(0),i=n.n(c),s=n(77),u=n(48),d=n(90),m=n(5),f=n(19),b=n(79),p=n(401),g=n.n(p),v=n(421),h=(n(412),function(e){var t=e.columns,n=e.onDragDrop,a=e.onRemove;return i.a.createElement(v.a,{onDragEnd:function(e){e.destination&&n(e.source.index,e.destination.index)}},i.a.createElement(v.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return i.a.createElement("div",g()({ref:e.innerRef,className:Object(f.b)({b:"column-select-drag-drop",e:"list"})},e.droppableProps),t.map((function(e,t){var n=e.itemId,o=e.label;return i.a.createElement(v.b,{key:n,draggableId:n,index:t},(function(e,t){return i.a.createElement("div",g()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"button ".concat(Object(f.b)({b:"column-select-drag-drop",e:["list","item"],m:t.isDragging&&"dragging"})),style:e.draggableProps.style}),o,i.a.createElement("button",{type:"button","data-testid":"column-select-dnd-remove-button",className:Object(f.b)({b:"column-select-drag-drop",e:["list","item","button"]}),onClick:function(){return a(n)}},i.a.createElement(m.CloseIcon,{className:Object(f.b)({b:"column-select-drag-drop",e:["list","item","button","icon"]})})))}))})),e.placeholder)})))}),_=n(32),E=(n(414),function(e,t){return i.a.createElement("div",{className:Object(f.b)({b:"column-select",e:"tab-title"})},e,i.a.createElement("span",{className:Object(f.b)({b:"column-select",e:["tab-title","count"],m:t.length?"visible":"hidden"})},i.a.createElement(m.Bubble,{size:"small",value:t.length})))}),w=function(e){var t=e.selectedColumns,n=e.fieldData,a=e.onDragDrop,o=e.onSelect,r=e.onReset,l=function(e,t){var n=new Array(e.length);return[_.a.data,_.a.links].forEach((function(a){t[a].forEach((function(t){var o=t.id;t.items.forEach((function(t){var r=t.id,l=t.label,c=e.indexOf(r);c>=0&&(n[c]={tabId:a,accordionId:o,itemId:r,label:l})}))}))})),n}(t,n),c=[_.a.data,_.a.links].map((function(e){var t=l.filter((function(t){return t.tabId===e}));return{title:E(e,t),id:e,key:e,content:i.a.createElement(m.AccordionSearch,{accordionData:Object.values(n[e]),onSelect:function(e,t){return o(t)},selected:t,columns:!0})}}));return i.a.createElement("div",{className:"column-select"},i.a.createElement(h,{columns:l,onDragDrop:a,onRemove:o}),i.a.createElement("button",{className:"button secondary",type:"button",tabIndex:0,onClick:r,"data-testid":"column-select-reset-button"},"Reset to default"),i.a.createElement(m.Tabs,{tabData:c}))},y=n(93),C=n(94);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={tabId:_.a.data,accordionId:"Names & Taxonomy",itemId:C.a.accession},k=Object(d.o)(Object(s.b)((function(e,t){return{onChange:t.onChange,fieldData:e.results.fields.data,isFetching:e.results.fields.isFetching}}),(function(e){return Object(u.b)({fetchFieldsIfNeeded:function(){return b.j()}},e)}))((function(e){var t=e.fetchFieldsIfNeeded,n=e.isFetching,a=e.fieldData,r=e.selectedColumns,c=e.onChange;if(n||!a||!a[_.a.data]||!a[_.a.data].length||!a[_.a.links]||!a[_.a.links].length)return t(),i.a.createElement(m.Loader,null);var s=r.filter((function(e){return e!==D.itemId})),u=function(e,t){var n=e.tabId,a=e.accordionId,o=e.itemId;return j({},t,l()({},n,t[n].map((function(e){return e.id===a?j({},e,{items:e.items.filter((function(e){return e.id!==o}))}):e}))))}(D,a),d=function(e){c([D.itemId].concat(o()(e)))};return i.a.createElement(w,{selectedColumns:s,fieldData:u,onReset:function(){return c(y.c)},onSelect:function(e){var t=s.indexOf(e);d(t>=0?Object(f.e)(s,t):[].concat(o()(s),[e]))},onDragDrop:function(e,t){d(Object(f.d)(s,e,t))}})})));t.a=k},437:function(e,t,n){var a=n(68),o=n(438);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},438:function(e,t,n){(t=n(69)(!1)).push([e.i,".download{padding:1rem;width:100vw}.download fieldset{margin-top:1rem;min-width:0}.download fieldset legend{font-weight:bold}.preview{margin:1rem}.preview__container{overflow:hidden;display:flex;flex-direction:column;width:100%;border:1px solid black;overflow-x:auto;overflow-y:auto}.preview__inner{padding:0.5rem;height:17.5rem}\n",""]),e.exports=t},446:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),l=n.n(r),c=n(77),i=n(90),s=n(39),u=n.n(s),d=n(5),m=n(416),f=n(32),b=(n(437),function(e){var t,n=e.onSubmit,r=e.onCancel,l=e.onPreview,c=e.selectedColumns,i=e.downloadAll,s=e.fileFormat,u=e.compressed,b=e.preview,p=e.loadingPreview,g=e.onSelectedColumnsChange,v=e.onDownloadAllChange,h=e.onFileFormatChange,_=e.onCompressedChange,E=e.nSelectedEntries,w=e.nPreview,y=e.totalNumberResults;return p?t=o.a.createElement(d.Loader,null):b&&b.length&&(t=o.a.createElement("div",{className:"preview"},o.a.createElement("h4",null,"Preview"),o.a.createElement("div",{className:"preview__container"},o.a.createElement("pre",{className:"preview__inner","data-testid":"download-preview"},b)))),o.a.createElement(a.Fragment,null,o.a.createElement("form",{onSubmit:n,className:"download","data-testid":"download-form"},o.a.createElement("h3",null,"Download"),o.a.createElement("label",{htmlFor:"data-selection-false"},o.a.createElement("input",{id:"data-selection-false",type:"radio",name:"data-selection",value:"false",checked:!i,onChange:v,disabled:0===E}),"Download selected (",E,")"),o.a.createElement("label",{htmlFor:"data-selection-true"},o.a.createElement("input",{id:"data-selection-true",type:"radio",name:"data-selection",value:"true",checked:i,onChange:v}),"Download all (",y,")"),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Format"),o.a.createElement("select",{id:"file-format-select","data-testid":"file-format-select",value:s,onChange:h},Object.values(f.b).filter((function(e){return e!==f.b.rdfXml})).map((function(e){return o.a.createElement("option",{value:e,key:e},e)})))),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Compressed"),o.a.createElement("label",{htmlFor:"compressed-true"},o.a.createElement("input",{id:"compressed-true",type:"radio",name:"compressed",value:"true",checked:u,onChange:_}),"Yes"),o.a.createElement("label",{htmlFor:"compressed-false"},o.a.createElement("input",{id:"compressed-false",type:"radio",name:"compressed",value:"false",checked:!u,onChange:_}),"No")),f.g.includes(s)&&o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Customize data"),o.a.createElement(m.a,{onChange:g,selectedColumns:c})),o.a.createElement("div",{className:"button-group customise-table--cancel-submit-buttons"},o.a.createElement("button",{className:"button secondary",type:"button",onClick:r},"Cancel"),o.a.createElement("button",{className:"button secondary",type:"button",onClick:function(){return l(w)}},"Preview ",w),o.a.createElement("button",{className:"button",type:"submit"},"Download"))),t)}),p=n(45),g=n(55),v=Object(i.o)(Object(c.b)((function(e){return{tableColumns:e.results.tableColumns,totalNumberResults:e.results.totalNumberResults}}))((function(e){var t=e.tableColumns,n=e.totalNumberResults,r=e.history,c=e.location.state,i=c.query,s=c.selectedFacets,d=c.sortColumn,m=c.sortDirection,v=c.selectedEntries,h=Object(a.useState)(t),_=l()(h,2),E=_[0],w=_[1],y=Object(a.useState)(!0),C=l()(y,2),O=C[0],j=C[1],D=Object(a.useState)(f.b.fastaCanonical),k=l()(D,2),N=k[0],F=k[1],x=Object(a.useState)(!0),P=l()(x,2),S=P[0],I=P[1],R=Object(a.useState)(!1),A=l()(R,2),z=A[0],T=A[1],M=Object(a.useState)({url:"",contentType:"",data:""}),q=l()(M,2),B=q[0],J=q[1],L=v.length,H=Math.min(10,O?n:L),X=function(e){return e===f.b.excel?f.b.tsv:e}(N),Y=Object(p.b)({query:i,columns:E,selectedFacets:s,sortColumn:d,sortDirection:m,fileFormat:X,compressed:S,size:H,selectedAccessions:O?[]:v}),G=Object(p.f)(B.url,Y,["compressed"])&&B.data&&B.contentType===f.e.get(X);return o.a.createElement(b,{onSubmit:function(e){e.preventDefault();var t=Object(p.b)({query:i,columns:E,selectedFacets:s,sortColumn:d,sortDirection:m,fileFormat:N,compressed:S,selectedAccessions:O?[]:v}),n=document.createElement("a");n.href=t,n.target="_blank",n.setAttribute("download",""),document.body.appendChild(n),n.click(),document.body.removeChild(n),r.goBack()},onCancel:function(){r.goBack()},onPreview:function(){T(!0),Object(g.a)(Y,{Accept:f.e.get(X)}).then((function(e){var t=u()(e,(function(e){return e.headers["content-type"]}));J({data:t===f.e.get(f.b.json)?JSON.stringify(e.data,null,2):e.data,url:u()(e,(function(e){return e.config.url}))||"",contentType:t})})).catch((function(e){console.error(e)})).finally((function(){T(!1)}))},selectedColumns:E,downloadAll:O,fileFormat:N,compressed:S,onSelectedColumnsChange:w,nSelectedEntries:L,onDownloadAllChange:function(e){return j("true"===e.target.value)},onFileFormatChange:function(e){return F(e.target.value)},onCompressedChange:function(e){return I("true"===e.target.value)},preview:G?B.data:"",loadingPreview:z,nPreview:H,totalNumberResults:n})})));t.default=function(){return o.a.createElement(v,null)}}}]);