(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{577:function(e,t,n){var r=n(578);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(155)(r,a);r.locals&&(e.exports=r.locals)},578:function(e,t,n){(e.exports=n(154)(!1)).push([e.i,".column-select-drag-drop__list{background:#e1edf3;display:flex;padding:0.5rem;overflow:auto;white-space:nowrap;margin-bottom:1rem}.column-select-drag-drop__list__item{user-select:none;padding:0.5rem;margin:0 0.25rem 0 0;color:#fbfeff;background:#00639a}.column-select-drag-drop__list__item:focus{outline:none}.column-select-drag-drop__list__item:hover{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item--dragging{color:#fbfeff;background:#00a6d5}.column-select-drag-drop__list__item__button{background-color:transparent;margin-left:0.25rem;cursor:pointer}.column-select-drag-drop__list__item__button:focus{outline:none}.column-select-drag-drop__list__item__button__icon{color:#fbfeff;width:0.9rem;height:0.9rem;position:relative;top:0.085rem;left:0.35rem}\n",""])},581:function(e,t,n){var r=n(582);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(155)(r,a);r.locals&&(e.exports=r.locals)},582:function(e,t,n){(e.exports=n(154)(!1)).push([e.i,".column-select{margin-bottom:1rem}.column-select__tab-title:first-letter{text-transform:capitalize}.column-select__tab-title__count{margin-left:0.5rem}.column-select__tab-title__count--visible{visibility:visible}.column-select__tab-title__count--hidden{visibility:hidden}\n",""])},589:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(99),l=n(35),c=n(57),i=n(64),s=n(72),u=n(55),d=n(665);n(577);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e){var t=e.columns,n=e.onDragDrop,r=e.onRemove;return a.a.createElement(d.a,{onDragEnd:function(e){e.destination&&n(e.source.index,e.destination.index)}},a.a.createElement(d.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return a.a.createElement("div",m({ref:e.innerRef,className:Object(s.c)({b:"column-select-drag-drop",e:"list"})},e.droppableProps),t.map((function(e,t){var n=e.itemId,o=e.label;return a.a.createElement(d.b,{key:n,draggableId:n,index:t},(function(e,t){return a.a.createElement("div",m({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"button ".concat(Object(s.c)({b:"column-select-drag-drop",e:["list","item"],m:t.isDragging&&"dragging"})),style:e.draggableProps.style}),o,a.a.createElement("button",{type:"button","data-testid":"column-select-dnd-remove-button",className:Object(s.c)({b:"column-select-drag-drop",e:["list","item","button"]}),onClick:function(){return r(n)}},a.a.createElement(i.CloseIcon,{className:Object(s.c)({b:"column-select-drag-drop",e:["list","item","button","icon"]})})))}))})),e.placeholder)})))},b=n(23),p=(n(581),function(e,t){return a.a.createElement("div",{className:Object(s.c)({b:"column-select",e:"tab-title"})},e,a.a.createElement("span",{className:Object(s.c)({b:"column-select",e:["tab-title","count"],m:t.length?"visible":"hidden"})},a.a.createElement(i.Bubble,{size:"small",value:t.length})))}),g=function(e){var t=e.selectedColumns,n=e.fieldData,r=e.onDragDrop,o=e.onSelect,l=e.onReset,c=function(e,t){var n=new Array(e.length);return[b.a.data,b.a.links].forEach((function(r){t[r].forEach((function(t){var a=t.id;t.items.forEach((function(t){var o=t.id,l=t.label,c=e.indexOf(o);c>=0&&(n[c]={tabId:r,accordionId:a,itemId:o,label:l})}))}))})),n}(t,n),s=[b.a.data,b.a.links].map((function(e){var t=c.filter((function(t){return t.tabId===e}));return{title:p(e,t),id:e,key:e,content:a.a.createElement(i.AccordionSearch,{accordionData:Object.values(n[e]),onSelect:function(e,t){return o(t)},selected:t,columns:!0})}}));return a.a.createElement("div",{className:"column-select"},a.a.createElement(f,{columns:c,onDragDrop:r,onRemove:o}),a.a.createElement("button",{className:"button secondary",type:"button",tabIndex:0,onClick:l,"data-testid":"column-select-reset-button"},"Reset to default"),a.a.createElement(i.Tabs,{tabData:s}))},v=n(70),h=n(30);function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={tabId:b.a.data,accordionId:"Names & Taxonomy",itemId:h.a.accession},C=Object(c.o)(Object(o.b)((function(e,t){return{onChange:t.onChange,fieldData:e.results.fields.data,isFetching:e.results.fields.isFetching}}),(function(e){return Object(l.b)({fetchFieldsIfNeeded:function(){return u.k()}},e)}))((function(e){var t=e.fetchFieldsIfNeeded,n=e.isFetching,r=e.fieldData,o=e.selectedColumns,l=e.onChange;if(n||!r||!r[b.a.data]||!r[b.a.data].length||!r[b.a.links]||!r[b.a.links].length)return t(),a.a.createElement(i.Loader,null);var c=o.filter((function(e){return e!==O.itemId})),u=function(e,t){var n=e.tabId,r=e.accordionId,a=e.itemId;return _({},t,E({},n,t[n].map((function(e){return e.id===r?_({},e,{items:e.items.filter((function(e){return e.id!==a}))}):e}))))}(O,r),d=function(e){l([O.itemId].concat(y(e)))};return a.a.createElement(g,{selectedColumns:c,fieldData:u,onReset:function(){return l(v.c)},onSelect:function(e){var t=c.indexOf(e);d(t>=0?Object(s.g)(c,t):[].concat(y(c),[e]))},onDragDrop:function(e,t){d(Object(s.f)(c,e,t))}})})));t.a=C},816:function(e,t,n){var r=n(817);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(155)(r,a);r.locals&&(e.exports=r.locals)},817:function(e,t,n){(e.exports=n(154)(!1)).push([e.i,".download{padding:1rem}.download fieldset{margin-top:1rem;min-width:0}.download fieldset legend{font-weight:bold}.preview{margin:1rem}.preview__container{overflow:hidden;display:flex;flex-direction:column;width:100%;border:1px solid black;overflow-x:auto;overflow-y:auto}.preview__inner{padding:0.5rem;height:17.5rem}\n",""])},831:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(99),l=n(57),c=n(100),i=n.n(c),s=n(64),u=n(589),d=n(23),m=(n(816),function(e){var t,n=e.onSubmit,o=e.onCancel,l=e.onPreview,c=e.selectedColumns,i=e.downloadAll,m=e.fileFormat,f=e.compressed,b=e.preview,p=e.loadingPreview,g=e.onSelectedColumnsChange,v=e.onDownloadAllChange,h=e.onFileFormatChange,y=e.onCompressedChange,w=e.nSelectedEntries,_=e.nPreview,E=e.totalNumberResults;return p?t=a.a.createElement(s.Loader,null):b&&b.length&&(t=a.a.createElement("div",{className:"preview"},a.a.createElement("h4",null,"Preview"),a.a.createElement("div",{className:"preview__container"},a.a.createElement("pre",{className:"preview__inner","data-testid":"download-preview"},b)))),a.a.createElement(r.Fragment,null,a.a.createElement("form",{onSubmit:n,className:"download","data-testid":"download-form"},a.a.createElement("h3",null,"Download"),a.a.createElement("label",{htmlFor:"data-selection-false"},a.a.createElement("input",{id:"data-selection-false",type:"radio",name:"data-selection",value:"false",checked:!i,onChange:v,disabled:0===w}),"Download selected (",w,")"),a.a.createElement("label",{htmlFor:"data-selection-true"},a.a.createElement("input",{id:"data-selection-true",type:"radio",name:"data-selection",value:"true",checked:i,onChange:v}),"Download all (",E,")"),a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Format"),a.a.createElement("select",{id:"file-format-select","data-testid":"file-format-select",value:m,onChange:h},Object.values(d.b).map((function(e){return a.a.createElement("option",{value:e,key:e},e)})))),a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Compressed"),a.a.createElement("label",{htmlFor:"compressed-true"},a.a.createElement("input",{id:"compressed-true",type:"radio",name:"compressed",value:"true",checked:f,onChange:y}),"Yes"),a.a.createElement("label",{htmlFor:"compressed-false"},a.a.createElement("input",{id:"compressed-false",type:"radio",name:"compressed",value:"false",checked:!f,onChange:y}),"No")),d.f.includes(m)&&a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Customise data"),a.a.createElement(u.a,{onChange:g,selectedColumns:c})),a.a.createElement("div",{className:"button-group customise-table--cancel-submit-buttons"},a.a.createElement("button",{className:"button secondary",type:"button",onClick:o},"Cancel"),a.a.createElement("button",{className:"button secondary",type:"button",onClick:function(){return l(_)}},"Preview ",_),a.a.createElement("button",{className:"button",type:"submit"},"Download"))),t)}),f=n(65),b=n(54);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=Object(l.o)(Object(o.b)((function(e){return{tableColumns:e.results.tableColumns,totalNumberResults:e.results.totalNumberResults}}))((function(e){var t=e.tableColumns,n=e.totalNumberResults,o=e.history,l=e.location.state,c=l.query,s=l.selectedFacets,u=l.sortColumn,g=l.sortDirection,v=l.selectedEntries,h=p(Object(r.useState)(t),2),y=h[0],w=h[1],_=p(Object(r.useState)(!0),2),E=_[0],O=_[1],C=p(Object(r.useState)(d.b.fastaCanonical),2),j=C[0],D=C[1],k=p(Object(r.useState)(!0),2),N=k[0],S=k[1],I=p(Object(r.useState)(!1),2),F=I[0],P=I[1],x=p(Object(r.useState)({url:"",contentType:"",data:""}),2),A=x[0],R=x[1],T=v.length,z=Math.min(10,E?n:T),q=function(e){return e===d.b.excel?d.b.tsv:e}(j),B=Object(f.b)({query:c,columns:y,selectedFacets:s,sortColumn:u,sortDirection:g,fileFormat:q,compressed:N,size:z,selectedAccessions:E?[]:v}),J=Object(f.g)(A.url,B,["compressed"])&&A.data&&A.contentType===d.d.get(q);return a.a.createElement(m,{onSubmit:function(e){e.preventDefault();var t=Object(f.b)({query:c,columns:y,selectedFacets:s,sortColumn:u,sortDirection:g,fileFormat:j,compressed:N,selectedAccessions:E?[]:v}),n=document.createElement("a");n.href=t,n.target="_blank",n.setAttribute("download",""),document.body.appendChild(n),n.click(),document.body.removeChild(n),o.goBack()},onCancel:function(){o.goBack()},onPreview:function(){P(!0),Object(b.a)(B,{Accept:d.d.get(q)}).then((function(e){var t=i()(e,(function(e){return e.headers["content-type"]}));R({data:t===d.d.get(d.b.json)?JSON.stringify(e.data,null,2):e.data,url:i()(e,(function(e){return e.config.url}))||"",contentType:t})})).catch((function(e){console.error(e)})).finally((function(){P(!1)}))},selectedColumns:y,downloadAll:E,fileFormat:j,compressed:N,onSelectedColumnsChange:w,nSelectedEntries:T,onDownloadAllChange:function(e){return O("true"===e.target.value)},onFileFormatChange:function(e){return D(e.target.value)},onCompressedChange:function(e){return S("true"===e.target.value)},preview:J?A.data:"",loadingPreview:F,nPreview:z,totalNumberResults:n})})));t.default=function(){return a.a.createElement(g,null)}}}]);