(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{268:function(e,t,n){},269:function(e,t,n){},274:function(e,t,n){"use strict";var a=n(33),c=n.n(a),o=n(3),r=n.n(o),l=n(0),i=n.n(l),u=n(55),s=n(18),d=n(8),b=n(22),m=n(77),f=n(63),p=n(210),g=n.n(p),O=n(325),v=(n(268),function(e){var t=e.columns,n=e.onDragDrop,a=e.onRemove;return i.a.createElement(O.a,{onDragEnd:function(e){e.destination&&n(e.source.index,e.destination.index)}},i.a.createElement(O.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return i.a.createElement("div",g()({ref:e.innerRef,className:Object(m.b)({b:"column-select-drag-drop",e:"list"})},e.droppableProps),t.map((function(e,t){var n=e.itemId,c=e.label;return i.a.createElement(O.b,{key:n,draggableId:n,index:t},(function(e,t){return i.a.createElement("div",g()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{className:"button ".concat(Object(m.b)({b:"column-select-drag-drop",e:["list","item"],m:t.isDragging&&"dragging"})),style:e.draggableProps.style}),c,i.a.createElement("button",{type:"button","data-testid":"column-select-dnd-remove-button",className:Object(m.b)({b:"column-select-drag-drop",e:["list","item","button"]}),onClick:function(){return a(n)}},i.a.createElement(b.CloseIcon,{className:Object(m.b)({b:"column-select-drag-drop",e:["list","item","button","icon"]})})))}))})),e.placeholder)})))}),h=n(10),E=(n(269),function(e,t){return i.a.createElement("div",{className:Object(m.b)({b:"column-select",e:"tab-title"})},e,i.a.createElement("span",{className:Object(m.b)({b:"column-select",e:["tab-title","count"],m:t.length?"visible":"hidden"})},i.a.createElement(b.Bubble,{size:"small",value:t.length})))}),j=function(e){var t=e.selectedColumns,n=e.fieldData,a=e.onDragDrop,c=e.onSelect,o=e.onReset,r=function(e,t){var n=new Array(e.length);return[h.a.data,h.a.links].forEach((function(a){t[a].forEach((function(t){var c=t.id;t.items.forEach((function(t){var o=t.id,r=t.label,l=e.indexOf(o);l>=0&&(n[l]={tabId:a,accordionId:c,itemId:o,label:r})}))}))})),n}(t,n),l=[h.a.data,h.a.links].map((function(e){var t=r.filter((function(t){return t.tabId===e}));return{title:E(e,t),id:e,key:e,content:i.a.createElement(b.AccordionSearch,{accordionData:Object.values(n[e]),onSelect:function(e,t){return c(t)},selected:t,columns:!0})}}));return i.a.createElement("div",{className:"column-select"},i.a.createElement(v,{columns:r,onDragDrop:a,onRemove:c}),i.a.createElement("button",{className:"button secondary",type:"button",tabIndex:0,onClick:o,"data-testid":"column-select-reset-button"},"Reset to default"),i.a.createElement(b.Tabs,{tabData:l}))},y=n(57),C=n(35);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={tabId:h.a.data,accordionId:"Names & Taxonomy",itemId:C.a.accession},k=Object(d.o)(Object(u.b)((function(e,t){return{onChange:t.onChange,fieldData:e.results.fields.data,isFetching:e.results.fields.isFetching}}),(function(e){return Object(s.b)({fetchFieldsIfNeeded:function(){return f.d()}},e)}))((function(e){var t=e.fetchFieldsIfNeeded,n=e.isFetching,a=e.fieldData,o=e.selectedColumns,l=e.onChange;if(n||!a||!a[h.a.data]||!a[h.a.data].length||!a[h.a.links]||!a[h.a.links].length)return t(),i.a.createElement(b.Loader,null);var u=o.filter((function(e){return e!==N.itemId})),s=function(e,t){var n=e.tabId,a=e.accordionId,c=e.itemId;return I(I({},t),{},r()({},n,t[n].map((function(e){return e.id===a?I(I({},e),{},{items:e.items.filter((function(e){return e.id!==c}))}):e}))))}(N,a),d=function(e){l([N.itemId].concat(c()(e)))};return i.a.createElement(j,{selectedColumns:u,fieldData:s,onReset:function(){return l(y.c)},onSelect:function(e){var t=u.indexOf(e);d(t>=0?Object(m.e)(u,t):[].concat(c()(u),[e]))},onDragDrop:function(e,t){d(Object(m.d)(u,e,t))}})})));t.a=k},412:function(e,t,n){},430:function(e,t,n){"use strict";n.r(t);var a=n(38),c=n.n(a),o=n(0),r=n.n(o),l=n(55),i=n(18),u=n(8),s=n(63),d=n(274),b=(n(412),function(e){var t=e.selectedColumns,n=e.onChange,a=e.onSubmit,c=e.onCancel;return r.a.createElement("form",{onSubmit:a,className:"customise-table","data-testid":"customise-table-form"},r.a.createElement(d.a,{onChange:n,selectedColumns:t}),r.a.createElement("div",{className:"button-group customise-table--cancel-submit-buttons"},r.a.createElement("button",{className:"button secondary",type:"button",onClick:c,"data-testid":"customise-table-cancel-button"},"Cancel"),r.a.createElement("button",{className:"button",type:"submit"},"Save")))}),m=Object(u.o)(Object(l.b)((function(e){return{tableColumns:e.results.tableColumns}}),(function(e){return Object(i.b)({updateTableColumns:function(e){return s.e(e)}},e)}))((function(e){var t=e.tableColumns,n=e.updateTableColumns,a=e.history,l=Object(o.useState)(t),i=c()(l,2),u=i[0],s=i[1];return r.a.createElement(b,{selectedColumns:u,onChange:function(e){s(e)},onSubmit:function(e){e.preventDefault(),n(u),a.goBack()},onCancel:function(){a.goBack()}})})));t.default=m}}]);
//# sourceMappingURL=customise-table.009191.js.map