(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(189).concat([function(t,e,n){"use strict";var r=n(289);n.d(e,"b",(function(){return r.a}));var i=n(220);n.d(e,"a",(function(){return i.c}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return o.a})),n.d(e,"a",(function(){return r.d})),n.d(e,"c",(function(){return s}));var r=n(191);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const i=new class{handleAttributeExpressions(t,e,n,i){const a=e[0];if("."===a){return new r.e(t,e.slice(1),n).parts}return"@"===a?[new r.c(t,e.slice(1),i.eventContext)]:"?"===a?[new r.b(t,e.slice(1),n)]:new r.a(t,e,n).parts}handleTextExpression(t){return new r.d(t)}};var a=n(217),o=n(227);n(197),n(228),n(230),n(218),n(229),n(195);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const s=(t,...e)=>new a.b(t,e,"html",i)},function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"e",(function(){return g})),n.d(e,"c",(function(){return b}));var r=n(227),i=n(197),a=n(228),o=n(229),s=n(217),c=n(195);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const l=t=>null===t||!("object"==typeof t||"function"==typeof t),u=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class h{constructor(t,e,n){this.dirty=!0,this.element=t,this.name=e,this.strings=n,this.parts=[];for(let t=0;t<n.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new d(this)}_getValue(){const t=this.strings,e=t.length-1;let n="";for(let r=0;r<e;r++){n+=t[r];const e=this.parts[r];if(void 0!==e){const t=e.value;if(l(t)||!u(t))n+="string"==typeof t?t:String(t);else for(const e of t)n+="string"==typeof e?e:String(e)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class d{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===a.a||l(t)&&t===this.value||(this.value=t,Object(r.b)(t)||(this.committer.dirty=!0))}commit(){for(;Object(r.b)(this.value);){const t=this.value;this.value=a.a,t(this)}this.value!==a.a&&this.committer.commit()}}class p{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(Object(c.c)()),this.endNode=t.appendChild(Object(c.c)())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=Object(c.c)()),t.__insert(this.endNode=Object(c.c)())}insertAfterPart(t){t.__insert(this.startNode=Object(c.c)()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;Object(r.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a.a,t(this)}const t=this.__pendingValue;t!==a.a&&(l(t)?t!==this.value&&this.__commitText(t):t instanceof s.b?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):u(t)?this.__commitIterable(t):t===a.b?(this.value=a.b,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,n="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=n:this.__commitNode(document.createTextNode(n)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof o.a&&this.value.template===e)this.value.update(t.values);else{const n=new o.a(e,t.processor,this.options),r=n._clone();n.update(t.values),this.__commitNode(r),this.value=n}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let n,r=0;for(const i of t)n=e[r],void 0===n&&(n=new p(this.options),e.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(e[r-1])),n.setValue(i),n.commit(),r++;r<e.length&&(e.length=r,this.clear(n&&n.endNode))}clear(t=this.startNode){Object(i.b)(this.startNode.parentNode,t.nextSibling,this.endNode)}}class f{constructor(t,e,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=n}setValue(t){this.__pendingValue=t}commit(){for(;Object(r.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a.a,t(this)}if(this.__pendingValue===a.a)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=a.a}}class g extends h{constructor(t,e,n){super(t,e,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new m(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class m extends d{}let v=!1;(()=>{try{const t={get capture(){return v=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class b{constructor(t,e,n){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=n,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;Object(r.b)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=a.a,t(this)}if(this.__pendingValue===a.a)return;const t=this.__pendingValue,e=this.value,n=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),i&&(this.__options=y(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=a.a}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const y=t=>t&&(v?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)},,,,function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return h}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r=`{{lit-${String(Math.random()).slice(2)}}}`,i=`\x3c!--${r}--\x3e`,a=new RegExp(`${r}|${i}`),o="$lit$";class s{constructor(t,e){this.parts=[],this.element=e;const n=[],i=[],s=document.createTreeWalker(e.content,133,null,!1);let l=0,d=-1,p=0;const{strings:f,values:{length:g}}=t;for(;p<g;){const t=s.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:n}=e;let r=0;for(let t=0;t<n;t++)c(e[t].name,o)&&r++;for(;r-- >0;){const e=f[p],n=h.exec(e)[2],r=n.toLowerCase()+o,i=t.getAttribute(r);t.removeAttribute(r);const s=i.split(a);this.parts.push({type:"attribute",index:d,name:n,strings:s}),p+=s.length-1}}"TEMPLATE"===t.tagName&&(i.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(r)>=0){const r=t.parentNode,i=e.split(a),s=i.length-1;for(let e=0;e<s;e++){let n,a=i[e];if(""===a)n=u();else{const t=h.exec(a);null!==t&&c(t[2],o)&&(a=a.slice(0,t.index)+t[1]+t[2].slice(0,-o.length)+t[3]),n=document.createTextNode(a)}r.insertBefore(n,t),this.parts.push({type:"node",index:++d})}""===i[s]?(r.insertBefore(u(),t),n.push(t)):t.data=i[s],p+=s}}else if(8===t.nodeType)if(t.data===r){const e=t.parentNode;null!==t.previousSibling&&d!==l||(d++,e.insertBefore(u(),t)),l=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(n.push(t),d--),p++}else{let e=-1;for(;-1!==(e=t.data.indexOf(r,e+1));)this.parts.push({type:"node",index:-1}),p++}}else s.currentNode=i.pop()}for(const t of n)t.parentNode.removeChild(t)}}const c=(t,e)=>{const n=t.length-e.length;return n>=0&&t.slice(n)===e},l=t=>-1!==t.index,u=()=>document.createComment(""),h=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/},function(t,e,n){"use strict";function r(t,e){try{return e(t)}catch(t){if(t instanceof TypeError){if(i.test(t))return null;if(a.test(t))return}throw t}}var i=/^null | null$|^[^(]* null /i,a=/^undefined | undefined$|^[^(]* undefined /i;r.default=r,t.exports=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,e,n=null,r=null)=>{for(;e!==n;){const n=e.nextSibling;t.insertBefore(e,r),e=n}},a=(t,e,n=null)=>{for(;e!==n;){const n=e.nextSibling;t.removeChild(e),e=n}}},,,,,,,,,,,,function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){"use strict";n.d(e,"h",(function(){return m})),n.d(e,"c",(function(){return O})),n.d(e,"a",(function(){return S})),n.d(e,"b",(function(){return M})),n.d(e,"d",(function(){return Le})),n.d(e,"f",(function(){return _n.a})),n.d(e,"j",(function(){return In})),n.d(e,"i",(function(){return Zn})),n.d(e,"k",(function(){return er})),n.d(e,"l",(function(){return Ki.b})),n.d(e,"e",(function(){return Ki.a})),n.d(e,"g",(function(){return ia})),n.d(e,"m",(function(){return eo})),n.d(e,"n",(function(){return Va}));var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return r(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};var a=i(r),o=a.right,s=(a.left,o);var c=Array.prototype,l=(c.slice,c.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),u=Math.sqrt(50),h=Math.sqrt(10),d=Math.sqrt(2),p=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=f(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function f(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=u?10:a>=h?5:a>=d?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=u?10:a>=h?5:a>=d?2:1)}function g(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=u?i*=10:a>=h?i*=5:a>=d&&(i*=2),e<t?-i:i}var m=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r};var v=Array.prototype.slice,b=function(t){return t};function y(t){return"translate("+(t+.5)+",0)"}function _(t){return"translate(0,"+(t+.5)+")"}function w(t){return function(e){return+t(e)}}function x(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function C(){return!this.__axis}function A(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,c=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",u=1===t||3===t?y:_;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):b:i,f=Math.max(a,0)+s,g=e.range(),m=+g[0]+.5,v=+g[g.length-1]+.5,y=(e.bandwidth?x:w)(e.copy()),_=h.selection?h.selection():h,A=_.selectAll(".domain").data([null]),O=_.selectAll(".tick").data(d,e).order(),S=O.exit(),M=O.enter().append("g").attr("class","tick"),E=O.select("line"),k=O.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(M),E=E.merge(M.append("line").attr("stroke","currentColor").attr(l+"2",c*a)),k=k.merge(M.append("text").attr("fill","currentColor").attr(l,c*f).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==_&&(A=A.transition(h),O=O.transition(h),E=E.transition(h),k=k.transition(h),S=S.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?u(t):this.getAttribute("transform")})),M.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:y(t))}))),S.remove(),A.attr("d",4===t||2==t?o?"M"+c*o+","+m+"H0.5V"+v+"H"+c*o:"M0.5,"+m+"V"+v:o?"M"+m+","+c*o+"V0.5H"+v+"V"+c*o:"M"+m+",0.5H"+v),O.attr("opacity",1).attr("transform",(function(t){return u(y(t))})),E.attr(l+"2",c*a),k.attr(l,c*f).text(p),_.filter(C).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=v.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:v.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:v.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(a=o=+t,h):a},h.tickSizeInner=function(t){return arguments.length?(a=+t,h):a},h.tickSizeOuter=function(t){return arguments.length?(o=+t,h):o},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function O(t){return A(2,t)}function S(t){return A(3,t)}function M(t){return A(4,t)}var E={value:function(){}};function k(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new T(r)}function T(t){this._=t}function D(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function I(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function N(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=E,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}T.prototype=k.prototype={constructor:T,on:function(t,e){var n,r=this._,i=D(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=N(r[n],t.name,e);else if(null==e)for(n in r)r[n]=N(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=I(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new T(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var j=k,P=n(289),L=n(220);var R=function(){L.c.preventDefault(),L.c.stopImmediatePropagation()},B=function(t){var e=t.document.documentElement,n=Object(P.a)(t).on("dragstart.drag",R,!0);"onselectstart"in e?n.on("selectstart.drag",R,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function F(t,e){var n=t.document.documentElement,r=Object(P.a)(t).on("dragstart.drag",null);e&&(r.on("click.drag",R,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var $,U,q=n(427),H=n(287),G=n(290),z=n(243),V=0,W=0,Y=0,X=0,Z=0,J=0,K="object"==typeof performance&&performance.now?performance:Date,Q="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tt(){return Z||(Q(et),Z=K.now()+J)}function et(){Z=0}function nt(){this._call=this._time=this._next=null}function rt(t,e,n){var r=new nt;return r.restart(t,e,n),r}function it(){Z=(X=K.now())+J,V=W=0;try{!function(){tt(),++V;for(var t,e=$;e;)(t=Z-e._time)>=0&&e._call.call(null,t),e=e._next;--V}()}finally{V=0,function(){var t,e,n=$,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:$=e);U=t,ot(r)}(),Z=0}}function at(){var t=K.now(),e=t-X;e>1e3&&(J-=e,X=t)}function ot(t){V||(W&&(W=clearTimeout(W)),t-Z>24?(t<1/0&&(W=setTimeout(it,t-K.now()-J)),Y&&(Y=clearInterval(Y))):(Y||(X=K.now(),Y=setInterval(at,1e3)),V=1,Q(it)))}nt.prototype=rt.prototype={constructor:nt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?tt():+n)+(null==e?0:+e),this._next||U===this||(U?U._next=this:$=this,U=this),this._call=t,this._time=n,ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,ot())}};var st=function(t,e,n){var r=new nt;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},ct=j("start","end","cancel","interrupt"),lt=[],ut=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(c){var l,u,h,d;if(1!==n.state)return s();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return st(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[l]):+l<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[l])}if(st((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(c))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=rt((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:ct,tween:lt,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function ht(t,e){var n=pt(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function dt(t,e){var n=pt(t,e);if(n.state>3)throw new Error("too late; already running");return n}function pt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var ft,gt,mt,vt,bt=function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}},yt=n(254),_t=180/Math.PI,wt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},xt=function(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*_t,skewX:Math.atan(c)*_t,scaleX:o,scaleY:s}};function Ct(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],c=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var c=o.push("translate(",null,e,null,n);s.push({i:c-4,x:Object(yt.a)(t,i)},{i:c-2,x:Object(yt.a)(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,c),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Object(yt.a)(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,c),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Object(yt.a)(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,c),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Object(yt.a)(t,n)},{i:s-2,x:Object(yt.a)(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,c),a=o=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var At=Ct((function(t){return"none"===t?wt:(ft||(ft=document.createElement("DIV"),gt=document.documentElement,mt=document.defaultView),ft.style.transform=t,t=mt.getComputedStyle(gt.appendChild(ft),null).getPropertyValue("transform"),gt.removeChild(ft),t=t.slice(7,-1).split(","),xt(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Ot=Ct((function(t){return null==t?wt:(vt||(vt=document.createElementNS("http://www.w3.org/2000/svg","g")),vt.setAttribute("transform",t),(t=vt.transform.baseVal.consolidate())?(t=t.matrix,xt(t.a,t.b,t.c,t.d,t.e,t.f)):wt)}),", ",")",")"),St=n(231);function Mt(t,e){var n,r;return function(){var i=dt(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Et(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=dt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function kt(t,e,n){var r=t._id;return t.each((function(){var t=dt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return pt(t,r).value[e]}}var Tt=n(433),Dt=n(416),It=n(377),Nt=function(t,e){var n;return("number"==typeof e?yt.a:e instanceof Tt.a?Dt.a:(n=Object(Tt.a)(e))?(e=n,Dt.a):It.a)(t,e)};function jt(t){return function(){this.removeAttribute(t)}}function Pt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lt(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Rt(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Bt(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttribute(t)}}function Ft(t,e,n){var r,i,a;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,c));this.removeAttributeNS(t.space,t.local)}}function $t(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ut(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qt(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Ut(t,i)),n}return i._value=e,i}function Ht(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&$t(t,i)),n}return i._value=e,i}function Gt(t,e){return function(){ht(this,t).delay=+e.apply(this,arguments)}}function zt(t,e){return e=+e,function(){ht(this,t).delay=e}}function Vt(t,e){return function(){dt(this,t).duration=+e.apply(this,arguments)}}function Wt(t,e){return e=+e,function(){dt(this,t).duration=e}}function Yt(t,e){if("function"!=typeof e)throw new Error;return function(){dt(this,t).ease=e}}var Xt=n(255);function Zt(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ht:dt;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}var Jt=n(233),Kt=n(256),Qt=z.b.prototype.constructor,te=n(257);function ee(t){return function(){this.style.removeProperty(t)}}function ne(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function re(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&ne(t,a,n)),r}return a._value=e,a}function ie(t){return function(e){this.textContent=t.call(this,e)}}function ae(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ie(r)),e}return r._value=t,r}var oe=0;function se(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ce(){return++oe}var le=z.b.prototype;se.prototype=function(t){return Object(z.b)().transition(t)}.prototype={constructor:se,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(Jt.a)(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,c,l=r[o],u=l.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,ut(h[d],e,n,d,h,pt(s,n)));return new se(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(Kt.a)(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,p=t.call(c,c.__data__,h,l),f=pt(c,n),g=0,m=p.length;g<m;++g)(d=p[g])&&ut(d,e,n,g,p,f);a.push(p),o.push(c)}return new se(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(Xt.a)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,c=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new se(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,l=e[s],u=n[s],h=l.length,d=o[s]=new Array(h),p=0;p<h;++p)(c=l[p]||u[p])&&(d[p]=c);for(;s<r;++s)o[s]=e[s];return new se(o,this._parents,this._name,this._id)},selection:function(){return new Qt(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ce(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,l=0;l<c;++l)if(o=s[l]){var u=pt(o,e);ut(o,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new se(r,this._parents,t,n)},call:le.call,nodes:le.nodes,node:le.node,size:le.size,empty:le.empty,each:le.each,on:function(t,e){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(t):this.each(Zt(n,t,e))},attr:function(t,e){var n=Object(St.a)(t),r="transform"===n?Ot:Nt;return this.attrTween(t,"function"==typeof e?(n.local?Ft:Bt)(n,r,kt(this,"attr."+t,e)):null==e?(n.local?Pt:jt)(n):(n.local?Rt:Lt)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(St.a)(t);return this.tween(n,(r.local?qt:Ht)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?At:Nt;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Object(te.b)(this,t),o=(this.style.removeProperty(t),Object(te.b)(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,ee(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Object(te.b)(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=Object(te.b)(this,t)),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}(t,r,kt(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var c=dt(this,t),l=c.on,u=null==c.value[o]?a||(a=ee(e)):void 0;l===n&&i===u||(r=(n=l).copy()).on(s,i=u),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Object(te.b)(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,re(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(kt(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ae(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=pt(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Mt:Et)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Gt:zt)(e,t)):pt(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Vt:Wt)(e,t)):pt(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Yt(e,t)):pt(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},c={value:function(){0==--i&&a()}};n.each((function(){var n=dt(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e}))}))}};var ue={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function he(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ue.time=tt(),ue;return n}z.b.prototype.interrupt=function(t){return this.each((function(){bt(this,t)}))},z.b.prototype.transition=function(t){var e,n;t instanceof se?(e=t._id,t=t._name):(e=ce(),(n=ue).time=tt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],c=s.length,l=0;l<c;++l)(o=s[l])&&ut(o,t,e,l,s,n||he(o,e));return new se(r,this._parents,t,e)};var de=function(t){return function(){return t}},pe=function(t,e,n){this.target=t,this.type=e,this.selection=n};function fe(){L.c.stopImmediatePropagation()}var ge=function(){L.c.preventDefault(),L.c.stopImmediatePropagation()},me={name:"drag"},ve={name:"space"},be={name:"handle"},ye={name:"center"};function _e(t){return[+t[0],+t[1]]}function we(t){return[_e(t[0]),_e(t[1])]}function xe(t){return function(e){return Object(H.a)(e,L.c.touches,t)}}var Ce={name:"x",handles:["w","e"].map(Te),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ae={name:"y",handles:["n","s"].map(Te),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Oe=(["n","w","e","s","nw","ne","sw","se"].map(Te),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Se={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Me={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ee={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ke={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Te(t){return{type:t}}function De(){return!L.c.ctrlKey&&!L.c.button}function Ie(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ne(){return navigator.maxTouchPoints||"ontouchstart"in this}function je(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Pe(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Le(){return Re(Ce)}function Re(t){var e,n=Ie,r=De,i=Ne,a=!0,o=j("start","brush","end"),s=6;function c(e){var n=e.property("__brush",g).selectAll(".overlay").data([Te("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Oe.overlay).merge(n).each((function(){var t=je(this).extent;Object(P.a)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Te("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Oe.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Oe[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Object(P.a)(this),e=je(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function d(){if((!e||L.c.touches)&&r.apply(this,arguments)){var n,i,o,s,c,h,d,p,f,g,m,v=this,b=L.c.target.__data__.type,y="selection"===(a&&L.c.metaKey?b="overlay":b)?me:a&&L.c.altKey?ye:be,_=t===Ae?null:Ee[b],w=t===Ce?null:ke[b],x=je(v),C=x.extent,A=x.selection,O=C[0][0],S=C[0][1],M=C[1][0],E=C[1][1],k=0,T=0,D=_&&w&&a&&L.c.shiftKey,I=L.c.touches?xe(L.c.changedTouches[0].identifier):G.a,N=I(v),j=N,R=u(v,arguments,!0).beforestart();"overlay"===b?(A&&(f=!0),x.selection=A=[[n=t===Ae?O:N[0],o=t===Ce?S:N[1]],[c=t===Ae?M:n,d=t===Ce?E:o]]):(n=A[0][0],o=A[0][1],c=A[1][0],d=A[1][1]),i=n,s=o,h=c,p=d;var $=Object(P.a)(v).attr("pointer-events","none"),U=$.selectAll(".overlay").attr("cursor",Oe[b]);if(L.c.touches)R.moved=H,R.ended=V;else{var q=Object(P.a)(L.c.view).on("mousemove.brush",H,!0).on("mouseup.brush",V,!0);a&&q.on("keydown.brush",W,!0).on("keyup.brush",Y,!0),B(L.c.view)}fe(),bt(v),l.call(v),R.start()}function H(){var t=I(v);!D||g||m||(Math.abs(t[0]-j[0])>Math.abs(t[1]-j[1])?m=!0:g=!0),j=t,f=!0,ge(),z()}function z(){var t;switch(k=j[0]-N[0],T=j[1]-N[1],y){case ve:case me:_&&(k=Math.max(O-n,Math.min(M-c,k)),i=n+k,h=c+k),w&&(T=Math.max(S-o,Math.min(E-d,T)),s=o+T,p=d+T);break;case be:_<0?(k=Math.max(O-n,Math.min(M-n,k)),i=n+k,h=c):_>0&&(k=Math.max(O-c,Math.min(M-c,k)),i=n,h=c+k),w<0?(T=Math.max(S-o,Math.min(E-o,T)),s=o+T,p=d):w>0&&(T=Math.max(S-d,Math.min(E-d,T)),s=o,p=d+T);break;case ye:_&&(i=Math.max(O,Math.min(M,n-k*_)),h=Math.max(O,Math.min(M,c+k*_))),w&&(s=Math.max(S,Math.min(E,o-T*w)),p=Math.max(S,Math.min(E,d+T*w)))}h<i&&(_*=-1,t=n,n=c,c=t,t=i,i=h,h=t,b in Se&&U.attr("cursor",Oe[b=Se[b]])),p<s&&(w*=-1,t=o,o=d,d=t,t=s,s=p,p=t,b in Me&&U.attr("cursor",Oe[b=Me[b]])),x.selection&&(A=x.selection),g&&(i=A[0][0],h=A[1][0]),m&&(s=A[0][1],p=A[1][1]),A[0][0]===i&&A[0][1]===s&&A[1][0]===h&&A[1][1]===p||(x.selection=[[i,s],[h,p]],l.call(v),R.brush())}function V(){if(fe(),L.c.touches){if(L.c.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else F(L.c.view,f),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),U.attr("cursor",Oe.overlay),x.selection&&(A=x.selection),Pe(A)&&(x.selection=null,l.call(v)),R.end()}function W(){switch(L.c.keyCode){case 16:D=_&&w;break;case 18:y===be&&(_&&(c=h-k*_,n=i+k*_),w&&(d=p-T*w,o=s+T*w),y=ye,z());break;case 32:y!==be&&y!==ye||(_<0?c=h-k:_>0&&(n=i-k),w<0?d=p-T:w>0&&(o=s-T),y=ve,U.attr("cursor",Oe.selection),z());break;default:return}ge()}function Y(){switch(L.c.keyCode){case 16:D&&(g=m=D=!1,z());break;case 18:y===ye&&(_<0?c=h:_>0&&(n=i),w<0?d=p:w>0&&(o=s),y=be,z());break;case 32:y===ve&&(L.c.altKey?(_&&(c=h-k*_,n=i+k*_),w&&(d=p-T*w,o=s+T*w),y=ye):(_<0?c=h:_>0&&(n=i),w<0?d=p:w>0&&(o=s),y=be),U.attr("cursor",Oe[b]),z());break;default:return}ge()}}function p(){u(this,arguments).moved()}function f(){u(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=we(n.apply(this,arguments)),e.dim=t,e}return c.move=function(e,n){e.selection?e.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=u(e,arguments),a=r.selection,o=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Object(q.a)(a,o);function c(t){r.selection=1===t&&null===o?null:s(t),l.call(e),i.brush()}return null!==a&&null!==o?c:c(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,i.extent),o=u(e,r).beforestart();bt(e),i.selection=null===a?null:a,l.call(e),o.start().brush().end()}))},c.clear=function(t){c.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Object(L.a)(new pe(c,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},c.extent=function(t){return arguments.length?(n="function"==typeof t?t:de(we(t)),c):n},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:de(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:de(!!t),c):i},c.handleSize=function(t){return arguments.length?(s=+t,c):s},c.keyModifiers=function(t){return arguments.length?(a=!!t,c):a},c.on=function(){var t=o.on.apply(o,arguments);return t===o?c:t},c}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var Be=Math.PI,Fe=2*Be,$e=Fe-1e-6;function Ue(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function qe(){return new Ue}Ue.prototype=qe.prototype={constructor:Ue,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,c=r-e,l=a-t,u=o-e,h=l*l+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(u*s-c*l)>1e-6&&i){var d=n-a,p=r-o,f=s*s+c*c,g=d*d+p*p,m=Math.sqrt(f),v=Math.sqrt(h),b=i*Math.tan((Be-Math.acos((f+h-g)/(2*m*v)))/2),y=b/v,_=b/m;Math.abs(y-1)>1e-6&&(this._+="L"+(t+y*l)+","+(e+y*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>l*p)+","+(this._x1=t+_*s)+","+(this._y1=e+_*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=t+o,l=e+s,u=1^a,h=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%Fe+Fe),h>$e?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Be)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var He=qe;function Ge(){}function ze(t,e){var n=new Ge;if(t instanceof Ge)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Ge.prototype=ze.prototype={constructor:Ge,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ve=ze;function We(){}var Ye=Ve.prototype;function Xe(t,e){var n=new We;if(t instanceof We)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}We.prototype=Xe.prototype={constructor:We,has:Ye.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ye.remove,clear:Ye.clear,values:Ye.keys,size:Ye.size,empty:Ye.empty,each:Ye.each};Array.prototype.slice;var Ze={},Je={};function Ke(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Qe(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function tn(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function en(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+tn(-e,6):e>9999?"+"+tn(e,6):tn(e,4))+"-"+tn(t.getUTCMonth()+1,2)+"-"+tn(t.getUTCDate(),2)+(a?"T"+tn(n,2)+":"+tn(r,2)+":"+tn(i,2)+"."+tn(a,3)+"Z":i?"T"+tn(n,2)+":"+tn(r,2)+":"+tn(i,2)+"Z":r||n?"T"+tn(n,2)+":"+tn(r,2)+"Z":"")}var nn=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,c=a<=0,l=!1;function u(){if(c)return Je;if(l)return l=!1,Ze;var e,r,i=o;if(34===t.charCodeAt(i)){for(;o++<a&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=a?c=!0:10===(r=t.charCodeAt(o++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(o)&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=t.charCodeAt(e=o++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(o)&&++o;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,a)}for(10===t.charCodeAt(a-1)&&--a,13===t.charCodeAt(a-1)&&--a;(r=u())!==Je;){for(var h=[];r!==Ze&&r!==Je;)h.push(r),r=u();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?en(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ke(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ke(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=Qe(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Qe(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}},rn=nn(","),an=rn.parse,on=(rn.parseRows,rn.format,rn.formatBody,rn.formatRows,rn.formatRow,rn.formatValue,nn("\t")),sn=on.parse;on.parseRows,on.format,on.formatBody,on.formatRows,on.formatRow,on.formatValue;function cn(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var ln=function(t,e){return fetch(t,e).then(cn)};function un(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),ln(e,n).then((function(e){return t(e,r)}))}}un(an),un(sn);function hn(t){return function(e,n){return ln(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}hn("application/xml"),hn("text/html"),hn("image/svg+xml");function dn(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,c,l,u,h,d,p=t._root,f={data:r},g=t._x0,m=t._y0,v=t._x1,b=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((l=e>=(a=(g+v)/2))?g=a:v=a,(u=n>=(o=(m+b)/2))?m=o:b=o,i=p,!(p=p[h=u<<1|l]))return i[h]=f,t;if(s=+t._x.call(null,p.data),c=+t._y.call(null,p.data),e===s&&n===c)return f.next=p,i?i[h]=f:t._root=f,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(a=(g+v)/2))?g=a:v=a,(u=n>=(o=(m+b)/2))?m=o:b=o}while((h=u<<1|l)==(d=(c>=o)<<1|s>=a));return i[d]=p,i[h]=f,t}var pn=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function fn(t){return t[0]}function gn(t){return t[1]}function mn(t,e,n){var r=new vn(null==e?fn:e,null==n?gn:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function vn(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function bn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var yn=mn.prototype=vn.prototype;yn.copy=function(){var t,e,n=new vn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=bn(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=bn(e));return n},yn.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return dn(this.cover(e,n),e,n,t)},yn.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),c=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<c&&(c=r),r>u&&(u=r),i<l&&(l=i),i>h&&(h=i));if(c>u||l>h)return this;for(this.cover(c,l).cover(u,h),n=0;n<a;++n)dn(this,o[n],s[n],t[n]);return this},yn.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,c=i-n,l=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=l,l=o,c*=2,s){case 0:i=n+c,a=r+c;break;case 1:n=i-c,a=r+c;break;case 2:i=n+c,r=a-c;break;case 3:n=i-c,r=a-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},yn.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},yn.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},yn.find=function(t,e,n){var r,i,a,o,s,c,l,u=this._x0,h=this._y0,d=this._x1,p=this._y1,f=[],g=this._root;for(g&&f.push(new pn(g,u,h,d,p)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,p=e+n,n*=n);c=f.pop();)if(!(!(g=c.node)||(i=c.x0)>d||(a=c.y0)>p||(o=c.x1)<u||(s=c.y1)<h))if(g.length){var m=(i+o)/2,v=(a+s)/2;f.push(new pn(g[3],m,v,o,s),new pn(g[2],i,v,m,s),new pn(g[1],m,a,o,v),new pn(g[0],i,a,m,v)),(l=(e>=v)<<1|t>=m)&&(c=f[f.length-1],f[f.length-1]=f[f.length-1-l],f[f.length-1-l]=c)}else{var b=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),_=b*b+y*y;if(_<n){var w=Math.sqrt(n=_);u=t-w,h=e-w,d=t+w,p=e+w,r=g.data}}return r},yn.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,c,l,u,h,d,p=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((l=a>=(s=(f+m)/2))?f=s:m=s,(u=o>=(c=(g+v)/2))?g=c:v=c,e=p,!(p=p[h=u<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=i,this)},yn.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},yn.root=function(){return this._root},yn.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},yn.visit=function(t){var e,n,r,i,a,o,s=[],c=this._root;for(c&&s.push(new pn(c,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&c.length){var l=(r+a)/2,u=(i+o)/2;(n=c[3])&&s.push(new pn(n,l,u,a,o)),(n=c[2])&&s.push(new pn(n,r,u,l,o)),(n=c[1])&&s.push(new pn(n,l,i,a,u)),(n=c[0])&&s.push(new pn(n,r,i,l,u))}return this},yn.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new pn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,c=e.x1,l=e.y1,u=(o+c)/2,h=(s+l)/2;(a=i[0])&&n.push(new pn(a,o,s,u,h)),(a=i[1])&&n.push(new pn(a,u,s,c,h)),(a=i[2])&&n.push(new pn(a,o,h,u,l)),(a=i[3])&&n.push(new pn(a,u,h,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},yn.x=function(t){return arguments.length?(this._x=t,this):this._x},yn.y=function(t){return arguments.length?(this._y=t,this):this._y};Math.PI,Math.sqrt(5);var _n=n(221),wn=function(){return Math.random()},xn=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(wn),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(wn)),Cn=(function t(e){function n(){var t=xn.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(wn),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(wn));(function t(e){function n(t){var n=Cn.source(e)(t);return function(){return n()/t}}return n.source=t,n})(wn),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(wn);function An(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var On=Array.prototype,Sn=On.map,Mn=On.slice,En={name:"implicit"};function kn(){var t=Ve(),e=[],n=[],r=En;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==En)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Ve();for(var r,a,o=-1,s=n.length;++o<s;)t.has(a=(r=n[o])+"")||t.set(a,e.push(r));return i},i.range=function(t){return arguments.length?(n=Mn.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return kn(e,n).unknown(r)},An.apply(i,arguments),i}function Tn(){var t,e,n=kn().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,c=0,u=.5;function h(){var n=r().length,h=a[1]<a[0],d=a[h-0],p=a[1-h];t=(p-d)/Math.max(1,n-s+2*c),o&&(t=Math.floor(t)),d+=(p-d-t*(n-s))*u,e=t*(1-s),o&&(d=Math.round(d),e=Math.round(e));var f=l(n).map((function(e){return d+t*e}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],h()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,h()):o},n.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),h()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),h()):s},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Tn(r(),a).round(o).paddingInner(s).paddingOuter(c).align(u)},An.apply(h(),arguments)}function Dn(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Dn(e())},t}function In(){return Dn(Tn.apply(null,arguments).paddingInner(1))}var Nn=n(420),jn=function(t){return+t},Pn=[0,1];function Ln(t){return t}function Rn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Bn(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Fn(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Rn(i,r),a=n(o,a)):(r=Rn(r,i),a=n(a,o)),function(t){return a(r(t))}}function $n(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Rn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=s(t,e,1,r)-1;return a[n](i[n](e))}}function Un(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qn(){var t,e,n,r,i,a,o=Pn,s=Pn,c=q.a,l=Ln;function u(){return r=Math.min(o.length,s.length)>2?$n:Fn,i=a=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,c)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=r(s,o.map(t),yt.a)))(n)))},h.domain=function(t){return arguments.length?(o=Sn.call(t,jn),l===Ln||(l=Bn(o)),u()):o.slice()},h.range=function(t){return arguments.length?(s=Mn.call(t),u()):s.slice()},h.rangeRound=function(t){return s=Mn.call(t),c=Nn.a,u()},h.clamp=function(t){return arguments.length?(l=t?Bn(o):Ln,h):l!==Ln},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function Hn(t,e){return qn()(t,e)}var Gn=n(238),zn=n(291),Vn=n(237),Wn=n(292),Yn=n(293);function Xn(t){var e=t.domain;return t.ticks=function(t){var n=e();return p(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,a=g(t,e,n);switch((r=Object(Gn.a)(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Object(zn.a)(a,o))||(r.precision=i),Object(Vn.b)(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(Wn.a)(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(Yn.a)(a))||(r.precision=i-2*("%"===r.type))}return Object(Vn.a)(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],c=i[o];return c<s&&(r=s,s=c,c=r,r=a,a=o,o=r),(r=f(s,c,n))>0?r=f(s=Math.floor(s/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=f(s=Math.ceil(s*r)/r,c=Math.floor(c*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(c/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(c*r)/r,e(i)),t},t}function Zn(){var t=Hn(Ln,Ln);return t.copy=function(){return Un(t,Zn())},An.apply(t,arguments),Xn(t)}function Jn(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Kn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Qn(t){return t<0?-t*t:t*t}function tr(t){var e=t(Ln,Ln),n=1;function r(){return 1===n?t(Ln,Ln):.5===n?t(Kn,Qn):t(Jn(n),Jn(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Xn(e)}function er(){var t=tr(qn());return t.copy=function(){return Un(t,er()).exponent(t.exponent())},An.apply(t,arguments),t}var nr=new Date,rr=new Date;function ir(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return ir((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return nr.setTime(+e),rr.setTime(+r),t(nr),t(rr),Math.floor(n(nr,rr))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ar=ir((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));ar.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ir((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var or=ar,sr=(ar.range,ir((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));sr.range;function cr(t){return ir((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var lr=cr(0),ur=cr(1),hr=cr(2),dr=cr(3),pr=cr(4),fr=cr(5),gr=cr(6),mr=(lr.range,ur.range,hr.range,dr.range,pr.range,fr.range,gr.range,ir((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),vr=mr,br=(mr.range,ir((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),yr=(br.range,ir((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),_r=(yr.range,ir((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),wr=(_r.range,ir((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));wr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ir((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):wr:null};wr.range;function xr(t){return ir((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var Cr=xr(0),Ar=xr(1),Or=xr(2),Sr=xr(3),Mr=xr(4),Er=xr(5),kr=xr(6),Tr=(Cr.range,Ar.range,Or.range,Sr.range,Mr.range,Er.range,kr.range,ir((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Dr=Tr,Ir=(Tr.range,ir((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ir.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ir((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Nr=Ir;Ir.range;function jr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Pr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Lr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Rr,Br={"-":"",_:" ",0:"0"},Fr=/^\s*\d+/,$r=/^%/,Ur=/[\\^$*+?|[\]().{}]/g;function qr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Hr(t){return t.replace(Ur,"\\$&")}function Gr(t){return new RegExp("^(?:"+t.map(Hr).join("|")+")","i")}function zr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Vr(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Wr(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Yr(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Xr(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Zr(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Jr(t,e,n){var r=Fr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Kr(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ti(t,e,n){var r=Fr.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ei(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ni(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ri(t,e,n){var r=Fr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ii(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ai(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function oi(t,e,n){var r=Fr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function si(t,e,n){var r=Fr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ci(t,e,n){var r=Fr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function li(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ui(t,e,n){var r=Fr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hi(t,e,n){var r=Fr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function di(t,e){return qr(t.getDate(),e,2)}function pi(t,e){return qr(t.getHours(),e,2)}function fi(t,e){return qr(t.getHours()%12||12,e,2)}function gi(t,e){return qr(1+vr.count(or(t),t),e,3)}function mi(t,e){return qr(t.getMilliseconds(),e,3)}function vi(t,e){return mi(t,e)+"000"}function bi(t,e){return qr(t.getMonth()+1,e,2)}function yi(t,e){return qr(t.getMinutes(),e,2)}function _i(t,e){return qr(t.getSeconds(),e,2)}function wi(t){var e=t.getDay();return 0===e?7:e}function xi(t,e){return qr(lr.count(or(t)-1,t),e,2)}function Ci(t,e){var n=t.getDay();return t=n>=4||0===n?pr(t):pr.ceil(t),qr(pr.count(or(t),t)+(4===or(t).getDay()),e,2)}function Ai(t){return t.getDay()}function Oi(t,e){return qr(ur.count(or(t)-1,t),e,2)}function Si(t,e){return qr(t.getFullYear()%100,e,2)}function Mi(t,e){return qr(t.getFullYear()%1e4,e,4)}function Ei(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qr(e/60|0,"0",2)+qr(e%60,"0",2)}function ki(t,e){return qr(t.getUTCDate(),e,2)}function Ti(t,e){return qr(t.getUTCHours(),e,2)}function Di(t,e){return qr(t.getUTCHours()%12||12,e,2)}function Ii(t,e){return qr(1+Dr.count(Nr(t),t),e,3)}function Ni(t,e){return qr(t.getUTCMilliseconds(),e,3)}function ji(t,e){return Ni(t,e)+"000"}function Pi(t,e){return qr(t.getUTCMonth()+1,e,2)}function Li(t,e){return qr(t.getUTCMinutes(),e,2)}function Ri(t,e){return qr(t.getUTCSeconds(),e,2)}function Bi(t){var e=t.getUTCDay();return 0===e?7:e}function Fi(t,e){return qr(Cr.count(Nr(t)-1,t),e,2)}function $i(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Mr(t):Mr.ceil(t),qr(Mr.count(Nr(t),t)+(4===Nr(t).getUTCDay()),e,2)}function Ui(t){return t.getUTCDay()}function qi(t,e){return qr(Ar.count(Nr(t)-1,t),e,2)}function Hi(t,e){return qr(t.getUTCFullYear()%100,e,2)}function Gi(t,e){return qr(t.getUTCFullYear()%1e4,e,4)}function zi(){return"+0000"}function Vi(){return"%"}function Wi(t){return+t}function Yi(t){return Math.floor(+t/1e3)}Rr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,l=Gr(i),u=zr(i),h=Gr(a),d=zr(a),p=Gr(o),f=zr(o),g=Gr(s),m=zr(s),v=Gr(c),b=zr(c),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:di,e:di,f:vi,H:pi,I:fi,j:gi,L:mi,m:bi,M:yi,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Wi,s:Yi,S:_i,u:wi,U:xi,V:Ci,w:Ai,W:Oi,x:null,X:null,y:Si,Y:Mi,Z:Ei,"%":Vi},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:ki,e:ki,f:ji,H:Ti,I:Di,j:Ii,L:Ni,m:Pi,M:Li,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Wi,s:Yi,S:Ri,u:Bi,U:Fi,V:$i,w:Ui,W:qi,x:null,X:null,y:Hi,Y:Gi,Z:zi,"%":Vi},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:ni,e:ni,f:ci,H:ii,I:ii,j:ri,L:si,m:ei,M:ai,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:ti,Q:ui,s:hi,S:oi,u:Wr,U:Yr,V:Xr,w:Vr,W:Zr,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:Kr,Y:Jr,Z:Qr,"%":li};function x(t,e){return function(n){var r,i,a,o=[],s=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(o.push(t.slice(c,s)),null!=(i=Br[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),c=s+1);return o.push(t.slice(c,s)),o.join("")}}function C(t,e){return function(n){var r,i,a=Lr(1900,void 0,1);if(A(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Pr(Lr(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ar.ceil(r):Ar(r),r=Dr.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=jr(Lr(a.y,0,1))).getDay(),r=i>4||0===i?ur.ceil(r):ur(r),r=vr.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Pr(Lr(a.y,0,1)).getUTCDay():jr(Lr(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Pr(a)):jr(a)}}function A(t,e,n,r){for(var i,a,o=0,s=e.length,c=n.length;o<s;){if(r>=c)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in Br?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(e,y),_.x=x(n,_),_.X=x(r,_),_.c=x(e,_),{format:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Rr.format,Rr.parse,Rr.utcFormat,Rr.utcParse;var Xi=ir((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Zi=(Xi.range,ir((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),Ji=(Zi.range,ir((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));Ji.range;var Ki=n(189),Qi=function(t){return function(){return t}};function ta(t){this._context=t}ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var ea=function(t){return new ta(t)};function na(t){return t[0]}function ra(t){return t[1]}var ia=function(){var t=na,e=ra,n=Qi(!0),r=null,i=ea,a=null;function o(o){var s,c,l,u=o.length,h=!1;for(null==r&&(a=i(l=He())),s=0;s<=u;++s)!(s<u&&n(c=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(c,s,o),+e(c,s,o));if(l)return a=null,l+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:Qi(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Qi(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:Qi(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o};function aa(){this._=null}function oa(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function sa(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ca(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function la(t){for(;t.L;)t=t.L;return t}aa.prototype={constructor:aa,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=la(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(sa(this,n),n=(t=n).U),n.C=!1,r.C=!0,ca(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ca(this,n),n=(t=n).U),n.C=!1,r.C=!0,sa(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?la(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,sa(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ca(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,sa(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ca(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,sa(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ca(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ua=aa;function ha(t,e,n,r){var i=[null,null],a=Pa.push(i)-1;return i.left=t,i.right=e,n&&pa(i,t,e,n),r&&pa(i,e,t,r),Na[t.index].halfedges.push(a),Na[e.index].halfedges.push(a),i}function da(t,e,n){var r=[e,n];return r.left=t,r}function pa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function fa(t,e,n,r,i){var a,o=t[0],s=t[1],c=o[0],l=o[1],u=0,h=1,d=s[0]-c,p=s[1]-l;if(a=e-c,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>u&&(u=a)}if(a=r-c,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<h&&(h=a)}if(a=n-l,p||!(a>0)){if(a/=p,p<0){if(a<u)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>u&&(u=a)}if(a=i-l,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>u&&(u=a)}else if(p>0){if(a<u)return;a<h&&(h=a)}return!(u>0||h<1)||(u>0&&(t[0]=[c+u*d,l+u*p]),h<1&&(t[1]=[c+h*d,l+h*p]),!0)}}}}}function ga(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,c=t[0],l=t.left,u=t.right,h=l[0],d=l[1],p=u[0],f=u[1],g=(h+p)/2,m=(d+f)/2;if(f===d){if(g<e||g>=r)return;if(h>p){if(c){if(c[1]>=i)return}else c=[g,n];a=[g,i]}else{if(c){if(c[1]<n)return}else c=[g,i];a=[g,n]}}else if(s=m-(o=(h-p)/(f-d))*g,o<-1||o>1)if(h>p){if(c){if(c[1]>=i)return}else c=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(c){if(c[1]<n)return}else c=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<f){if(c){if(c[0]>=r)return}else c=[e,o*e+s];a=[r,o*r+s]}else{if(c){if(c[0]<e)return}else c=[r,o*r+s];a=[e,o*e+s]}return t[0]=c,t[1]=a,!0}function ma(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function va(t,e){return e[+(e.left!==t.site)]}function ba(t,e){return e[+(e.left===t.site)]}var ya,_a=[];function wa(){oa(this),this.x=this.y=this.arc=this.site=this.cy=null}function xa(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],c=r[0]-o,l=r[1]-s,u=a[0]-o,h=a[1]-s,d=2*(c*h-l*u);if(!(d>=-Ra)){var p=c*c+l*l,f=u*u+h*h,g=(h*p-l*f)/d,m=(c*f-u*p)/d,v=_a.pop()||new wa;v.arc=t,v.site=i,v.x=g+o,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var b=null,y=ja._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}ja.insert(b,v),b||(ya=v)}}}}function Ca(t){var e=t.circle;e&&(e.P||(ya=e.N),ja.remove(e),_a.push(e),oa(e),t.circle=null)}var Aa=[];function Oa(){oa(this),this.edge=this.site=this.circle=null}function Sa(t){var e=Aa.pop()||new Oa;return e.site=t,e}function Ma(t){Ca(t),Ia.remove(t),Aa.push(t),oa(t)}function Ea(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];Ma(t);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<La&&Math.abs(r-c.circle.cy)<La;)a=c.P,s.unshift(c),Ma(c),c=a;s.unshift(c),Ca(c);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<La&&Math.abs(r-l.circle.cy)<La;)o=l.N,s.push(l),Ma(l),l=o;s.push(l),Ca(l);var u,h=s.length;for(u=1;u<h;++u)l=s[u],c=s[u-1],pa(l.edge,c.site,l.site,i);c=s[0],(l=s[h-1]).edge=ha(c.site,l.site,null,i),xa(c),xa(l)}function ka(t){for(var e,n,r,i,a=t[0],o=t[1],s=Ia._;s;)if((r=Ta(s,o)-a)>La)s=s.L;else{if(!((i=a-Da(s,o))>La)){r>-La?(e=s.P,n=s):i>-La?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Na[t.index]={site:t,halfedges:[]}}(t);var c=Sa(t);if(Ia.insert(e,c),e||n){if(e===n)return Ca(e),n=Sa(e.site),Ia.insert(c,n),c.edge=n.edge=ha(e.site,c.site),xa(e),void xa(n);if(n){Ca(e),Ca(n);var l=e.site,u=l[0],h=l[1],d=t[0]-u,p=t[1]-h,f=n.site,g=f[0]-u,m=f[1]-h,v=2*(d*m-p*g),b=d*d+p*p,y=g*g+m*m,_=[(m*b-p*y)/v+u,(d*y-g*b)/v+h];pa(n.edge,l,f,_),c.edge=ha(l,t,null,_),n.edge=ha(t,f,null,_),xa(e),xa(n)}else c.edge=ha(e.site,c.site)}}function Ta(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],c=n[1],l=c-e;if(!l)return s;var u=s-r,h=1/a-1/l,d=u/l;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*l)-c+l/2+i-a/2)))/h+r:(r+s)/2}function Da(t,e){var n=t.N;if(n)return Ta(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Ia,Na,ja,Pa,La=1e-6,Ra=1e-12;function Ba(t,e){return e[1]-t[1]||e[0]-t[0]}function Fa(t,e){var n,r,i,a=t.sort(Ba).pop();for(Pa=[],Na=new Array(t.length),Ia=new ua,ja=new ua;;)if(i=ya,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(ka(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Ea(i.arc)}if(function(){for(var t,e,n,r,i=0,a=Na.length;i<a;++i)if((t=Na[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=ma(t,Pa[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],c=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=Pa.length;a--;)ga(i=Pa[a],t,e,n,r)&&fa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>La||Math.abs(i[0][1]-i[1][1])>La)||delete Pa[a]}(o,s,c,l),function(t,e,n,r){var i,a,o,s,c,l,u,h,d,p,f,g,m=Na.length,v=!0;for(i=0;i<m;++i)if(a=Na[i]){for(o=a.site,s=(c=a.halfedges).length;s--;)Pa[c[s]]||c.splice(s,1);for(s=0,l=c.length;s<l;)f=(p=ba(a,Pa[c[s]]))[0],g=p[1],h=(u=va(a,Pa[c[++s%l]]))[0],d=u[1],(Math.abs(f-h)>La||Math.abs(g-d)>La)&&(c.splice(s,0,Pa.push(da(o,p,Math.abs(f-t)<La&&r-g>La?[t,Math.abs(h-t)<La?d:r]:Math.abs(g-r)<La&&n-f>La?[Math.abs(d-r)<La?h:n,r]:Math.abs(f-n)<La&&g-e>La?[n,Math.abs(h-n)<La?d:e]:Math.abs(g-e)<La&&f-t>La?[Math.abs(d-e)<La?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var b,y,_,w=1/0;for(i=0,v=null;i<m;++i)(a=Na[i])&&(_=(b=(o=a.site)[0]-t)*b+(y=o[1]-e)*y)<w&&(w=_,v=a);if(v){var x=[t,e],C=[t,r],A=[n,r],O=[n,e];v.halfedges.push(Pa.push(da(o=v.site,x,C))-1,Pa.push(da(o,C,A))-1,Pa.push(da(o,A,O))-1,Pa.push(da(o,O,x))-1)}}for(i=0;i<m;++i)(a=Na[i])&&(a.halfedges.length||delete Na[i])}(o,s,c,l)}this.edges=Pa,this.cells=Na,Ia=ja=Pa=Na=null}Fa.prototype={constructor:Fa,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return va(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,c,l,u=n.site,h=-1,d=e[i[a-1]],p=d.left===u?d.right:d.left;++h<a;)o=p,p=(d=e[i[h]]).left===u?d.right:d.left,o&&p&&r<o.index&&r<p.index&&(c=o,l=p,((s=u)[0]-l[0])*(c[1]-s[1])-(s[0]-c[0])*(l[1]-s[1])<0)&&t.push([u.data,o.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var c=t-i.site[0],l=e-i.site[1],u=c*c+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var c=t-s[0],l=e-s[1],h=c*c+l*l;h<u&&(u=h,o=s.index)}}))}while(null!==o);return a._found=r,null==n||u<=n*n?i.site:null}};var $a=Math.SQRT2;function Ua(t){return((t=Math.exp(t))+1/t)/2}var qa=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],c=e[1],l=e[2],u=s-i,h=c-a,d=u*u+h*h;if(d<1e-12)r=Math.log(l/o)/$a,n=function(t){return[i+t*u,a+t*h,o*Math.exp($a*t*r)]};else{var p=Math.sqrt(d),f=(l*l-o*o+4*d)/(2*o*2*p),g=(l*l-o*o-4*d)/(2*l*2*p),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/$a,n=function(t){var e,n=t*r,s=Ua(m),c=o/(2*p)*(s*(e=$a*n+m,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+c*u,a+c*h,o*s/Ua($a*n+m)]}}return n.duration=1e3*r,n},Ha=function(t){return function(){return t}};function Ga(t,e,n){this.target=t,this.type=e,this.transform=n}function za(t,e,n){this.k=t,this.x=e,this.y=n}za.prototype={constructor:za,scale:function(t){return 1===t?this:new za(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new za(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Va=new za(1,0,0);function Wa(){L.c.stopImmediatePropagation()}za.prototype;var Ya=function(){L.c.preventDefault(),L.c.stopImmediatePropagation()};function Xa(){return!L.c.ctrlKey&&!L.c.button}function Za(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ja(){return this.__zoom||Va}function Ka(){return-L.c.deltaY*(1===L.c.deltaMode?.05:L.c.deltaMode?1:.002)}function Qa(){return navigator.maxTouchPoints||"ontouchstart"in this}function to(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}var eo=function(){var t,e,n=Xa,r=Za,i=to,a=Ka,o=Qa,s=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],l=250,u=qa,h=j("start","zoom","end"),d=0;function p(t){t.property("__zoom",Ja).on("wheel.zoom",_).on("mousedown.zoom",w).on("dblclick.zoom",x).filter(o).on("touchstart.zoom",C).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new za(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new za(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,e,n){t.on("start.zoom",(function(){b(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,a=b(t,i),o=r.apply(t,i),s=null==n?m(o):"function"==typeof n?n.apply(t,i):n,c=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=t.__zoom,h="function"==typeof e?e.apply(t,i):e,d=u(l.invert(s).concat(c/l.k),h.invert(s).concat(c/h.k));return function(t){if(1===t)t=h;else{var e=d(t),n=c/e[2];t=new za(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function b(t,e,n){return!n&&t.__zooming||new y(t,e)}function y(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function _(){if(n.apply(this,arguments)){var t=b(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,a.apply(this,arguments)))),o=Object(G.a)(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[o,e.invert(o)],bt(this),t.start()}Ya(),t.wheel=setTimeout(l,150),t.zoom("mouse",i(g(f(e,r),t.mouse[0],t.mouse[1]),t.extent,c))}function l(){t.wheel=null,t.end()}}function w(){if(!e&&n.apply(this,arguments)){var t=b(this,arguments,!0),r=Object(P.a)(L.c.view).on("mousemove.zoom",l,!0).on("mouseup.zoom",u,!0),a=Object(G.a)(this),o=L.c.clientX,s=L.c.clientY;B(L.c.view),Wa(),t.mouse=[a,this.__zoom.invert(a)],bt(this),t.start()}function l(){if(Ya(),!t.moved){var e=L.c.clientX-o,n=L.c.clientY-s;t.moved=e*e+n*n>d}t.zoom("mouse",i(g(t.that.__zoom,t.mouse[0]=Object(G.a)(t.that),t.mouse[1]),t.extent,c))}function u(){r.on("mousemove.zoom mouseup.zoom",null),F(L.c.view,t.moved),Ya(),t.end()}}function x(){if(n.apply(this,arguments)){var t=this.__zoom,e=Object(G.a)(this),a=t.invert(e),o=t.k*(L.c.shiftKey?.5:2),s=i(g(f(t,o),e,a),r.apply(this,arguments),c);Ya(),l>0?Object(P.a)(this).transition().duration(l).call(v,s,e):Object(P.a)(this).call(p.transform,s)}}function C(){if(n.apply(this,arguments)){var e,r,i,a,o=L.c.touches,s=o.length,c=b(this,arguments,L.c.changedTouches.length===s);for(Wa(),r=0;r<s;++r)i=o[r],a=[a=Object(H.a)(this,o,i.identifier),this.__zoom.invert(a),i.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,e=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(c.taps<2&&(t=setTimeout((function(){t=null}),500)),bt(this),c.start())}}function A(){if(this.__zooming){var e,n,r,a,o=b(this,arguments),s=L.c.changedTouches,l=s.length;for(Ya(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<l;++e)n=s[e],r=Object(H.a)(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var u=o.touch0[0],h=o.touch0[1],d=o.touch1[0],p=o.touch1[1],m=(m=d[0]-u[0])*m+(m=d[1]-u[1])*m,v=(v=p[0]-h[0])*v+(v=p[1]-h[1])*v;n=f(n,Math.sqrt(m/v)),r=[(u[0]+d[0])/2,(u[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",i(g(n,r,a),o.extent,c))}}function O(){if(this.__zooming){var t,n,r=b(this,arguments),i=L.c.changedTouches,a=i.length;for(Wa(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<a;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=Object(P.a)(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return p.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",Ja),t!==r?v(t,e,n):r.interrupt().each((function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},p.scaleBy=function(t,e,n){p.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},p.scaleTo=function(t,e,n){p.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,o=null==n?m(t):"function"==typeof n?n.apply(this,arguments):n,s=a.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return i(g(f(a,l),o,s),t,c)}),n)},p.translateBy=function(t,e,n){p.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}))},p.translateTo=function(t,e,n,a){p.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,s=null==a?m(t):"function"==typeof a?a.apply(this,arguments):a;return i(Va.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),a)},y.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Object(L.a)(new Ga(p,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},p.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Ha(+t),p):a},p.filter=function(t){return arguments.length?(n="function"==typeof t?t:Ha(!!t),p):n},p.touchable=function(t){return arguments.length?(o="function"==typeof t?t:Ha(!!t),p):o},p.extent=function(t){return arguments.length?(r="function"==typeof t?t:Ha([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):r},p.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],p):[s[0],s[1]]},p.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],p):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},p.constrain=function(t){return arguments.length?(i=t,p):i},p.duration=function(t){return arguments.length?(l=+t,p):l},p.interpolate=function(t){return arguments.length?(u=t,p):u},p.on=function(){var t=h.on.apply(h,arguments);return t===h?p:t},p.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,p):Math.sqrt(d)},p}},function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return o}));var r=n(382);var i=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"}];const a=t=>t.map(t=>{const e={};return t.begin&&(e.start=t.begin),{...t,...e}}),o=t=>t?`\n      <ul>${t.map(t=>{const e=i.find(e=>e.name===t.code);return e?`<li title='${e.description}' style="padding: .25rem 0">${e.shortDescription}:&nbsp;${t.source?(n=t.source,n.name.toLowerCase()==="PubMed".toLowerCase()?`${n.id}&nbsp;(<a href='${n.url}' style="color:#FFF" target='_blank'>${n.name}</a>&nbsp;<a href='${n.alternativeUrl}' style="color:#FFF" target='_blank'>EuropePMC</a>)`:`&nbsp;<a href='${n.url}' style="color:#FFF" target='_blank'>${n.id}</a>&nbsp;(${n.name})`):""}</li>`:"";var n}).join("")}</ul>\n    `:"",s=t=>`<ul>${t.map(t=>`<li style="padding: .25rem 0">${t.name} ${t.url?`<a href="${t.url}" style="color:#FFF" target="_blank">${t.id}</a>`:`${t.name} ${t.id}`}</li>`).join("")}</ul>`,c=t=>{const e=o(t.evidences);return`\n      ${t.description?`<h5>Description</h5><p>${t.description}</p>`:""}\n      ${t.matchScore?`<h5>Match score</h5><p>${t.matchScore}%</p>`:""}\n      ${t.ftId?`<h5>Feature ID</h5><p>${t.ftId}</p>`:""}\n      ${t.alternativeSequence?`<h5>Alternative sequence</h5><p>${t.alternativeSequence}</p>`:""}\n      ${e?"<h5>Evidence</h5>"+e:""}\n      ${t.xrefs?"<h5>Cross-references</h5>"+s(t.xrefs):""}\n        `},l=t=>{let e=[];const{features:n}=t;return n&&n.length>0&&(e=n.map(t=>({...t,tooltipContent:c(t),protvistaFeatureId:Object(r.v1)()})),e=a(e)),e};class u extends HTMLElement{constructor(){super(),this._adaptedData=[]}connectedCallback(){this.subscribers=this.getAttribute("subscribers"),this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}set data(t){this._emitEvent(t)}set subscribers(t){t&&(this._subscribers=t.split(","))}get subscribers(){return this._subscribers}parseEntry(t){this._adaptedData=l(t)}filterData(){Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter(t=>this._filters.includes(t.type)))}get adaptedData(){return this._adaptedData}_setSubscriberData(){this.subscribers.forEach(t=>{const e=document.querySelector(t);e?e.data=this._adaptedData:console.error(`Element with id '${t}' not found`)})}_emitEvent(t){this.parseEntry(t),this.filterData(),this.subscribers&&this._setSubscriberData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}_addLoaderListeners(){this.addEventListener("load",t=>{if(t.target!==this){t.stopPropagation();try{if(t.detail.payload.errorMessage)throw t.detail.payload.errorMessage;this._emitEvent(t.detail.payload)}catch(t){this.dispatchEvent(new CustomEvent("error",{detail:t,bubbles:!0,cancelable:!0}))}}})}}e.a=u},function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));var r=n(210),i=n(325),a=n(56),o=n(25),s=n(11),c=n(24);var l=function(t){return"string"==typeof t||!Object(s.a)(t)&&Object(c.a)(t)&&"[object String]"==Object(o.a)(t)},u=n(39),h=n(41),d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,g=/^0o[0-7]+$/i,m=parseInt;var v=function(t){if("number"==typeof t)return t;if(Object(h.a)(t))return NaN;if(Object(u.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(u.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=f.test(t);return n||g.test(t)?m(t.slice(2),n?2:8):p.test(t)?NaN:+t};var b=function(t){return t?(t=v(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var y=function(t){var e=b(t),n=e%1;return e==e?n?e-n:e:0},_=n(92);var w=function(t,e){return Object(_.a)(e,(function(e){return t[e]}))},x=n(40);var C=function(t){return null==t?[]:w(t,Object(x.a)(t))},A=Math.max;var O=function(t,e,n,r){t=Object(a.a)(t)?t:C(t),n=n&&!r?y(n):0;var o=t.length;return n<0&&(n=A(o+n,0)),l(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Object(i.a)(t,e,n)>-1},S=n(181),M=n(259),E=n(272),k=n(323);class T{getFeatureShape(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}static isContinuous(t){return"bridge"!==(t=t.toLowerCase())}_rectangle(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}_roundRectangle(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+"-6,6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+"-6,"+"-6v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+"-6Z"}_bridge(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}_getMiddleLine(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}_diamond(){const t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}_chevron(){const t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_catFace(){const t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_triangle(){const t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_wave(){const t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getPolygon(t){let e="M ";const n=this._ftWidth/2;for(let r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_hexagon(){return this._getPolygon(6)}_pentagon(){return this._getPolygon(5)}_circle(){const t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}_arrow(){const t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_doubleBar(){const t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}_getBrokenEnd(){const t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}_getBrokenStart(){const t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}_discontinuosStart(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuos(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}_discontinuosEnd(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}_helix(){const t=2.5;let e=2.5;const n=Math.round(this._ftWidth/5);let r="";for(let i=0;i<n;i++){r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+"2.5 "+e+", 0 C"+(e-t)+","+"2.5 "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5}return r}_strand(){let t=0;this._ftWidth>5&&(t=this._ftWidth-5);const e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+("M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z")}}class D{constructor({layoutHeight:t,padding:e=1,minHeight:n=17}){this._padding=e,this._minHeight=n,this._layoutHeight=t}init(t){this._features=t}getFeatureYPos(){return Math.min(this._layoutHeight,this._minHeight)+this._padding}getFeatureHeight(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}const I=(t,e)=>e.some(e=>{return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r});class N extends D{constructor(t){super(t),this.featuresMap=new Map,this._rowHeight=0,this._rows=[],this._minHeight=15}init(t){t.forEach(t=>{const e=this._rows.findIndex(e=>!I(t,e));e>=0?(this._rows[e].push(t),this.featuresMap.set(t,e)):(this._rows.push([t]),this.featuresMap.set(t,this._rows.length-1))}),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}getOffset(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}getFeatureYPos(t){const e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}getFeatureHeight(){return this._rowHeight-2*this._padding}}const j={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},P=t=>{if(j[t.toUpperCase()])return j[t.toUpperCase()].shape;const e=Object.values(j).find(e=>e.name.toUpperCase()===t.toUpperCase());return e?e.shape:"rectangle"},L=t=>{if(j[t.toUpperCase()])return j[t.toUpperCase()].color;const e=Object.values(j).find(e=>e.name.toUpperCase()===t.toUpperCase());return e||console.log(t),e?e.color:"black"};class R extends k.a{getLayout(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new N({layoutHeight:this._height}):new D({layoutHeight:this._height})}connectedCallback(){super.connectedCallback(),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new T,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",t=>{O(this.children,t.target)&&(this.data=t.detail.payload)})}static normalizeLocations(t){return t.map(t=>{const{locations:e,start:n,end:r}=t;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})})}processData(t){this._originalData=R.normalizeLocations(t)}set data(t){this.processData(t),this._applyFilters(),this._layoutObj=this.getLayout(),this._createTrack()}set filters(t){this._filters=t,this._applyFilters(),this._createTrack()}static get observedAttributes(){return k.a.observedAttributes.concat(["highlight","color","shape","filters"])}_getFeatureColor(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?L(t.type):t.feature&&t.feature.type?L(t.feature.type):"black"}_getFeatureFillColor(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}_getShape(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?P(t.type):t.feature&&t.feature.type?P(t.feature.type):"rectangle"}_createTrack(){this._layoutObj.init(this._data),Object(r.l)(this).selectAll("div").remove(),this.svg=Object(r.l)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}_createFeatures(){this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",t=>"g_"+t.accession).selectAll("g.location-group").data(t=>t.locations.map(e=>Object.assign({},e,{feature:t}))).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(t=>t.fragments.map(e=>Object.assign({},e,{feature:t.feature}))).enter().append("path").attr("class",t=>this._getShape(t)+" feature").attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t))).attr("transform",t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`).attr("fill",t=>this._getFeatureFillColor(t)).attr("stroke",t=>this._getFeatureColor(t)).style("fill-opacity",.9).call(this.bindEvents,this)}_applyFilters(){if(!this._filters||this._filters.length<=0)return void(this._data=this._originalData);const t=Object(S.a)(this._filters,"category"),e=Object.values(t).map(t=>{const e=t.map(t=>t.filterFn(this._originalData));return Object(M.a)(...e)}),n=Object(E.a)(...e);this._data=n}refresh(){this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce((t,e)=>t.concat(e.locations.reduce((t,n)=>t.concat(n.fragments.map(t=>Object.assign({},t,{feature:e}))),[])),[])),this.features.attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t),t.end?t.end-t.start+1:1,this._getShape(t))).attr("transform",t=>`translate(${this.getXFromSeqPosition(t.start)},${this._layoutObj.getFeatureYPos(t.feature)})`),this._updateHighlight())}_updateHighlight(){this.trackHighlighter.updateHighlight()}}e.b=R},function(t,e,n){"use strict";n.d(e,"c",(function(){return h.c})),n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return M}));var r=n(197),i=n(195);function a(t,e){const{element:{content:n},parts:r}=t,i=document.createTreeWalker(n,133,null,!1);let a=s(r),o=r[a],c=-1,l=0;const u=[];let h=null;for(;i.nextNode();){c++;const t=i.currentNode;for(t.previousSibling===h&&(h=null),e.has(t)&&(u.push(t),null===h&&(h=t)),null!==h&&l++;void 0!==o&&o.index===c;)o.index=null!==h?-1:o.index-l,a=s(r,a),o=r[a]}u.forEach(t=>t.parentNode.removeChild(t))}const o=t=>{let e=11===t.nodeType?0:1;const n=document.createTreeWalker(t,133,null,!1);for(;n.nextNode();)e++;return e},s=(t,e=-1)=>{for(let n=e+1;n<t.length;n++){const e=t[n];if(Object(i.d)(e))return n}return-1};var c=n(230),l=n(218),u=n(229),h=n(190);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const d=(t,e)=>`${t}--${e}`;let p=!0;void 0===window.ShadyCSS?p=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),p=!1);const f=t=>e=>{const n=d(e.type,t);let r=l.a.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},l.a.set(n,r));let a=r.stringsArray.get(e.strings);if(void 0!==a)return a;const o=e.strings.join(i.f);if(a=r.keyString.get(o),void 0===a){const n=e.getTemplateElement();p&&window.ShadyCSS.prepareTemplateDom(n,t),a=new i.a(e,n),r.keyString.set(o,a)}return r.stringsArray.set(e.strings,a),a},g=["html","svg"],m=new Set,v=(t,e,n)=>{m.add(t);const r=n?n.element:document.createElement("template"),i=e.querySelectorAll("style"),{length:c}=i;if(0===c)return void window.ShadyCSS.prepareTemplateStyles(r,t);const u=document.createElement("style");for(let t=0;t<c;t++){const e=i[t];e.parentNode.removeChild(e),u.textContent+=e.textContent}(t=>{g.forEach(e=>{const n=l.a.get(d(e,t));void 0!==n&&n.keyString.forEach(t=>{const{element:{content:e}}=t,n=new Set;Array.from(e.querySelectorAll("style")).forEach(t=>{n.add(t)}),a(t,n)})})})(t);const h=r.content;n?function(t,e,n=null){const{element:{content:r},parts:i}=t;if(null==n)return void r.appendChild(e);const a=document.createTreeWalker(r,133,null,!1);let c=s(i),l=0,u=-1;for(;a.nextNode();){for(u++,a.currentNode===n&&(l=o(e),n.parentNode.insertBefore(e,n));-1!==c&&i[c].index===u;){if(l>0){for(;-1!==c;)i[c].index+=l,c=s(i,c);return}c=s(i,c)}}}(n,u,h.firstChild):h.insertBefore(u,h.firstChild),window.ShadyCSS.prepareTemplateStyles(r,t);const p=h.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==p)e.insertBefore(p.cloneNode(!0),e.firstChild);else if(n){h.insertBefore(u,h.firstChild);const t=new Set;t.add(u),a(n,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const b={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},y=(t,e)=>e!==t&&(e==e||t==t),_={attribute:!0,type:String,converter:b,reflect:!1,hasChanged:y};class w extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,n)=>{const r=this._attributeNameForProperty(n,e);void 0!==r&&(this._attributeToPropertyMap.set(r,n),t.push(r))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=_){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const n="symbol"==typeof t?Symbol():"__"+t,r=this.getPropertyDescriptor(t,n,e);void 0!==r&&Object.defineProperty(this.prototype,t,r)}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(n){const r=this[t];this[e]=n,this._requestUpdate(t,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||_}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const n of e)this.createProperty(n,t[n])}}static _attributeNameForProperty(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,n=y){return n(t,e)}static _propertyValueFromAttribute(t,e){const n=e.type,r=e.converter||b,i="function"==typeof r?r:r.fromAttribute;return i?i(t,n):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const n=e.type,r=e.converter;return(r&&r.toAttribute||b.toAttribute)(t,n)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,n){e!==n&&this._attributeToProperty(t,n)}_propertyToAttribute(t,e,n=_){const r=this.constructor,i=r._attributeNameForProperty(t,n);if(void 0!==i){const t=r._propertyValueToAttribute(e,n);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(i):this.setAttribute(i,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const n=this.constructor,r=n._attributeToPropertyMap.get(t);if(void 0!==r){const t=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}_requestUpdate(t,e){let n=!0;if(void 0!==t){const r=this.constructor,i=r.getPropertyOptions(t);r._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==i.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}w.finalized=!0;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const x="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,C=Symbol();class A{constructor(t,e){if(e!==C)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(x?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const O=(t,...e)=>{const n=e.reduce((e,n,r)=>e+(t=>{if(t instanceof A)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(n)+t[r+1],t[0]);return new A(n,C)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const S={};class M extends w{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(void 0===t)this._styles=[];else if(Array.isArray(t)){const e=(t,n)=>t.reduceRight((t,n)=>Array.isArray(n)?e(n,t):(t.add(n),t),n),n=e(t,new Set),r=[];n.forEach(t=>r.unshift(t)),this._styles=r}else this._styles=[t]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?x?this.renderRoot.adoptedStyleSheets=t.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(t=>t.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==S&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)}))}render(){return S}}M.finalized=!0,M.render=(t,e,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const i=n.scopeName,a=c.a.has(e),o=p&&11===e.nodeType&&!!e.host,s=o&&!m.has(i),l=s?document.createDocumentFragment():e;if(Object(c.b)(t,l,Object.assign({templateFactory:f(i)},n)),s){const t=c.a.get(l);c.a.delete(l);const n=t.value instanceof u.a?t.value.template:void 0;v(i,l,n),Object(r.b)(e,e.firstChild),e.appendChild(l),c.a.set(e,t)}!a&&o&&window.ShadyCSS.styleElement(e.host)}},,,function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n(197),i=n(195);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const a=` ${i.f} `;class o{constructor(t,e,n,r){this.strings=t,this.values=e,this.type=n,this.processor=r}getHTML(){const t=this.strings.length-1;let e="",n=!1;for(let r=0;r<t;r++){const t=this.strings[r],o=t.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===t.indexOf("--\x3e",o+1);const s=i.e.exec(t);e+=null===s?t+(n?a:i.g):t.substr(0,s.index)+s[1]+s[2]+i.b+s[3]+i.f}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}class s extends o{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,n=e.firstChild;return e.removeChild(n),Object(r.c)(e,n.firstChild),t}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(195);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function i(t){let e=a.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},a.set(t.type,e));let n=e.stringsArray.get(t.strings);if(void 0!==n)return n;const i=t.strings.join(r.f);return n=e.keyString.get(i),void 0===n&&(n=new r.a(t,t.getTemplateElement()),e.keyString.set(i,n)),e.stringsArray.set(t.strings,n),n}const a=new Map},,function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return u}));var r={},i=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(r={mouseenter:"mouseover",mouseleave:"mouseout"}));function a(t,e,n){return t=o(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function o(t,e,n){return function(r){var a=i;i=r;try{t.call(this,this.__data__,e,n)}finally{i=a}}}function s(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function c(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function l(t,e,n){var i=r.hasOwnProperty(t.type)?a:o;return function(r,a,o){var s,c=this.__on,l=i(e,a,o);if(c)for(var u=0,h=c.length;u<h;++u)if((s=c[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},c?c.push(s):this.__on=[s]}}function u(t,e,n,r){var a=i;t.sourceEvent=i,i=t;try{return e.apply(n,r)}finally{i=a}}e.b=function(t,e,n){var r,i,a=s(t+""),o=a.length;if(!(arguments.length<2)){for(u=e?l:c,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],e,n));return this}var u=this.node().__on;if(u)for(var h,d=0,p=u.length;d<p;++d)for(r=0,h=u[d];r<o;++r)if((i=a[r]).type===h.type&&i.name===h.name)return h.value}},function(t,e,n){"use strict";var r=n(237);n.d(e,"a",(function(){return r.a}))},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r=new WeakMap,i=t=>(...e)=>{const n=t(...e);return r.set(n,!0),n},a=t=>"function"==typeof t&&r.has(t)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r={},i={}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(197),i=n(195);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class a{constructor(t,e,n){this.__parts=[],this.template=t,this.processor=e,this.options=n}update(t){let e=0;for(const n of this.__parts)void 0!==n&&n.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=r.a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],n=this.template.parts,a=document.createTreeWalker(t,133,null,!1);let o,s=0,c=0,l=a.nextNode();for(;s<n.length;)if(o=n[s],Object(i.d)(o)){for(;c<o.index;)c++,"TEMPLATE"===l.nodeName&&(e.push(l),a.currentNode=l.content),null===(l=a.nextNode())&&(a.currentNode=e.pop(),l=a.nextNode());if("node"===o.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));s++}else this.__parts.push(void 0),s++;return r.a&&(document.adoptNode(t),customElements.upgrade(t)),t}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n(197),i=n(191),a=n(218);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const o=new WeakMap,s=(t,e,n)=>{let s=o.get(e);void 0===s&&(Object(r.b)(e,e.firstChild),o.set(e,s=new i.d(Object.assign({templateFactory:a.b},n))),s.appendInto(e)),s.setValue(t),s.commit()}},function(t,e,n){"use strict";var r=n(232);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),r.a.hasOwnProperty(e)?{space:r.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var r="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";function r(){}e.a=function(t){return null==t?r:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e,n){"use strict";var r=n(231),i=n(232);function a(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===i.b&&e.documentElement.namespaceURI===i.b?e.createElement(t):e.createElementNS(n,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}e.a=function(t){var e=Object(r.a)(t);return(e.local?o:a)(e)}},function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r,i,a,o,s=n(270);o={decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"},r=Object(s.a)(o),i=r.format,a=r.formatPrefix},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(t){if(!(e=r.exec(t)))throw new Error("invalid format: "+t);var e;return new a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function a(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}i.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(t,e,n){"use strict";var r=n(258);e.a=function(t){return(t=Object(r.a)(Math.abs(t)))?t[1]:NaN}},function(t,e,n){"use strict";class r extends HTMLElement{constructor(){super(),this.protvistaElements=new Set,this.attributeValues=new Map,this.propertyValues=new Map}static get observedAttributes(){return["attributes"]}attributeChangedCallback(t,e,n){if(e!==n&&"attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}register(t){this.protvistaElements.add(t)}unregister(t){this.protvistaElements.delete(t)}_polyfillElementClosest(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=t=>{let e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}applyAttributes(){this.protvistaElements.forEach(t=>{this.attributeValues.forEach((e,n)=>{!1===e?t.removeAttribute(n):t.setAttribute(n,"boolean"==typeof e?"":e)})})}applyProperties(t){if(t){const e=this.querySelector("#"+t);this.propertyValues.forEach((t,n)=>{e[n]=t})}else this.protvistaElements.forEach(t=>{this.propertyValues.forEach((e,n)=>{t[n]=e})})}_changeListener(t){switch(t.detail.handler){case"property":this.propertyValues.set(t.detail.type,t.detail.value),this.applyProperties(t.detail.for);break;default:-1!==this._attributes.indexOf(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach(e=>{-1!==this._attributes.indexOf(e)&&this.attributeValues.set(e,t.detail[e])}),this.applyAttributes()}}connectedCallback(){this.addEventListener("change",this._changeListener)}}e.a=r},,,function(t,e,n){"use strict";n.d(e,"c",(function(){return Y})),n.d(e,"a",(function(){return X}));var r=n(233),i=n(256),a=n(255),o=function(t){return new Array(t.length)};function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function c(t,e,n,r,i,a){for(var o,c=0,l=e.length,u=a.length;c<u;++c)(o=e[c])?(o.__data__=a[c],r[c]=o):n[c]=new s(t,a[c]);for(;c<l;++c)(o=e[c])&&(i[c]=o)}function l(t,e,n,r,i,a,o){var c,l,u,h={},d=e.length,p=a.length,f=new Array(d);for(c=0;c<d;++c)(l=e[c])&&(f[c]=u="$"+o.call(l,l.__data__,c,e),u in h?i[c]=l:h[u]=l);for(c=0;c<p;++c)(l=h[u="$"+o.call(t,a[c],c,a)])?(r[c]=l,l.__data__=a[c],h[u]=null):n[c]=new s(t,a[c]);for(c=0;c<d;++c)(l=e[c])&&h[f[c]]===l&&(i[c]=l)}function u(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var h=n(231);function d(t){return function(){this.removeAttribute(t)}}function p(t){return function(){this.removeAttributeNS(t.space,t.local)}}function f(t,e){return function(){this.setAttribute(t,e)}}function g(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function m(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function v(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var b=n(257);function y(t){return function(){delete this[t]}}function _(t,e){return function(){this[t]=e}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function x(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new A(t)}function A(t){this._node=t,this._names=x(t.getAttribute("class")||"")}function O(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function S(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function M(t){return function(){O(this,t)}}function E(t){return function(){S(this,t)}}function k(t,e){return function(){(e.apply(this,arguments)?O:S)(this,t)}}A.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function T(){this.textContent=""}function D(t){return function(){this.textContent=t}}function I(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function N(){this.innerHTML=""}function j(t){return function(){this.innerHTML=t}}function P(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function L(){this.nextSibling&&this.parentNode.appendChild(this)}function R(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var B=n(235);function F(){return null}function $(){var t=this.parentNode;t&&t.removeChild(this)}function U(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function q(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var H=n(220),G=n(234);function z(t,e,n){var r=Object(G.a)(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function V(t,e){return function(){return z(this,t,e)}}function W(t,e){return function(){return z(this,t,e.apply(this,arguments))}}var Y=[null];function X(t,e){this._groups=t,this._parents=e}function Z(){return new X([[document.documentElement]],Y)}X.prototype=Z.prototype={constructor:X,select:function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var o,s,c=e[a],l=c.length,u=i[a]=new Array(l),h=0;h<l;++h)(o=c[h])&&(s=t.call(o,o.__data__,h,c))&&("__data__"in o&&(s.__data__=o.__data__),u[h]=s);return new X(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var e=this._groups,n=e.length,r=[],a=[],o=0;o<n;++o)for(var s,c=e[o],l=c.length,u=0;u<l;++u)(s=c[u])&&(r.push(t.call(s,s.__data__,u,c)),a.push(s));return new X(r,a)},filter:function(t){"function"!=typeof t&&(t=Object(a.a)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],c=s.length,l=r[i]=[],u=0;u<c;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new X(r,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),d=-1,this.each((function(t){m[++d]=t})),m;var n,r=e?l:c,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),h=new Array(o),d=0;d<o;++d){var p=i[d],f=a[d],g=f.length,m=t.call(p,p&&p.__data__,d,i),v=m.length,b=u[d]=new Array(v),y=s[d]=new Array(v);r(p,f,b,y,h[d]=new Array(g),m,e);for(var _,w,x=0,C=0;x<v;++x)if(_=b[x]){for(x>=C&&(C=x+1);!(w=y[C])&&++C<v;);_._next=w||null}}return(s=new X(s,i))._enter=u,s._exit=h,s},enter:function(){return new X(this._enter||this._groups.map(o),this._parents)},exit:function(){return new X(this._exit||this._groups.map(o),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c,l=e[s],u=n[s],h=l.length,d=o[s]=new Array(h),p=0;p<h;++p)(c=l[p]||u[p])&&(d[p]=c);for(;s<r;++s)o[s]=e[s];return new X(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=u);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],c=s.length,l=i[a]=new Array(c),h=0;h<c;++h)(o=s[h])&&(l[h]=o);l.sort(e)}return new X(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Object(h.a)(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?p:d:"function"==typeof e?n.local?v:m:n.local?g:f)(n,e))},style:b.a,property:function(t,e){return arguments.length>1?this.each((null==e?y:"function"==typeof e?w:_)(t,e)):this.node()[t]},classed:function(t,e){var n=x(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?k:e?M:E)(n,e))},text:function(t){return arguments.length?this.each(null==t?T:("function"==typeof t?I:D)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?N:("function"==typeof t?P:j)(t)):this.node().innerHTML},raise:function(){return this.each(L)},lower:function(){return this.each(R)},append:function(t){var e="function"==typeof t?t:Object(B.a)(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Object(B.a)(t),i=null==e?F:"function"==typeof e?e:Object(r.a)(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each($)},clone:function(t){return this.select(t?q:U)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:H.b,dispatch:function(t,e){return this.each(("function"==typeof e?W:V)(t,e))}};e.b=Z},function(t,e,n){"use strict";var r=n(213),i=n(379),a=n(197),o=n(191),s=n(190);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const c=new WeakMap,l=Object(s.b)(t=>e=>{if(!(e instanceof s.a))throw new Error("unsafeSVG can only be used in text bindings");const n=c.get(e);if(void 0!==n&&Object(o.f)(t)&&t===n.value&&e.value===n.fragment)return;const r=document.createElement("template");r.innerHTML=`<svg>${t}</svg>`;const i=r.content,l=i.firstChild;i.removeChild(l),Object(a.c)(i,l.firstChild);const u=document.importNode(i,!0);e.setValue(u),c.set(e,{value:t,fragment:u})});var u=r.b`
  :host {
    display: block;
  }
  .protvista-datatable-container {
    overflow-y: auto;
    overflow-x: hidden;
  }

  .protvista-datatable__child-toggle svg {
    width: 1.1rem;
    height: 1.1rem;
  }

  table {
    width: 100%;
    padding: 0;
    margin: 0;
    border-spacing: 0;
  }

  th {
    position: sticky;
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -ms-sticky;
    position: -o-sticky;
    text-align: left;
    background-color: var(--protvista-datable__header-background, #fff);
    color: var(--protvista-datable__header-text, #393b42);
    text-overflow: ellipsis;
    top: 0;
  }

  td,
  th {
    padding: 1rem;
    border-bottom: 1px solid #c2c4c4;
  }

  tr:hover:not(.active):not(.child-row) {
    background-color: var(--protvista-datatable__hover, #f1f1f1);
  }

  td {
    cursor: pointer;
  }

  td:nth-child(1) {
    border-left: 0.5rem solid transparent;
  }

  .overlapped td:nth-child(1) {
    border-left: 0.5rem solid
      var(--protvista-datatable__overlapped, rgba(255, 0, 0, 0.8));
  }

  .active {
    background-color: var(
      --protvista-datatable__active,
      rgba(255, 235, 59, 0.3)
    );
  }
  .hidden {
    opacity: 0.2;
  }
  .evidence-tag {
    cursor: pointer;
    font-size: 80%;
    white-space: nowrap;
    margin-left: 0.5rem;
    border-radius: 0.5rem;
    background-color: #f1f1f1;
    padding: 0.25rem 0.5rem;
    color: #3a343a;
  }
  .evidence-tag__label {
    padding-left: 0.25rem;
    text-transform: capitalize;
  }
  .svg-colour-reviewed {
    fill: #c39b00;
  }
  .svg-colour-unreviewed {
    fill: #c0c0c0;
  }

  .protvista-datatable__child-item {
    display: flex;
  }

  .protvista-datatable__child-item__title {
    font-weight: 700;
    flex-basis: 10vw;
    flex-grow: 0;
    margin-right: 1rem;
  }

  .protvista-datatable__child-item__content {
  }
`;n(0);class h extends r.a{constructor(){super(),this.height=25,this.visibleChildren=[],this.noScrollToRow=!1,this.noDeselect=!1,this.eventHandler=this.eventHandler.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("load",t=>{Array.from(this.children).includes(t.target)&&(this.data=h.processData(t.detail.payload.features))}),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this.noDeselect||document.addEventListener("click",this.eventHandler),this.classList.add("feature")}disconnectedCallback(){super.disconnectedCallback(),this.manager&&this.manager.unregister(this),document.removeEventListener("click",this.eventHandler)}set data(t){const e=this._data;this._data=h.processData(t),this.requestUpdate("data",e)}get data(){return this._data}eventHandler(t){t.target.closest("protvista-datatable")||t.target.closest(".feature")||(this.selectedid=null)}static get properties(){return{data:{type:Object},highlight:{converter:t=>t&&"null"!==t?t.split(":").map(t=>Number(t)):null},height:{type:Number},columns:{type:Object},displayStart:{type:Number},displayEnd:{type:Number},visibleChildren:{type:Array},selectedid:{type:String},rowClickEvent:{type:Function},noScrollToRow:{type:Boolean},noDeselect:{type:Boolean}}}static get styles(){return u}static processData(t){return t.map(t=>({...t,start:t.start?t.start:t.begin})).sort((t,e)=>t.start-e.start).map(t=>({...t,protvistaFeatureId:t.protvistaFeatureId||Object(i.v1)()}))}static isWithinRange(t,e,n,r){return!n&&e===Number(r)||!r&&t===Number(n)||t<=n&&e>=r}static isOutside(t,e,n,r){return t>r||e<n}handleClick(t,e){if(!t.target.parentNode)return;const{start:n,end:r}=e,i="function"==typeof this.rowClickEvent&&this.rowClickEvent(e)||{};this.selectedid=t.target.parentNode.dataset.id,n&&r&&(i.highlight=`${n}:${r}`),this.dispatchEvent(new CustomEvent("change",{detail:i,bubbles:!0,cancelable:!0}))}getStyleClass(t,e,n){let r="";return this.selectedid&&this.selectedid===t&&(r+=" active"),this.displayStart&&this.displayEnd&&h.isOutside(this.displayStart,this.displayEnd,e,n)&&(r+=" hidden"),this.highlight&&h.isWithinRange(this.highlight[0],this.highlight[1],e,n)&&(r+=" overlapped"),r}hasChildData(t,e){return t.some(t=>this.columns[t].resolver(e))}toggleVisibleChild(t){this.visibleChildren.includes(t)?this.visibleChildren=this.visibleChildren.filter(e=>e!==t):this.visibleChildren=[...this.visibleChildren,t]}scrollIntoView(){if(!this.selectedid)return;this.shadowRoot.querySelector(`[data-id="${this.selectedid}"]`).scrollIntoView({behavior:"smooth",block:"center"})}getChildRow(t,e){return r.c`
      <tr class="child-row">
        <td
          colspan="${Object.values(this.columns).filter(t=>!t.child).length+1}"
        >
          ${t.map(t=>this.columns[t].resolver(e)?r.c`
                  <div class="protvista-datatable__child-item">
                    <div class="protvista-datatable__child-item__title">
                      ${this.columns[t].label}
                    </div>
                    <div class="protvista-datatable__child-item__content">
                      ${this.columns[t].resolver(e)}
                    </div>
                  </div>
                `:r.c``)}
        </td>
      </tr>
    `}render(){if(!this.data||!this.columns)return r.c``;const t=Object.keys(this.columns).filter(t=>this.columns[t].child),e=Object.values(this.columns).filter(t=>!t.child&&!1!==t.display);return r.c`
      <div
        class="protvista-datatable-container"
        style="height:${this.height}rem"
      >
        <table>
          <thead>
            <tr>
              <th></th>
              ${e.map(t=>r.c`
                    <th>${t.label}</th>
                  `)}
            </tr>
          </thead>
          <tbody>
            ${this.data.map(n=>{const i=this.hasChildData(t,n);return r.c`
                <tr
                  data-id=${n.protvistaFeatureId}
                  class=${this.getStyleClass(n.protvistaFeatureId,n.start,n.end)}
                  @click="${t=>this.handleClick(t,n)}"
                >
                  ${i?r.c`
                        <td
                          class="protvista-datatable__child-toggle"
                          @click="${()=>this.toggleVisibleChild(n.protvistaFeatureId)}"
                        >
                          ${this.visibleChildren.includes(n.protvistaFeatureId)?l('<svg viewBox="0 0 496 496" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>plus-circle</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="plus-circle" fill="#000000" fill-rule="nonzero"><path d="M248,0 C385,0 496,111 496,248 C496,385 385,496 248,496 C111,496 0,385 0,248 C0,111 111,0 248,0 Z M248,36 C130.915633,36 36,130.915633 36,248 C36,365.084367 130.915633,460 248,460 C365.084367,460 460,365.084367 460,248 C460,130.915633 365.084367,36 248,36 Z M392,276 C392,282.6 386.6,288 380,288 L288,288 L208,288 L116,288 C109.4,288 104,282.6 104,276 L104,220 C104,213.4 109.4,208 116,208 L208,208 L288,208 L380,208 C386.6,208 392,213.4 392,220 L392,276 Z" id="Shape"></path></g></g></svg>'):l('<svg viewBox="0 0 496 496" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>plus</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="plus-circle" fill="#000000" fill-rule="nonzero"><path d="M248,0 C385,0 496,111 496,248 C496,385 385,496 248,496 C111,496 0,385 0,248 C0,111 111,0 248,0 Z M248,36 C130.915633,36 36,130.915633 36,248 C36,365.084367 130.915633,460 248,460 C365.084367,460 460,365.084367 460,248 C460,130.915633 365.084367,36 248,36 Z M392,276 C392,282.6 386.6,288 380,288 L288,288 L288,380 C288,386.6 282.6,392 276,392 L220,392 C213.4,392 208,386.6 208,380 L208,288 L116,288 C109.4,288 104,282.6 104,276 L104,220 C104,213.4 109.4,208 116,208 L208,208 L208,116 C208,109.4 213.4,104 220,104 L276,104 C282.6,104 288,109.4 288,116 L288,208 L380,208 C386.6,208 392,213.4 392,220 L392,276 Z" id="Shape"></path></g></g></svg>')}
                        </td>
                      `:r.c`
                        <td />
                      `}
                  ${e.map(t=>r.c`
                        <td>
                          ${t.resolver(n)}
                        </td>
                      `)}
                </tr>
                ${i&&this.visibleChildren.includes(n.protvistaFeatureId)?this.getChildRow(t,n):""}
              `})}
          </tbody>
        </table>
      </div>
    `}updated(){this.noScrollToRow||this.scrollIntoView()}}e.a=h},,,,,,,,,,function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}},function(t,e,n){"use strict";e.a=function(t){return function(){return this.matches(t)}}},function(t,e,n){"use strict";function r(){return[]}e.a=function(t){return null==t?r:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var r=n(234);function i(t){return function(){this.style.removeProperty(t)}}function a(t,e,n){return function(){this.style.setProperty(t,e,n)}}function o(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function s(t,e){return t.style.getPropertyValue(e)||Object(r.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.a=function(t,e,n){return arguments.length>1?this.each((null==e?i:"function"==typeof e?o:a)(t,e,null==n?"":n)):s(this.node(),t)}},function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}},function(t,e,n){"use strict";var r=n(274),i=n(271),a=n(326),o=n(296),s=Object(i.a)((function(t){return Object(a.a)(Object(r.a)(t,1,o.a,!0))}));e.a=s},function(t,e,n){"use strict";var r=n(210),i=n(323);class a extends i.a{connectedCallback(){super.connectedCallback(),this.sequence=this.getAttribute("sequence"),this.sequence&&this._createSequence(),this.addEventListener("load",t=>{this.data=t.detail.payload})}static get observedAttributes(){return i.a.observedAttributes.concat("highlightstart","highlightend")}get data(){return this.sequence}set data(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!super.svg?this._createSequence():this.refresh()}_getCharSize(){if(!this.seq_g)return;const t=this.seq_g.select("text.base").node();if(t)this.chWidth=.8*t.getBBox().width,this.chHeight=1.6*t.getBBox().height;else{const t=this.seq_g.append("text").attr("class","base").text("T");this.chWidth=.8*t.node().getBBox().width,this.chHeight=1.6*t.node().getBBox().height,t.remove()}}_createSequence(){super.svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this.seq_bg=super.svg.append("g").attr("class","background"),this.axis=super.svg.append("g").attr("class","x axis"),this.seq_g=super.svg.append("g").attr("class","sequence").attr("transform",`translate(0,${.75*this._height})`),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}refresh(){if(this._getCharSize(),this.axis){const t=this.getSingleBaseWidth(),e=t-this.chWidth,n=t/2,i=Math.round(Math.max(0,this._displaystart-2)),a=Math.round(Math.min(this.sequence.length,this._displayend+1)),o=e<0?[]:this.sequence.slice(i,a).split("").map((t,e)=>({start:1+i+e,end:1+i+e,aa:t}));this.height>this.chHeight&&(this.xAxis=Object(r.a)(this.xScale).tickFormat(t=>Number.isInteger(t)?t:"").ticks(3,"s"),this.axis.call(this.xAxis)),this.axis.attr("transform",`translate(${this.margin.left+n},0)`),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(o,t=>t.start),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",t=>this.getXFromSeqPosition(t.start)+n).text(t=>t.aa).style("pointer-events","none").style("font-family","monospace"),this.bases.exit().remove(),this.bases.attr("x",t=>this.getXFromSeqPosition(t.start)+n),this.background=this.seq_bg.selectAll("rect.base_bg").data(o,t=>t.start),this.background.enter().append("rect").attr("class","base_bg feature").attr("height",this._height).merge(this.background).attr("width",t).attr("fill",t=>Math.round(t.start)%2?"#ccc":"#eee").attr("x",t=>this.getXFromSeqPosition(t.start)).call(this.bindEvents,this),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,e)),this.background.style("opacity",Math.min(1,e)),this._updateHighlight()}}_updateHighlight(){this.trackHighlighter.updateHighlight()}}e.a=a},function(t,e,n){"use strict";var r=n(210);class i extends HTMLElement{constructor(){super(),this._x=null,this._padding=0,this.dontDispatch=!1}_refreshWidth(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.width>0&&(this._padding=10)}connectedCallback(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}disconnectedCallback(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}static get observedAttributes(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}attributeChangedCallback(t,e,n){e!==n&&(this["_"+t]=parseFloat(n),this._updateNavRuler())}get width(){return this._width}set width(t){this._width=t}_createNavRuler(){this._x=Object(r.i)().range([this._padding,this.width-this._padding]),this._x.domain([1,this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-this._padding),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-this._padding).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[this._padding,0],[this.width-this._padding,20.4]]).on("brush",()=>{r.e.selection&&(this._displaystart=Object(r.f)("d")(this._x.invert(r.e.selection[0])),this._displayend=Object(r.f)("d")(this._x.invert(r.e.selection[1])),this.dontDispatch||this.dispatchEvent(new CustomEvent("change",{detail:{displayend:this._displayend,displaystart:this._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),this._updateLabels(),this._updatePolygon())}),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}_onResize(){this._refreshWidth(),this._x=this._x.range([this._padding,this.width-this._padding]),this._svg.attr("width",this.width),this._viewport.extent([[this._padding,0],[this.width-this._padding,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}_updateNavRuler(){this._x&&(this._x.domain([1,this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}_updateLabels(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}_updatePolygon(){this.polygon&&this.polygon.attr("points",`${this._x(this._displaystart)},20\n        ${this._x(this._displayend)},20\n        ${this.width},40\n        0,40`)}}e.a=i},,,function(t,e,n){"use strict";function r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}n.d(e,"a",(function(){return r}))},,,,,,function(t,e,n){"use strict";var r,i=n(239),a=n(238),o=n(258),s=function(t,e){var n=Object(o.a)(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},c={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return s(100*t,e)},r:s,s:function(t,e){var n=Object(o.a)(t,e);if(!n)return t+"";var i=n[0],a=n[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=i.length;return s===c?i:s>c?i+new Array(s-c+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Object(o.a)(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},l=function(t){return t},u=Array.prototype.map,h=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){var e,n,o=void 0===t.grouping||void 0===t.thousands?l:(e=u.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(t.substring(i-=s,i+s)),!((c+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),s=void 0===t.currency?"":t.currency[0]+"",d=void 0===t.currency?"":t.currency[1]+"",p=void 0===t.decimal?".":t.decimal+"",f=void 0===t.numerals?l:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(u.call(t.numerals,String)),g=void 0===t.percent?"%":t.percent+"",m=void 0===t.minus?"-":t.minus+"",v=void 0===t.nan?"NaN":t.nan+"";function b(t){var e=(t=Object(a.a)(t)).fill,n=t.align,i=t.sign,l=t.symbol,u=t.zero,b=t.width,y=t.comma,_=t.precision,w=t.trim,x=t.type;"n"===x?(y=!0,x="g"):c[x]||(void 0===_&&(_=12),w=!0,x="g"),(u||"0"===e&&"="===n)&&(u=!0,e="0",n="=");var C="$"===l?s:"#"===l&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",A="$"===l?d:/[%p]/.test(x)?g:"",O=c[x],S=/[defgprs%]/.test(x);function M(t){var a,s,c,l=C,d=A;if("c"===x)d=O(t)+d,t="";else{var g=(t=+t)<0||1/t<0;if(t=isNaN(t)?v:O(Math.abs(t),_),w&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),g&&0==+t&&"+"!==i&&(g=!1),l=(g?"("===i?i:m:"-"===i||"("===i?"":i)+l,d=("s"===x?h[8+r/3]:"")+d+(g&&"("===i?")":""),S)for(a=-1,s=t.length;++a<s;)if(48>(c=t.charCodeAt(a))||c>57){d=(46===c?p+t.slice(a+1):t.slice(a))+d,t=t.slice(0,a);break}}y&&!u&&(t=o(t,1/0));var M=l.length+t.length+d.length,E=M<b?new Array(b-M+1).join(e):"";switch(y&&u&&(t=o(E+t,E.length?b-d.length:1/0),E=""),n){case"<":t=l+t+d+E;break;case"=":t=l+E+t+d;break;case"^":t=E.slice(0,M=E.length>>1)+l+t+d+E.slice(M);break;default:t=E+l+t+d}return f(t)}return _=void 0===_?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),M.toString=function(){return t+""},M}return{format:b,formatPrefix:function(t,e){var n=b(((t=Object(a.a)(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Object(i.a)(e)/3))),o=Math.pow(10,-r),s=h[8+r/3];return function(t){return n(o*t)+s}}}}},function(t,e,n){"use strict";var r=n(59);var i=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},a=Math.max;var o=function(t,e,n){return e=a(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=a(r.length-e,0),c=Array(s);++o<s;)c[o]=r[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=r[o];return l[e]=n(c),i(t,this,l)}},s=n(104),c=n(86),l=c.a?function(t,e){return Object(c.a)(t,"toString",{configurable:!0,enumerable:!1,value:Object(s.a)(e),writable:!0})}:r.a,u=Date.now;var h=function(t){var e=0,n=0;return function(){var r=u(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(l);e.a=function(t,e){return h(o(t,e,r.a),t+"")}},function(t,e,n){"use strict";var r=n(92),i=n(99),a=n(294),o=n(295),s=n(91),c=n(95),l=Math.min;var u=function(t,e,n){for(var u=n?o.a:a.a,h=t[0].length,d=t.length,p=d,f=Array(d),g=1/0,m=[];p--;){var v=t[p];p&&e&&(v=Object(r.a)(v,Object(s.a)(e))),g=l(v.length,g),f[p]=!n&&(e||h>=120&&v.length>=120)?new i.a(p&&v):void 0}v=t[0];var b=-1,y=f[0];t:for(;++b<h&&m.length<g;){var _=v[b],w=e?e(_):_;if(_=n||0!==_?_:0,!(y?Object(c.a)(y,w):u(m,w,n))){for(p=d;--p;){var x=f[p];if(!(x?Object(c.a)(x,w):u(t[p],w,n)))continue t}y&&y.push(w),m.push(_)}}return m},h=n(271),d=n(296);var p=function(t){return Object(d.a)(t)?t:[]},f=Object(h.a)((function(t){var e=Object(r.a)(t,p);return e.length&&e[0]===t[0]?u(e):[]}));e.a=f},,function(t,e,n){"use strict";var r=n(97),i=n(21),a=n(67),o=n(11),s=i.a?i.a.isConcatSpreadable:void 0;var c=function(t){return Object(o.a)(t)||Object(a.a)(t)||!!(s&&t&&t[s])};e.a=function t(e,n,i,a,o){var s=-1,l=e.length;for(i||(i=c),o||(o=[]);++s<l;){var u=e[s];n>0&&i(u)?n>1?t(u,n-1,i,a,o):Object(r.a)(o,u):a||(o[o.length]=u)}return o}},,,,,,,,,,,,function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(288),i=n(236);e.a=function(t,e,n){arguments.length<3&&(n=e,e=Object(r.a)().changedTouches);for(var a,o=0,s=e?e.length:0;o<s;++o)if((a=e[o]).identifier===n)return Object(i.a)(t,a);return null}},function(t,e,n){"use strict";var r=n(220);e.a=function(){for(var t,e=r.c;t=e.sourceEvent;)e=t;return e}},function(t,e,n){"use strict";var r=n(243);e.a=function(t){return"string"==typeof t?new r.a([[document.querySelector(t)]],[document.documentElement]):new r.a([[t]],r.c)}},function(t,e,n){"use strict";var r=n(288),i=n(236);e.a=function(t){var e=Object(r.a)();return e.changedTouches&&(e=e.changedTouches[0]),Object(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(239);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(r.a)(e)/3)))-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(239);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Object(r.a)(e)-Object(r.a)(t))+1}},function(t,e,n){"use strict";var r=n(239);e.a=function(t){return Math.max(0,-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(325);e.a=function(t,e){return!!(null==t?0:t.length)&&Object(r.a)(t,e,0)>-1}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){"use strict";var r=n(56),i=n(24);e.a=function(t){return Object(i.a)(t)&&Object(r.a)(t)}},,function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},,,,function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){"use strict";var r=n(213),i=n(181);class a extends r.a{static get properties(){return{filters:{type:Array},selectedFilters:{type:Set},for:{type:String}}}constructor(){super(),this.filters=[],this.selectedFilters=new Set}connectedCallback(){super.connectedCallback(),this.addEventListener("filterChange",this._onFilterChange),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this))}disconnectedCallback(){super.disconnectedCallback(),this.manager&&this.manager.unregister(this),this.removeEventListener("filterChange",this._onFilterChange)}static get styles(){return r.b`
      :host {
        font-size: 0.8rem;
      }

      :host[disabled] {
        opacity: 0.5;
      }

      .protvista_checkbox {
        position: relative;
        cursor: pointer;
        box-sizing: border-box;
        display: flex;
        align-items: center;
        margin-top: 10px;
        line-height: 24px;
        outline: none;
      }

      .protvista_checkbox_input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }

      .checkmark {
        opacity: 0.4;
        height: 25px;
        width: 25px;
        background-color: #eee;
        border-radius: 4px;
        box-sizing: border-box;
        border: 1px solid #bdc3c7;
      }

      .protvista_checkbox_input:checked ~ .checkmark {
        opacity: 1;
      }

      .protvista_checkbox_label {
        margin-left: 0.2rem;
        line-height: 1rem;
      }
    `}render(){const t=Object(i.a)(this.filters,t=>t.type.text);return r.c`
      ${Object.keys(t).map(e=>r.c`
            <h4>${e}</h4>
            <div>
              ${t[e].map(t=>r.c`
                    ${this.getCheckBox(t)}
                  `)}
            </div>
          `)}
    `}getCheckBox(t){const{name:e,options:n}=t,{labels:i}=n;null==n.colors.length&&(n.colors=[n.colors]);const a=n.colors.length>1;return r.c`
      <label
        class="protvista_checkbox ${a?"compound":""}"
        tabindex="0"
      >
        <input
          type="checkbox"
          class="protvista_checkbox_input"
          ?checked="true"
          .value="${e}"
          @change="${()=>this.toggleFilter(e)}"
        />
        <span
          class="checkmark"
          style=${`background: ${a?`\n            linear-gradient(${n.colors[0]},\n            ${n.colors[1]})\n          `:n.colors[0]};`}
        ></span>
        <span class="protvista_checkbox_label">
          ${i.join("/")}
        </span>
      </label>
    `}toggleFilter(t){this.selectedFilters.has(t)?this.selectedFilters.delete(t):this.selectedFilters.add(t),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{type:"filters",handler:"property",for:this.for,value:this.filters.filter(t=>this.selectedFilters.has(t.name)).map(t=>({category:t.type.name,filterFn:t.filterData}))}}))}}e.a=a},,,,,function(t,e,n){"use strict";var r=n(243);e.a=function(t){return"string"==typeof t?new r.a([document.querySelectorAll(t)],[document.documentElement]):new r.a([null==t?[]:t],r.c)}},,,,,function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},function(t,e,n){"use strict";var r=n(210);class i{constructor({min:t=-1/0,max:e=1/0}={}){this.segments=[],this.max=e,this.min=t,this.regionString=null}encode(t=!1){return this.segments.map(({start:e,end:n})=>{if(t)return`${e}:${n}`;return`${e===this.min?"":e}:${n===this.max?"":n}`}).join(",")}decode(t){void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map(t=>{const[e,n,r]=t.split(":");if(void 0!==r)throw new Error("there should be at most 1 ':' per region. Region: "+t);let i=e?Number(e):this.min,a=n?Number(n):this.max;if(i>a&&([i,a]=[a,i]),i<this.min&&(i=this.min),a>this.max&&(a=this.max),Number.isNaN(i))throw new Error(`The parsed value of ${e} is NaN. Region: ${t}`);if(Number.isNaN(a))throw new Error(`The parsed value of ${n} is NaN. Region: ${t}`);return{start:i,end:a}}):this.segments=[]}}const a=(t,e)=>t?e?`${t},${e}`:t:e;const o=class{constructor({element:t,min:e,max:n}){this.element=t,this.region=new i({min:e,max:n}),this.fixedHighlight=null}set max(t){this.region.max=t}setAttributesInElement(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight=`${this.element._highlightstart}:${this.element._highlightend}`,this.region.decode(a(this.fixedHighlight,this.element._highlight))))}setFloatAttribute(t,e){const n=parseFloat(e);this.element["_"+t]=Number.isNaN(n)?e:n}changedCallBack(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":`${Math.max(this.region.min,this.element._highlightstart)}:${Math.min(this.region.max,this.element._highlightend)}`;break;default:this.element._highlight=e}this.region.decode(a(this.fixedHighlight,this.element._highlight)),this.element.refresh()}setFixedHighlight(t){this.fixedHighlight=t,this.region.decode(a(t,this.element._highlight)),this.element.refresh()}appendHighlightTo(t){this.highlighted=t.append("g").attr("class","highlighted")}updateHighlight(){const t=this.highlighted.selectAll("rect").data(this.region.segments);t.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(t).attr("height",this.element._height).attr("x",t=>this.element.getXFromSeqPosition(t.start)).attr("width",t=>this.element.getSingleBaseWidth()*(t.end-t.start+1)),t.exit().remove()}};var s=n(378);class c extends HTMLElement{constructor(){super(),c._polyfillElementClosest(),this._updateScaleDomain=this._updateScaleDomain.bind(this),this._initZoom=this._initZoom.bind(this),this.zoomed=this.zoomed.bind(this),this._applyZoomTranslation=this.applyZoomTranslation.bind(this),this._resetEventHandler=this._resetEventHandler.bind(this);let t=!1;this.applyZoomTranslation=()=>{t||(t=!0,requestAnimationFrame(()=>{t=!1,this._applyZoomTranslation()}))},this._onResize=this._onResize.bind(this),this._listenForResize=this._listenForResize.bind(this),this.trackHighlighter=new o({element:this,min:1})}connectedCallback(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.length,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",t=>{console.error(t)}),this.addEventListener("click",this._resetEventHandler)}disconnectedCallback(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler)}get width(){return this._width}set width(t){this._width=t}set height(t){this._height=t}get height(){return this._height}set length(t){this._length=t,this.trackHighlighter.max=t}get length(){return this._length}get xScale(){return this._xScale}set xScale(t){this._xScale=t}get zoom(){return this._zoom}set svg(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()}get svg(){return this._svg}get margin(){return{top:10,right:10,bottom:10,left:10}}set fixedHighlight(t){this.trackHighlighter.setFixedHighlight(t)}getWidthWithMargins(){return this.width?this.width-this.margin.left-this.margin.right:0}_updateScaleDomain(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}_initZoom(){this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).filter(()=>!(r.e instanceof WheelEvent)||(!this.hasAttribute("use-ctrl-to-zoom")||r.e.ctrlKey)).on("zoom",this.zoomed)}static get observedAttributes(){return["displaystart","displayend","length","highlight"]}setFloatAttribute(t,e){const n=parseFloat(e);this["_"+t]=Number.isNaN(n)?e:n}attributeChangedCallback(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}zoomed(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),this.dontDispatch)return;const[t,e]=this.xScale.domain();this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,t),displayend:Math.min(this.length,Math.max(e-1,t+1))},bubbles:!0,cancelable:!0}))}applyZoomTranslation(){if(!this.svg||!this._originXScale)return;const t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}_onResize(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}_listenForResize(){this._ro=new s.a(this._onResize),this._ro.observe(this)}_resetEventHandler(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}getXFromSeqPosition(t){return this.margin.left+this.xScale(t)}getSingleBaseWidth(){return this.xScale(2)-this.xScale(1)}static _getClickCoords(){return r.e?[r.e.pageX,r.e.pageY]:null}static _polyfillElementClosest(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=t=>{let e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}createEvent(t,e=null,n=!1,i=!1,a,o,s){e&&(e=e.feature?e.feature:e);const l={eventtype:t,coords:c._getClickCoords(),feature:e,target:s};return n&&(e&&e.fragments?l.highlight=e.fragments.map(t=>`${t.start}:${t.end}`).join(","):r.e&&r.e.shiftKey&&this._highlight?l.highlight=`${this._highlight},${a}:${o}`:l.highlight=a&&o?`${a}:${o}`:null),i&&(l.selectedid=e&&e.protvistaFeatureId),new CustomEvent("change",{detail:l,bubbles:!0,cancelable:!0})}bindEvents(t,e){t.on("mouseover",(t,n,r)=>{e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,!1,t.start,t.end,r[n]))}).on("mouseout",()=>{e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))}).on("click",(t,n,r)=>{e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,!0,t.start,t.end,r[n]))})}}e.a=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return Nr})),n.d(e,"b",(function(){return gi})),n.d(e,"c",(function(){return _i}));var r=n(0),i=n.n(r),a=n(19),o=n(2),s=n(18),c=n(55);function l(t,e){var n=Object(r.useState)((function(){return{inputs:e,result:t()}}))[0],i=Object(r.useRef)(n),a=Boolean(e&&i.current.inputs&&function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,i.current.inputs))?i.current:{inputs:e,result:t()};return Object(r.useEffect)((function(){i.current=a}),[a]),a.result}var u=l,h=function(t,e){return l((function(){return t}),e)},d=n(20),p=function(t){var e=t.top,n=t.right,r=t.bottom,i=t.left;return{top:e,right:n,bottom:r,left:i,width:n-i,height:r-e,x:i,y:e,center:{x:(n+i)/2,y:(r+e)/2}}},f=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},g=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},m={top:0,right:0,bottom:0,left:0},v=function(t){var e=t.borderBox,n=t.margin,r=void 0===n?m:n,i=t.border,a=void 0===i?m:i,o=t.padding,s=void 0===o?m:o,c=p(f(e,r)),l=p(g(e,a)),u=p(g(l,s));return{marginBox:c,borderBox:p(e),paddingBox:l,contentBox:u,margin:r,border:a,padding:s}},b=function(t){var e=t.slice(0,-2);if("px"!==t.slice(-2))return 0;var n=Number(e);return isNaN(n)&&Object(d.a)(!1),n},y=function(t,e){var n,r,i=t.borderBox,a=t.border,o=t.margin,s=t.padding,c=(r=e,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return v({borderBox:c,border:a,margin:o,padding:s})},_=function(t,e){return void 0===e&&(e={x:window.pageXOffset,y:window.pageYOffset}),y(t,e)},w=function(t,e){var n={top:b(e.marginTop),right:b(e.marginRight),bottom:b(e.marginBottom),left:b(e.marginLeft)},r={top:b(e.paddingTop),right:b(e.paddingRight),bottom:b(e.paddingBottom),left:b(e.paddingLeft)},i={top:b(e.borderTopWidth),right:b(e.borderRightWidth),bottom:b(e.borderBottomWidth),left:b(e.borderLeftWidth)};return v({borderBox:t,margin:n,padding:r,border:i})},x=function(t){var e=t.getBoundingClientRect(),n=window.getComputedStyle(t);return w(e,n)};function C(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var A=function(t,e){var n;void 0===e&&(e=C);var r,i=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&n===this&&e(o,i)||(r=t.apply(this,o),a=!0,n=this,i=o),r}},O=function(t){var e=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e=i,n||(n=requestAnimationFrame((function(){n=null,t.apply(void 0,e)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},S=n(61),M=n.n(S);function E(t,e){}E.bind(null,"warn"),E.bind(null,"error");function k(){}function T(t,e,n){var r=e.map((function(e){var r,i,a=(r=n,i=e.options,Object(o.a)({},r,{},i));return t.addEventListener(e.eventName,e.fn,a),function(){t.removeEventListener(e.eventName,e.fn,a)}}));return function(){r.forEach((function(t){t()}))}}function D(t){this.message=t}function I(t,e){if(!t)throw new D("Invariant failed")}D.prototype.toString=function(){return this.message};var N=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).callbacks=null,e.unbind=k,e.onWindowError=function(t){var n=e.getCallbacks();n.isDragging()&&n.tryAbort(),t.error instanceof D&&t.preventDefault()},e.getCallbacks=function(){if(!e.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return e.callbacks},e.setCallbacks=function(t){e.callbacks=t},e}Object(a.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.unbind=T(window,[{eventName:"error",fn:this.onWindowError}])},n.componentWillUnmount=function(){this.unbind()},n.componentDidCatch=function(t){if(!(t instanceof D))throw t;this.setState({})},n.render=function(){return this.props.children(this.setCallbacks)},e}(i.a.Component),j=function(t){return t+1},P=function(t,e){var n=t.droppableId===e.droppableId,r=j(t.index),i=j(e.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+t.droppableId+"\n    to list "+e.droppableId+"\n    in position "+i+"\n  "},L=function(t,e,n){return e.droppableId===n.droppableId?"\n      The item "+t+"\n      has been combined with "+n.draggableId:"\n      The item "+t+"\n      in list "+e.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},R=function(t){return"\n  The item has returned to its starting position\n  of "+j(t.index)+"\n"},B="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",F=function(t){return"\n  You have lifted an item in position "+j(t.source.index)+"\n"},$=function(t){var e=t.destination;if(e)return P(t.source,e);var n=t.combine;return n?L(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},U=function(t){if("CANCEL"===t.reason)return"\n      Movement cancelled.\n      "+R(t.source)+"\n    ";var e=t.destination,n=t.combine;return e?"\n      You have dropped the item.\n      "+P(t.source,e)+"\n    ":n?"\n      You have dropped the item.\n      "+L(t.draggableId,t.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+R(t.source)+"\n  "},q={x:0,y:0},H=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},G=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},z=function(t,e){return t.x===e.x&&t.y===e.y},V=function(t){return{x:0!==t.x?-t.x:0,y:0!==t.y?-t.y:0}},W=function(t,e,n){var r;return void 0===n&&(n=0),(r={})[t]=e,r["x"===t?"y":"x"]=n,r},Y=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},X=function(t,e){return Math.min.apply(Math,e.map((function(e){return Y(t,e)})))},Z=function(t){return function(e){return{x:t(e.x),y:t(e.y)}}},J=function(t,e){return{top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}},K=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Q=function(t,e){return e&&e.shouldClipSubject?function(t,e){var n=p({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n}(e.pageMarginBox,t):p(t)},tt=function(t){var e=t.page,n=t.withPlaceholder,r=t.axis,i=t.frame,a=function(t,e,n){var r;return n&&n.increasedBy?Object(o.a)({},t,((r={})[e.end]=t[e.end]+n.increasedBy[e.line],r)):t}(function(t,e){return e?J(t,e.scroll.diff.displacement):t}(e.marginBox,i),r,n);return{page:e,withPlaceholder:n,active:Q(a,i)}},et=function(t,e){t.frame||I(!1);var n=t.frame,r=G(e,n.scroll.initial),i=V(r),a=Object(o.a)({},n,{scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}}),s=tt({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a});return Object(o.a)({},t,{frame:a,subject:s})};function nt(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))}function rt(t,e){if(t.findIndex)return t.findIndex(e);for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function it(t,e){if(t.find)return t.find(e);var n=rt(t,e);return-1!==n?t[n]:void 0}function at(t){return Array.prototype.slice.call(t)}var ot=A((function(t){return t.reduce((function(t,e){return t[e.descriptor.id]=e,t}),{})})),st=A((function(t){return t.reduce((function(t,e){return t[e.descriptor.id]=e,t}),{})})),ct=A((function(t){return nt(t)})),lt=A((function(t){return nt(t)})),ut=A((function(t,e){return lt(e).filter((function(e){return t===e.descriptor.droppableId})).sort((function(t,e){return t.descriptor.index-e.descriptor.index}))}));function ht(t){return t.at&&"REORDER"===t.at.type?t.at.destination:null}function dt(t){return t.at&&"COMBINE"===t.at.type?t.at.combine:null}var pt=A((function(t,e){return e.filter((function(e){return e.descriptor.id!==t.descriptor.id}))})),ft=function(t,e){return t.descriptor.droppableId===e.descriptor.id},gt={point:q,value:0},mt={invisible:{},visible:{},all:[]},vt={displaced:mt,displacedBy:gt,at:null},bt=function(t,e){return function(n){return t<=n&&n<=e}},yt=function(t){var e=bt(t.top,t.bottom),n=bt(t.left,t.right);return function(r){if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=e(r.top)||e(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;var o=r.top<t.top&&r.bottom>t.bottom,s=r.left<t.left&&r.right>t.right;return!(!o||!s)||(o&&a||s&&i)}},_t=function(t){var e=bt(t.top,t.bottom),n=bt(t.left,t.right);return function(t){return e(t.top)&&e(t.bottom)&&n(t.left)&&n(t.right)}},wt={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xt={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Ct=function(t){var e=t.target,n=t.destination,r=t.viewport,i=t.withDroppableDisplacement,a=t.isVisibleThroughFrameFn,o=i?function(t,e){var n=e.frame?e.frame.scroll.diff.displacement:q;return J(t,n)}(e,n):e;return function(t,e,n){return!!e.subject.active&&n(e.subject.active)(t)}(o,n,a)&&function(t,e,n){return n(e)(t)}(o,r,a)},At=function(t){return Ct(Object(o.a)({},t,{isVisibleThroughFrameFn:yt}))},Ot=function(t){return Ct(Object(o.a)({},t,{isVisibleThroughFrameFn:_t}))};function St(t){var e=t.afterDragging,n=t.destination,r=t.displacedBy,i=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce((function(t,e){var s=function(t,e){var n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return p(f(n,r))}(e,r),c=e.descriptor.id;if(t.all.push(c),!At({target:s,destination:n,viewport:i,withDroppableDisplacement:!0}))return t.invisible[e.descriptor.id]=!0,t;var l={draggableId:c,shouldAnimate:function(t,e,n){if("boolean"==typeof n)return n;if(!e)return!0;var r=e.invisible,i=e.visible;if(r[t])return!1;var a=i[t];return!a||a.shouldAnimate}(c,o,a)};return t.visible[c]=l,t}),{all:[],visible:{},invisible:{}})}function Mt(t){var e=t.insideDestination,n=t.inHomeList,r=t.displacedBy,i=t.destination,a=function(t,e){if(!t.length)return 0;var n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}(e,{inHomeList:n});return{displaced:mt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function Et(t){var e=t.draggable,n=t.insideDestination,r=t.destination,i=t.viewport,a=t.displacedBy,o=t.last,s=t.index,c=t.forceShouldAnimate,l=ft(e,r);if(null==s)return Mt({insideDestination:n,inHomeList:l,displacedBy:a,destination:r});var u=it(n,(function(t){return t.descriptor.index===s}));if(!u)return Mt({insideDestination:n,inHomeList:l,displacedBy:a,destination:r});var h=pt(e,n),d=n.indexOf(u);return{displaced:St({afterDragging:h.slice(d),destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:c}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function kt(t,e){return Boolean(e.effected[t])}var Tt=function(t){var e=t.isMovingForward,n=t.isInHomeList,r=t.draggable,i=t.draggables,a=t.destination,o=t.insideDestination,s=t.previousImpact,c=t.viewport,l=t.afterCritical,u=s.at;if(u||I(!1),"REORDER"===u.type){var h=function(t){var e=t.isMovingForward,n=t.isInHomeList,r=t.insideDestination,i=t.location;if(!r.length)return null;var a=i.index,o=e?a+1:a-1,s=r[0].descriptor.index,c=r[r.length-1].descriptor.index;return o<s||o>(n?c:c+1)?null:o}({isMovingForward:e,isInHomeList:n,location:u.destination,insideDestination:o});return null==h?null:Et({draggable:r,insideDestination:o,destination:a,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:h})}var d=function(t){var e=t.isMovingForward,n=t.destination,r=t.draggables,i=t.combine,a=t.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,s=r[o].descriptor.index;return kt(o,a)?e?s:s-1:e?s+1:s}({isMovingForward:e,destination:a,displaced:s.displaced,draggables:i,combine:u.combine,afterCritical:l});return null==d?null:Et({draggable:r,insideDestination:o,destination:a,viewport:c,last:s.displaced,displacedBy:s.displacedBy,index:d})},Dt=function(t){var e=t.afterCritical,n=t.impact,r=t.draggables,i=dt(n);i||I(!1);var a=i.draggableId,o=r[a].page.borderBox.center,s=function(t){var e=t.displaced,n=t.afterCritical,r=t.combineWith,i=t.displacedBy,a=Boolean(e.visible[r]||e.invisible[r]);return kt(r,n)?a?q:V(i.point):a?i.point:q}({displaced:n.displaced,afterCritical:e,combineWith:a,displacedBy:n.displacedBy});return H(o,s)},It=function(t,e){return e.margin[t.start]+e.borderBox[t.size]/2},Nt=function(t,e,n){return e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},jt=function(t){var e=t.axis,n=t.moveRelativeTo,r=t.isMoving;return W(e.line,n.marginBox[e.end]+It(e,r),Nt(e,n.marginBox,r))},Pt=function(t){var e=t.axis,n=t.moveRelativeTo,r=t.isMoving;return W(e.line,n.marginBox[e.start]-function(t,e){return e.margin[t.end]+e.borderBox[t.size]/2}(e,r),Nt(e,n.marginBox,r))},Lt=function(t){var e=t.impact,n=t.draggable,r=t.draggables,i=t.droppable,a=t.afterCritical,o=ut(i.descriptor.id,r),s=n.page,c=i.axis;if(!o.length)return function(t){var e=t.axis,n=t.moveInto,r=t.isMoving;return W(e.line,n.contentBox[e.start]+It(e,r),Nt(e,n.contentBox,r))}({axis:c,moveInto:i.page,isMoving:s});var l=e.displaced,u=e.displacedBy,h=l.all[0];if(h){var d=r[h];if(kt(h,a))return Pt({axis:c,moveRelativeTo:d.page,isMoving:s});var p=y(d.page,u.point);return Pt({axis:c,moveRelativeTo:p,isMoving:s})}var f=o[o.length-1];if(f.descriptor.id===n.descriptor.id)return s.borderBox.center;if(kt(f.descriptor.id,a)){var g=y(f.page,V(a.displacedBy.point));return jt({axis:c,moveRelativeTo:g,isMoving:s})}return jt({axis:c,moveRelativeTo:f.page,isMoving:s})},Rt=function(t,e){var n=t.frame;return n?H(e,n.scroll.diff.displacement):e},Bt=function(t){var e=function(t){var e=t.impact,n=t.draggable,r=t.droppable,i=t.draggables,a=t.afterCritical,o=n.page.borderBox.center,s=e.at;return r&&s?"REORDER"===s.type?Lt({impact:e,draggable:n,draggables:i,droppable:r,afterCritical:a}):Dt({impact:e,draggables:i,afterCritical:a}):o}(t),n=t.droppable;return n?Rt(n,e):e},Ft=function(t,e){var n=G(e,t.scroll.initial),r=V(n);return{frame:p({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function $t(t,e){return t.map((function(t){return e[t]}))}var Ut=function(t){var e=t.pageBorderBoxCenter,n=t.draggable,r=function(t,e){return H(t.scroll.diff.displacement,e)}(t.viewport,e),i=G(r,n.page.borderBox.center);return H(n.client.borderBox.center,i)},qt=function(t){var e=t.draggable,n=t.destination,r=t.newPageBorderBoxCenter,i=t.viewport,a=t.withDroppableDisplacement,s=t.onlyOnMainAxis,c=void 0!==s&&s,l=G(r,e.page.borderBox.center),u={target:J(e.page.borderBox,l),destination:n,withDroppableDisplacement:a,viewport:i};return c?function(t){return Ct(Object(o.a)({},t,{isVisibleThroughFrameFn:(e=t.destination.axis,function(t){var n=bt(t.top,t.bottom),r=bt(t.left,t.right);return function(t){return e===wt?n(t.top)&&n(t.bottom):r(t.left)&&r(t.right)}})}));var e}(u):Ot(u)},Ht=function(t){var e=t.isMovingForward,n=t.draggable,r=t.destination,i=t.draggables,a=t.previousImpact,s=t.viewport,c=t.previousPageBorderBoxCenter,l=t.previousClientSelection,u=t.afterCritical;if(!r.isEnabled)return null;var h=ut(r.descriptor.id,i),d=ft(n,r),p=function(t){var e=t.isMovingForward,n=t.draggable,r=t.destination,i=t.insideDestination,a=t.previousImpact;if(!r.isCombineEnabled)return null;if(!ht(a))return null;function s(t){var e={type:"COMBINE",combine:{draggableId:t,droppableId:r.descriptor.id}};return Object(o.a)({},a,{at:e})}var c=a.displaced.all,l=c.length?c[0]:null;if(e)return l?s(l):null;var u=pt(n,i);if(!l)return u.length?s(u[u.length-1].descriptor.id):null;var h=rt(u,(function(t){return t.descriptor.id===l}));-1===h&&I(!1);var d=h-1;return d<0?null:s(u[d].descriptor.id)}({isMovingForward:e,draggable:n,destination:r,insideDestination:h,previousImpact:a})||Tt({isMovingForward:e,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:h,previousImpact:a,viewport:s,afterCritical:u});if(!p)return null;var f=Bt({impact:p,draggable:n,droppable:r,draggables:i,afterCritical:u});if(qt({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Ut({pageBorderBoxCenter:f,draggable:n,viewport:s}),impact:p,scrollJumpRequest:null};var g=G(f,c);return{clientSelection:l,impact:function(t){var e=t.impact,n=t.viewport,r=t.destination,i=t.draggables,a=t.maxScrollChange,s=Ft(n,H(n.scroll.current,a)),c=r.frame?et(r,H(r.frame.scroll.current,a)):r,l=e.displaced,u=St({afterDragging:$t(l.all,i),destination:r,displacedBy:e.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),h=St({afterDragging:$t(l.all,i),destination:c,displacedBy:e.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},p={},f=[l,u,h];return l.all.forEach((function(t){var e=function(t,e){for(var n=0;n<e.length;n++){var r=e[n].visible[t];if(r)return r}return null}(t,f);e?p[t]=e:d[t]=!0})),Object(o.a)({},e,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:s,destination:r,draggables:i,maxScrollChange:g}),scrollJumpRequest:g}},Gt=function(t){var e=t.subject.active;return e||I(!1),e},zt=function(t,e){var n=t.page.borderBox.center;return kt(t.descriptor.id,e)?G(n,e.displacedBy.point):n},Vt=function(t,e){var n=t.page.borderBox;return kt(t.descriptor.id,e)?J(n,V(e.displacedBy.point)):n},Wt=A((function(t,e){var n=e[t.line];return{value:n,point:W(t.line,n)}})),Yt=function(t,e){return Object(o.a)({},t,{scroll:Object(o.a)({},t.scroll,{max:e})})},Xt=function(t,e,n){var r=t.frame;ft(e,t)&&I(!1),t.subject.withPlaceholder&&I(!1);var i=Wt(t.axis,e.displaceBy).point,a=function(t,e,n){var r=t.axis;if("virtual"===t.descriptor.mode)return W(r.line,e[r.line]);var i=t.subject.page.contentBox[r.size],a=ut(t.descriptor.id,n).reduce((function(t,e){return t+e.client.marginBox[r.size]}),0)+e[r.line]-i;return a<=0?null:W(r.line,a)}(t,i,n),s={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){var c=tt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:t.frame});return Object(o.a)({},t,{subject:c})}var l=a?H(r.scroll.max,a):r.scroll.max,u=Yt(r,l),h=tt({page:t.subject.page,withPlaceholder:s,axis:t.axis,frame:u});return Object(o.a)({},t,{subject:h,frame:u})},Zt=function(t){var e=t.isMovingForward,n=t.previousPageBorderBoxCenter,r=t.draggable,i=t.isOver,a=t.draggables,o=t.droppables,s=t.viewport,c=t.afterCritical,l=function(t){var e=t.isMovingForward,n=t.pageBorderBoxCenter,r=t.source,i=t.droppables,a=t.viewport,o=r.subject.active;if(!o)return null;var s=r.axis,c=bt(o[s.start],o[s.end]),l=ct(i).filter((function(t){return t!==r})).filter((function(t){return t.isEnabled})).filter((function(t){return Boolean(t.subject.active)})).filter((function(t){return yt(a.frame)(Gt(t))})).filter((function(t){var n=Gt(t);return e?o[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<o[s.crossAxisStart]})).filter((function(t){var e=Gt(t),n=bt(e[s.start],e[s.end]);return c(e[s.start])||c(e[s.end])||n(o[s.start])||n(o[s.end])})).sort((function(t,n){var r=Gt(t)[s.crossAxisStart],i=Gt(n)[s.crossAxisStart];return e?r-i:i-r})).filter((function(t,e,n){return Gt(t)[s.crossAxisStart]===Gt(n[0])[s.crossAxisStart]}));if(!l.length)return null;if(1===l.length)return l[0];var u=l.filter((function(t){return bt(Gt(t)[s.start],Gt(t)[s.end])(n[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(t,e){return Gt(t)[s.start]-Gt(e)[s.start]}))[0]:l.sort((function(t,e){var r=X(n,K(Gt(t))),i=X(n,K(Gt(e)));return r!==i?r-i:Gt(t)[s.start]-Gt(e)[s.start]}))[0]}({isMovingForward:e,pageBorderBoxCenter:n,source:i,droppables:o,viewport:s});if(!l)return null;var u=ut(l.descriptor.id,a),h=function(t){var e=t.previousPageBorderBoxCenter,n=t.moveRelativeTo,r=t.insideDestination,i=t.draggable,a=t.draggables,o=t.destination,s=t.viewport,c=t.afterCritical;if(!n){if(r.length)return null;var l={displaced:mt,displacedBy:gt,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=Bt({impact:l,draggable:i,droppable:o,draggables:a,afterCritical:c}),h=ft(i,o)?o:Xt(o,i,a);return qt({draggable:i,destination:h,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?l:null}var d,p=Boolean(e[o.axis.line]<=n.page.borderBox.center[o.axis.line]),f=(d=n.descriptor.index,n.descriptor.id===i.descriptor.id||p?d:d+1),g=Wt(o.axis,i.displaceBy);return Et({draggable:i,insideDestination:r,destination:o,viewport:s,displacedBy:g,last:mt,index:f})}({previousPageBorderBoxCenter:n,destination:l,draggable:r,draggables:a,moveRelativeTo:function(t){var e=t.pageBorderBoxCenter,n=t.viewport,r=t.destination,i=t.insideDestination,a=t.afterCritical;return i.filter((function(t){return Ot({target:Vt(t,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(t,n){var i=Y(e,Rt(r,zt(t,a))),o=Y(e,Rt(r,zt(n,a)));return i<o?-1:o<i?1:t.descriptor.index-n.descriptor.index}))[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:l,insideDestination:u,afterCritical:c}),insideDestination:u,viewport:s,afterCritical:c});if(!h)return null;var d=Bt({impact:h,draggable:r,droppable:l,draggables:a,afterCritical:c});return{clientSelection:Ut({pageBorderBoxCenter:d,draggable:r,viewport:s}),impact:h,scrollJumpRequest:null}},Jt=function(t){var e=t.at;return e?"REORDER"===e.type?e.destination.droppableId:e.combine.droppableId:null},Kt=function(t){var e=t.state,n=t.type,r=function(t,e){var n=Jt(t);return n?e[n]:null}(e.impact,e.dimensions.droppables),i=Boolean(r),a=e.dimensions.droppables[e.critical.droppable.id],o=r||a,s=o.axis.direction,c="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(c&&!i)return null;var l="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,d=e.dimensions,p=d.draggables,f=d.droppables;return c?Ht({isMovingForward:l,previousPageBorderBoxCenter:h,draggable:u,destination:o,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Zt({isMovingForward:l,previousPageBorderBoxCenter:h,draggable:u,isOver:o,draggables:p,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Qt(t){return"DRAGGING"===t.phase||"COLLECTING"===t.phase}function te(t){var e=bt(t.top,t.bottom),n=bt(t.left,t.right);return function(t){return e(t.y)&&n(t.x)}}function ee(t){var e=t.pageBorderBox,n=t.draggable,r=t.droppables,i=ct(r).filter((function(t){if(!t.isEnabled)return!1;var n,r,i=t.subject.active;if(!i)return!1;if(r=i,!((n=e).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(te(i)(e.center))return!0;var a=t.axis,o=i.center[a.crossAxisLine],s=e[a.crossAxisStart],c=e[a.crossAxisEnd],l=bt(i[a.crossAxisStart],i[a.crossAxisEnd]),u=l(s),h=l(c);return!u&&!h||(u?s<o:c>o)}));return i.length?1===i.length?i[0].descriptor.id:function(t){var e=t.pageBorderBox,n=t.draggable,r=t.candidates,i=n.page.borderBox.center,a=r.map((function(t){var n=t.axis,r=W(t.axis.line,e.center[n.line],t.page.borderBox.center[n.crossAxisLine]);return{id:t.descriptor.id,distance:Y(i,r)}})).sort((function(t,e){return e.distance-t.distance}));return a[0]?a[0].id:null}({pageBorderBox:e,draggable:n,candidates:i}):null}var ne=function(t,e){return p(J(t,e))};function re(t){var e=t.displaced,n=t.id;return Boolean(e.visible[n]||e.invisible[n])}var ie=function(t){var e=t.pageOffset,n=t.draggable,r=t.draggables,i=t.droppables,a=t.previousImpact,o=t.viewport,s=t.afterCritical,c=ne(n.page.borderBox,e),l=ee({pageBorderBox:c,draggable:n,droppables:i});if(!l)return vt;var u,h,d=i[l],p=ut(d.descriptor.id,r),f=(u=c,(h=d.frame)?ne(u,h.scroll.diff.value):u);return function(t){var e=t.draggable,n=t.pageBorderBoxWithDroppableScroll,r=t.previousImpact,i=t.destination,a=t.insideDestination,o=t.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,c=Wt(i.axis,e.displaceBy),l=c.value,u=n[s.start],h=n[s.end],d=it(pt(e,a),(function(t){var e=t.descriptor.id,n=t.page.borderBox,i=n[s.size]/4,a=kt(e,o),c=re({displaced:r.displaced,id:e});return a?c?h>n[s.start]+i&&h<n[s.end]-i:u>n[s.start]-l+i&&u<n[s.end]-l-i:c?h>n[s.start]+l+i&&h<n[s.end]+l-i:u>n[s.start]+i&&u<n[s.end]-i}));return d?{displacedBy:c,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:f,draggable:n,previousImpact:a,destination:d,insideDestination:p,afterCritical:s})||function(t){var e=t.pageBorderBoxWithDroppableScroll,n=t.draggable,r=t.destination,i=t.insideDestination,a=t.last,o=t.viewport,s=t.afterCritical,c=r.axis,l=Wt(r.axis,n.displaceBy),u=l.value,h=e[c.start],d=e[c.end],p=function(t){var e=t.draggable,n=t.closest,r=t.inHomeList;return n?r&&n.descriptor.index>e.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:it(pt(n,i),(function(t){var e=t.descriptor.id,n=t.page.borderBox.center[c.line],r=kt(e,s),i=re({displaced:a,id:e});return r?i?d<=n:h<n-u:i?d<=n+u:h<n})),inHomeList:ft(n,r)});return Et({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:l,index:p})}({pageBorderBoxWithDroppableScroll:f,draggable:n,destination:d,insideDestination:p,last:a.displaced,viewport:o,afterCritical:s})},ae=function(t,e){var n;return Object(o.a)({},t,((n={})[e.descriptor.id]=e,n))},oe=function(t){var e=t.previousImpact,n=t.impact,r=t.droppables,i=Jt(e),a=Jt(n);if(!i)return r;if(i===a)return r;var s=r[i];if(!s.subject.withPlaceholder)return r;var c=function(t){var e=t.subject.withPlaceholder;e||I(!1);var n=t.frame;if(!n){var r=tt({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Object(o.a)({},t,{subject:r})}var i=e.oldFrameMaxScroll;i||I(!1);var a=Yt(n,i),s=tt({page:t.subject.page,axis:t.axis,frame:a,withPlaceholder:null});return Object(o.a)({},t,{subject:s,frame:a})}(s);return ae(r,c)},se=function(t){var e=t.state,n=t.clientSelection,r=t.dimensions,i=t.viewport,a=t.impact,s=t.scrollJumpRequest,c=i||e.viewport,l=r||e.dimensions,u=n||e.current.client.selection,h=G(u,e.initial.client.selection),d={offset:h,selection:u,borderBoxCenter:H(e.initial.client.borderBoxCenter,h)},p={selection:H(d.selection,c.scroll.current),borderBoxCenter:H(d.borderBoxCenter,c.scroll.current),offset:H(d.offset,c.scroll.diff.value)},f={client:d,page:p};if("COLLECTING"===e.phase)return Object(o.a)({phase:"COLLECTING"},e,{dimensions:l,viewport:c,current:f});var g=l.draggables[e.critical.draggable.id],m=a||ie({pageOffset:p.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:c,afterCritical:e.afterCritical}),v=function(t){var e=t.draggable,n=t.draggables,r=t.droppables,i=t.previousImpact,a=t.impact,o=oe({previousImpact:i,impact:a,droppables:r}),s=Jt(a);if(!s)return o;var c=r[s];if(ft(e,c))return o;if(c.subject.withPlaceholder)return o;var l=Xt(c,e,n);return ae(o,l)}({draggable:g,impact:m,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return Object(o.a)({},e,{current:f,dimensions:{draggables:l.draggables,droppables:v},impact:m,viewport:c,scrollJumpRequest:s||null,forceShouldAnimate:!s&&null})};var ce=function(t){var e=t.impact,n=t.viewport,r=t.draggables,i=t.destination,a=t.forceShouldAnimate,s=e.displaced,c=St({afterDragging:function(t,e){return t.map((function(t){return e[t]}))}(s.all,r),destination:i,displacedBy:e.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:s});return Object(o.a)({},e,{displaced:c})},le=function(t){var e=t.impact,n=t.draggable,r=t.droppable,i=t.draggables,a=t.viewport,o=t.afterCritical,s=Bt({impact:e,draggable:n,draggables:i,droppable:r,afterCritical:o});return Ut({pageBorderBoxCenter:s,draggable:n,viewport:a})},ue=function(t){var e=t.state,n=t.dimensions,r=t.viewport;"SNAP"!==e.movementMode&&I(!1);var i=e.impact,a=r||e.viewport,o=n||e.dimensions,s=o.draggables,c=o.droppables,l=s[e.critical.draggable.id],u=Jt(i);u||I(!1);var h=c[u],d=ce({impact:i,viewport:a,destination:h,draggables:s}),p=le({impact:d,draggable:l,droppable:h,draggables:s,viewport:a,afterCritical:e.afterCritical});return se({impact:d,clientSelection:p,state:e,dimensions:o,viewport:a})},he=function(t){var e=t.draggable,n=t.home,r=t.draggables,i=t.viewport,a=Wt(n.axis,e.displaceBy),o=ut(n.descriptor.id,r),s=o.indexOf(e);-1===s&&I(!1);var c,l=o.slice(s+1),u=l.reduce((function(t,e){return t[e.descriptor.id]=!0,t}),{}),h={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:a,effected:u};return{impact:{displaced:St({afterDragging:l,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(c=e.descriptor,{index:c.index,droppableId:c.droppableId})}},afterCritical:h}},de=function(t){0},pe=function(t){0},fe=function(t){var e=t.additions,n=t.updatedDroppables,r=t.viewport,i=r.scroll.diff.value;return e.map((function(t){var e=t.descriptor.droppableId,a=function(t){var e=t.frame;return e||I(!1),e}(n[e]).scroll.diff.value;return function(t){var e=t.draggable,n=t.offset,r=t.initialWindowScroll,i=y(e.client,n),a=_(i,r);return Object(o.a)({},e,{placeholder:Object(o.a)({},e.placeholder,{client:i}),client:i,page:a})}({draggable:t,offset:H(i,a),initialWindowScroll:r.scroll.initial})}))},ge=function(t){return"SNAP"===t.movementMode},me=function(t,e,n){var r=function(t,e){return{draggables:t.draggables,droppables:ae(t.droppables,e)}}(t.dimensions,e);return!ge(t)||n?se({state:t,dimensions:r}):ue({state:t,dimensions:r})};function ve(t){return t.isDragging&&"SNAP"===t.movementMode?Object(o.a)({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var be={phase:"IDLE",completed:null,shouldFlush:!1},ye=function(t,e){if(void 0===t&&(t=be),"FLUSH"===e.type)return Object(o.a)({},be,{shouldFlush:!0});if("INITIAL_PUBLISH"===e.type){"IDLE"!==t.phase&&I(!1);var n=e.payload,r=n.critical,i=n.clientSelection,a=n.viewport,s=n.dimensions,c=n.movementMode,l=s.draggables[r.draggable.id],u=s.droppables[r.droppable.id],h={selection:i,borderBoxCenter:l.client.borderBox.center,offset:q},d={client:h,page:{selection:H(h.selection,a.scroll.initial),borderBoxCenter:H(h.selection,a.scroll.initial),offset:H(h.selection,a.scroll.diff.value)}},p=ct(s.droppables).every((function(t){return!t.isFixedOnPage})),f=he({draggable:l,home:u,draggables:s.draggables,viewport:a}),g=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:c,dimensions:s,initial:d,current:d,isWindowScrollAllowed:p,impact:g,afterCritical:f.afterCritical,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===e.type)return"COLLECTING"===t.phase||"DROP_PENDING"===t.phase?t:("DRAGGING"!==t.phase&&I(!1),Object(o.a)({phase:"COLLECTING"},t,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===e.type)return"COLLECTING"!==t.phase&&"DROP_PENDING"!==t.phase&&I(!1),function(t){var e=t.state,n=t.published;de();var r=n.modified.map((function(t){var n=e.dimensions.droppables[t.droppableId];return et(n,t.scroll)})),i=Object(o.a)({},e.dimensions.droppables,{},ot(r)),a=st(fe({additions:n.additions,updatedDroppables:i,viewport:e.viewport})),s=Object(o.a)({},e.dimensions.draggables,{},a);n.removals.forEach((function(t){delete s[t]}));var c={droppables:i,draggables:s},l=Jt(e.impact),u=l?c.droppables[l]:null,h=c.draggables[e.critical.draggable.id],d=c.droppables[e.critical.droppable.id],p=he({draggable:h,home:d,draggables:s,viewport:e.viewport}),f=p.impact,g=p.afterCritical,m=u&&u.isCombineEnabled?e.impact:f,v=ie({pageOffset:e.current.page.offset,draggable:c.draggables[e.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:m,viewport:e.viewport,afterCritical:g});pe();var b=Object(o.a)({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:c,afterCritical:g,forceShouldAnimate:!1});return"COLLECTING"===e.phase?b:Object(o.a)({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1})}({state:t,published:e.payload});if("MOVE"===e.type){if("DROP_PENDING"===t.phase)return t;Qt(t)||I(!1);var m=e.payload.client;return z(m,t.current.client.selection)?t:se({state:t,clientSelection:m,impact:ge(t)?t.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===e.type){if("DROP_PENDING"===t.phase)return ve(t);if("COLLECTING"===t.phase)return ve(t);Qt(t)||I(!1);var v=e.payload,b=v.id,y=v.newScroll,_=t.dimensions.droppables[b];if(!_)return t;var w=et(_,y);return me(t,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===e.type){if("DROP_PENDING"===t.phase)return t;Qt(t)||I(!1);var x=e.payload,C=x.id,A=x.isEnabled,O=t.dimensions.droppables[C];O||I(!1),O.isEnabled===A&&I(!1);var S=Object(o.a)({},O,{isEnabled:A});return me(t,S,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===e.type){if("DROP_PENDING"===t.phase)return t;Qt(t)||I(!1);var M=e.payload,E=M.id,k=M.isCombineEnabled,T=t.dimensions.droppables[E];T||I(!1),T.isCombineEnabled===k&&I(!1);var D=Object(o.a)({},T,{isCombineEnabled:k});return me(t,D,!0)}if("MOVE_BY_WINDOW_SCROLL"===e.type){if("DROP_PENDING"===t.phase||"DROP_ANIMATING"===t.phase)return t;Qt(t)||I(!1),t.isWindowScrollAllowed||I(!1);var N=e.payload.newScroll;if(z(t.viewport.scroll.current,N))return ve(t);var j=Ft(t.viewport,N);return ge(t)?ue({state:t,viewport:j}):se({state:t,viewport:j})}if("UPDATE_VIEWPORT_MAX_SCROLL"===e.type){if(!Qt(t))return t;var P=e.payload.maxScroll;if(z(P,t.viewport.scroll.max))return t;var L=Object(o.a)({},t.viewport,{scroll:Object(o.a)({},t.viewport.scroll,{max:P})});return Object(o.a)({phase:"DRAGGING"},t,{viewport:L})}if("MOVE_UP"===e.type||"MOVE_DOWN"===e.type||"MOVE_LEFT"===e.type||"MOVE_RIGHT"===e.type){if("COLLECTING"===t.phase||"DROP_PENDING"===t.phase)return t;"DRAGGING"!==t.phase&&I(!1);var R=Kt({state:t,type:e.type});return R?se({state:t,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):t}if("DROP_PENDING"===e.type){var B=e.payload.reason;return"COLLECTING"!==t.phase&&I(!1),Object(o.a)({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:B})}if("DROP_ANIMATE"===e.type){var F=e.payload,$=F.completed,U=F.dropDuration,G=F.newHomeClientOffset;return"DRAGGING"!==t.phase&&"DROP_PENDING"!==t.phase&&I(!1),{phase:"DROP_ANIMATING",completed:$,dropDuration:U,newHomeClientOffset:G,dimensions:t.dimensions}}return"DROP_COMPLETE"===e.type?{phase:"IDLE",completed:e.payload.completed,shouldFlush:!1}:t},_e=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},we=function(){return{type:"COLLECTION_STARTING",payload:null}},xe=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Ce=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},Ae=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},Oe=function(t){return{type:"MOVE",payload:t}},Se=function(){return{type:"MOVE_UP",payload:null}},Me=function(){return{type:"MOVE_DOWN",payload:null}},Ee=function(){return{type:"MOVE_RIGHT",payload:null}},ke=function(){return{type:"MOVE_LEFT",payload:null}},Te=function(t){return{type:"DROP_COMPLETE",payload:t}},De=function(t){return{type:"DROP",payload:t}},Ie=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Ne="cubic-bezier(.2,1,.1,1)",je={drop:0,combining:.7},Pe={drop:.75},Le=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Re={fluid:"opacity "+Le,snap:"transform "+Le+", opacity "+Le,drop:function(t){var e=t+"s "+Ne;return"transform "+e+", opacity "+e},outOfTheWay:"transform "+Le,placeholder:"height "+Le+", width "+Le+", margin "+Le},Be=function(t){return z(t,q)?null:"translate("+t.x+"px, "+t.y+"px)"},Fe=Be,$e=function(t,e){var n=Be(t);return n?e?n+" scale("+Pe.drop+")":n:null},Ue=.33,qe=.55,He=qe-Ue,Ge=function(t){var e=t.getState,n=t.dispatch;return function(t){return function(r){if("DROP"===r.type){var i=e(),a=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&I(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&I(!1);var s=i.critical,c=i.dimensions,l=c.draggables[i.critical.draggable.id],u=function(t){var e=t.draggables,n=t.reason,r=t.lastImpact,i=t.home,a=t.viewport,s=t.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:Object(o.a)({},r,{displaced:mt}),didDropInsideDroppable:!0}:{impact:ce({draggables:e,impact:s,destination:i,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=u.impact,d=u.didDropInsideDroppable,p=d?ht(h):null,f=d?dt(h):null,g={index:s.draggable.index,droppableId:s.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:g,reason:a,mode:i.movementMode,destination:p,combine:f},v=function(t){var e=t.impact,n=t.draggable,r=t.dimensions,i=t.viewport,a=t.afterCritical,o=r.draggables,s=r.droppables,c=Jt(e),l=c?s[c]:null,u=s[n.descriptor.droppableId],h=le({impact:e,draggable:n,draggables:o,afterCritical:a,droppable:l||u,viewport:i});return G(h,n.client.borderBox.center)}({impact:h,draggable:l,dimensions:c,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:h};if(!z(i.current.client.offset,v)||Boolean(m.combine)){var y=function(t){var e=t.current,n=t.destination,r=t.reason,i=Y(e,n);if(i<=0)return Ue;if(i>=1500)return qe;var a=Ue+He*(i/1500);return Number(("CANCEL"===r?.6*a:a).toFixed(2))}({current:i.current.client.offset,destination:v,reason:a});n(function(t){return{type:"DROP_ANIMATE",payload:t}}({newHomeClientOffset:v,dropDuration:y,completed:b}))}else n(Te({completed:b}))}}else n(function(t){return{type:"DROP_PENDING",payload:t}}({reason:a}))}else t(r)}}},ze=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Ve(t){var e=t.onWindowScroll;var n,r=O((function(){e(ze())})),i=(n=r,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||n()}}),a=k;function o(){return a!==k}return{start:function(){o()&&I(!1),a=T(window,[i])},stop:function(){o()||I(!1),r.cancel(),a(),a=k},isActive:o}}var We=function(t){var e=Ve({onWindowScroll:function(e){t.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:e}})}});return function(t){return function(n){e.isActive()||"INITIAL_PUBLISH"!==n.type||e.start(),e.isActive()&&function(t){return"DROP_COMPLETE"===t.type||"DROP_ANIMATE"===t.type||"FLUSH"===t.type}(n)&&e.stop(),t(n)}}},Ye=function(){var t=[];return{add:function(e){var n=setTimeout((function(){return function(e){var n=rt(t,(function(t){return t.timerId===e}));-1===n&&I(!1),t.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:e};t.push(r)},flush:function(){if(t.length){var e=[].concat(t);t.length=0,e.forEach((function(t){clearTimeout(t.timerId),t.callback()}))}}}},Xe=function(t,e){de(),e(),pe()},Ze=function(t,e){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e}},Je=function(t,e,n,r){if(t){var i=function(t){var e=!1,n=!1,r=setTimeout((function(){n=!0})),i=function(i){e||n||(e=!0,t(i),clearTimeout(r))};return i.wasCalled=function(){return e},i}(n);t(e,{announce:i}),i.wasCalled()||n(r(e))}else n(r(e))},Ke=function(t,e){var n=function(t,e){var n=Ye(),r=null,i=function(n){r||I(!1),r=null,Xe(0,(function(){return Je(t().onDragEnd,n,e,U)}))};return{beforeCapture:function(e,n){r&&I(!1),Xe(0,(function(){var r=t().onBeforeCapture;r&&r({draggableId:e,mode:n})}))},beforeStart:function(e,n){r&&I(!1),Xe(0,(function(){var r=t().onBeforeDragStart;r&&r(Ze(e,n))}))},start:function(i,a){r&&I(!1);var o=Ze(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add((function(){Xe(0,(function(){return Je(t().onDragStart,o,e,F)}))}))},update:function(i,a){var s=ht(a),c=dt(a);r||I(!1);var l=!function(t,e){if(t===e)return!0;var n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r}(i,r.lastCritical);l&&(r.lastCritical=i);var u,h,d=(u=r.lastLocation,h=s,!(null==u&&null==h||null!=u&&null!=h&&u.droppableId===h.droppableId&&u.index===h.index));d&&(r.lastLocation=s);var p=!function(t,e){return null==t&&null==e||null!=t&&null!=e&&(t.draggableId===e.draggableId&&t.droppableId===e.droppableId)}(r.lastCombine,c);if(p&&(r.lastCombine=c),l||d||p){var f=Object(o.a)({},Ze(i,r.mode),{combine:c,destination:s});n.add((function(){Xe(0,(function(){return Je(t().onDragUpdate,f,e,$)}))}))}},flush:function(){r||I(!1),n.flush()},drop:i,abort:function(){if(r){var t=Object(o.a)({},Ze(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(t)}}}}(t,e);return function(t){return function(e){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),e(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var a=r.payload.completed.result;return n.flush(),e(r),void n.drop(a)}if(e(r),"FLUSH"!==r.type){var o=t.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},Qe=function(t){return function(e){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=t.getState();"DROP_ANIMATING"!==r.phase&&I(!1),t.dispatch(Te({completed:r.completed}))}else e(n)}}},tn=function(t){var e=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)),r(i),"DROP_ANIMATE"===i.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===t.getState().phase&&t.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,e=T(window,[a])}))}}}},en=function(t){return function(e){return function(n){if(e(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=t.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||t.dispatch(De({reason:r.reason})))}}}},nn=s.d,rn=function(t){var e,n=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,a=t.getResponders,o=t.announce,c=t.autoScroller;return Object(s.e)(ye,nn(Object(s.a)((e=i,function(){return function(t){return function(n){"INITIAL_PUBLISH"===n.type&&e.dragging(),"DROP_ANIMATE"===n.type&&e.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||e.resting(),t(n)}}}),function(t){return function(){return function(e){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||t.stopPublishing(),e(n)}}}}(n),function(t){return function(e){var n=e.getState,r=e.dispatch;return function(e){return function(i){if("LIFT"===i.type){var a=i.payload,o=a.id,s=a.clientSelection,c=a.movementMode,l=n();"DROP_ANIMATING"===l.phase&&r(Te({completed:l.completed})),"IDLE"!==n().phase&&I(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:c}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===c}},h=t.startPublishing(u),d=h.critical,p=h.dimensions,f=h.viewport;r(function(t){return{type:"INITIAL_PUBLISH",payload:t}}({critical:d,dimensions:p,clientSelection:s,movementMode:c,viewport:f}))}else e(i)}}}}(n),Ge,Qe,tn,en,function(t){return function(e){return function(n){return function(r){if(function(t){return"DROP_COMPLETE"===t.type||"DROP_ANIMATE"===t.type||"FLUSH"===t.type}(r))return t.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=e.getState();return"DRAGGING"!==i.phase&&I(!1),void t.start(i)}n(r),t.scroll(e.getState())}}}}(c),We,function(t){var e=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),void t.tryRestoreFocusRecorded();if(n(r),e){if("FLUSH"===r.type)return e=!1,void t.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){e=!1;var i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}}(r),Ke(a,o))))};var an=function(t){var e=t.scrollHeight,n=t.scrollWidth,r=t.height,i=t.width,a=G({x:n,y:e},{x:i,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},on=function(){var t=document.documentElement;return t||I(!1),t},sn=function(){var t=on();return an({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},cn=function(t){var e=t.critical,n=t.scrollOptions,r=t.registry;de();var i,a,o,s,c,l,u,h=(i=ze(),a=sn(),o=i.y,s=i.x,c=on(),l=c.clientWidth,u=c.clientHeight,{frame:p({top:o,left:s,right:s+l,bottom:o+u}),scroll:{initial:i,current:i,max:a,diff:{value:q,displacement:q}}}),d=h.scroll.current,f=e.droppable,g=r.droppable.getAllByType(f.type).map((function(t){return t.callbacks.getDimensionAndWatchScroll(d,n)})),m=r.draggable.getAllByType(e.draggable.type).map((function(t){return t.getDimension(d)})),v={draggables:st(m),droppables:ot(g)};return pe(),{dimensions:v,critical:e,viewport:h}};function ln(t,e,n){return n.descriptor.id!==e.id&&(n.descriptor.type===e.type&&"virtual"===t.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var un,hn,dn=function(t,e){var n=null,r=function(t){var e=t.registry,n=t.callbacks,r={additions:{},removals:{},modified:{}},i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame((function(){i=null,de();var t=r,a=t.additions,o=t.removals,s=t.modified,c=Object.keys(a).map((function(t){return e.draggable.getById(t).getDimension(q)})).sort((function(t,e){return t.descriptor.index-e.descriptor.index})),l=Object.keys(s).map((function(t){return{droppableId:t,scroll:e.droppable.getById(t).callbacks.getScrollWhileDragging()}})),u={additions:c,removals:Object.keys(o),modified:l};r={additions:{},removals:{},modified:{}},pe(),n.publish(u)})))};return{add:function(t){var e=t.descriptor.id;r.additions[e]=t,r.modified[t.descriptor.droppableId]=!0,r.removals[e]&&delete r.removals[e],a()},remove:function(t){var e=t.descriptor;r.removals[e.id]=!0,r.modified[e.droppableId]=!0,r.additions[e.id]&&delete r.additions[e.id],a()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=function(e){n||I(!1);var i=n.critical.draggable;"ADDITION"===e.type&&ln(t,i,e.value)&&r.add(e.value),"REMOVAL"===e.type&&ln(t,i,e.value)&&r.remove(e.value)};return{updateDroppableIsEnabled:function(r,i){t.droppable.exists(r)||I(!1),n&&e.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(t.droppable.exists(r)||I(!1),e.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(e,r){n&&t.droppable.getById(e).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(t.droppable.exists(r)||I(!1),e.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(e){n&&I(!1);var r=t.draggable.getById(e.draggableId),a=t.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:a.descriptor},s=t.subscribe(i);return n={critical:o,unsubscribe:s},cn({critical:o,registry:t,scrollOptions:e.scrollOptions})},stopPublishing:function(){if(n){r.stop();var e=n.critical.droppable;t.droppable.getAllByType(e.type).forEach((function(t){return t.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},pn=function(t,e){return"IDLE"===t.phase||"DROP_ANIMATING"===t.phase&&(t.completed.result.draggableId!==e&&"DROP"===t.completed.result.reason)},fn=function(t){window.scrollBy(t.x,t.y)},gn=A((function(t){return ct(t).filter((function(t){return!!t.isEnabled&&!!t.frame}))})),mn=function(t){var e=t.center,n=t.destination,r=t.droppables;if(n){var i=r[n];return i.frame?i:null}return function(t,e){return it(gn(e),(function(e){return e.frame||I(!1),te(e.frame.pageMarginBox)(t)}))}(e,r)},vn=.25,bn=.05,yn=28,_n=function(t){return Math.pow(t,2)},wn={stopDampeningAt:1200,accelerateAt:360},xn=function(t){var e=t.startOfRange,n=t.endOfRange,r=t.current,i=n-e;return 0===i?0:(r-e)/i},Cn=wn.accelerateAt,An=wn.stopDampeningAt,On=function(t){var e=t.distanceToEdge,n=t.thresholds,r=t.dragStartTime,i=t.shouldUseTimeDampening,a=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return yn;if(t===e.startScrollingFrom)return 1;var n=xn({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),r=yn*_n(1-n);return Math.ceil(r)}(e,n);return 0===a?0:i?Math.max(function(t,e){var n=e,r=An,i=Date.now()-n;if(i>=An)return t;if(i<Cn)return 1;var a=xn({startOfRange:Cn,endOfRange:r,current:i}),o=t*_n(a);return Math.ceil(o)}(a,r),1):a},Sn=function(t){var e=t.container,n=t.distanceToEdges,r=t.dragStartTime,i=t.axis,a=t.shouldUseTimeDampening,o=function(t,e){return{startScrollingFrom:t[e.size]*vn,maxScrollValueAt:t[e.size]*bn}}(e,i);return n[i.end]<n[i.start]?On({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*On({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})},Mn=Z((function(t){return 0===t?0:t})),En=function(t){var e=t.dragStartTime,n=t.container,r=t.subject,i=t.center,a=t.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=Sn({container:n,distanceToEdges:o,dragStartTime:e,axis:wt,shouldUseTimeDampening:a}),c=Sn({container:n,distanceToEdges:o,dragStartTime:e,axis:xt,shouldUseTimeDampening:a}),l=Mn({x:c,y:s});if(z(l,q))return null;var u=function(t){var e=t.container,n=t.subject,r=t.proposedScroll,i=n.height>e.height,a=n.width>e.width;return a||i?a&&i?null:{x:a?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:l});return u?z(u,q)?null:u:null},kn=Z((function(t){return 0===t?0:t>0?1:-1})),Tn=(un=function(t,e){return t<0?t:t>e?t-e:0},function(t){var e=t.current,n=t.max,r=t.change,i=H(e,r),a={x:un(i.x,n.x),y:un(i.y,n.y)};return z(a,q)?null:a}),Dn=function(t){var e=t.max,n=t.current,r=t.change,i={x:Math.max(n.x,e.x),y:Math.max(n.y,e.y)},a=kn(r),o=Tn({max:i,current:n,change:a});return!o||(0!==a.x&&0===o.x||0!==a.y&&0===o.y)},In=function(t,e){return Dn({current:t.scroll.current,max:t.scroll.max,change:e})},Nn=function(t,e){var n=t.frame;return!!n&&Dn({current:n.scroll.current,max:n.scroll.max,change:e})},jn=function(t){var e=t.state,n=t.dragStartTime,r=t.shouldUseTimeDampening,i=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,s=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){var c=function(t){var e=t.viewport,n=t.subject,r=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=En({dragStartTime:i,container:e.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&In(e,o)?o:null}({dragStartTime:n,viewport:e.viewport,subject:s,center:o,shouldUseTimeDampening:r});if(c)return void i(c)}var l=mn({center:o,destination:Jt(e.impact),droppables:e.dimensions.droppables});if(l){var u=function(t){var e=t.droppable,n=t.subject,r=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var s=En({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return s&&Nn(e,s)?s:null}({dragStartTime:n,droppable:l,subject:s,center:o,shouldUseTimeDampening:r});u&&a(l.descriptor.id,u)}},Pn=function(t){var e=t.move,n=t.scrollDroppable,r=t.scrollWindow,i=function(t,e){if(!Nn(t,e))return e;var r=function(t,e){var n=t.frame;return n&&Nn(t,e)?Tn({current:n.scroll.current,max:n.scroll.max,change:e}):null}(t,e);if(!r)return n(t.descriptor.id,e),null;var i=G(e,r);return n(t.descriptor.id,i),G(e,i)},a=function(t,e,n){if(!t)return n;if(!In(e,n))return n;var i=function(t,e){if(!In(t,e))return null;var n=t.scroll.max,r=t.scroll.current;return Tn({current:r,max:n,change:e})}(e,n);if(!i)return r(n),null;var a=G(n,i);return r(a),G(n,a)};return function(t){var n=t.scrollJumpRequest;if(n){var r=Jt(t.impact);r||I(!1);var o=i(t.dimensions.droppables[r],n);if(o){var s=t.viewport,c=a(t.isWindowScrollAllowed,s,o);c&&function(t,n){var r=H(t.current.client.selection,n);e({client:r})}(t,c)}}}},Ln=function(t){var e=t.scrollDroppable,n=t.scrollWindow,r=t.move,i=function(t){var e=t.scrollWindow,n=t.scrollDroppable,r=O(e),i=O(n),a=null,o=function(t){a||I(!1);var e=a,n=e.shouldUseTimeDampening,o=e.dragStartTime;jn({state:t,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(t){de(),a&&I(!1);var e=Date.now(),n=!1,r=function(){n=!0};jn({state:t,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),a={dragStartTime:e,shouldUseTimeDampening:n},pe(),n&&o(t)},stop:function(){a&&(r.cancel(),i.cancel(),a=null)},scroll:o}}({scrollWindow:n,scrollDroppable:e}),a=Pn({move:r,scrollWindow:n,scrollDroppable:e});return{scroll:function(t){"DRAGGING"===t.phase&&("FLUID"!==t.movementMode?t.scrollJumpRequest&&a(t):i.scroll(t))},start:i.start,stop:i.stop}},Rn={base:hn="data-rbd-drag-handle",draggableId:hn+"-draggable-id",contextId:hn+"-context-id"},Bn=function(){var t="data-rbd-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),Fn=function(){var t="data-rbd-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),$n={contextId:"data-rbd-scroll-container-context-id"},Un=function(t,e){return t.map((function(t){var n=t.styles[e];return n?t.selector+" { "+n+" }":""})).join(" ")},qn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect,Hn=function(){var t=document.querySelector("head");return t||I(!1),t},Gn=function(t){var e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function zn(t,e){var n=u((function(){return function(t){var e,n,r,i=(e=t,function(t){return"["+t+'="'+e+'"]'}),a=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(Rn.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),o=[(r="\n      transition: "+Re.outOfTheWay+";\n    ",{selector:i(Bn.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),a,{selector:i(Fn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Un(o,"always"),resting:Un(o,"resting"),dragging:Un(o,"dragging"),dropAnimating:Un(o,"dropAnimating"),userCancel:Un(o,"userCancel")}}(t)}),[t]),i=Object(r.useRef)(null),a=Object(r.useRef)(null),o=h(A((function(t){var e=a.current;e||I(!1),e.textContent=t})),[]),s=h((function(t){var e=i.current;e||I(!1),e.textContent=t}),[]);qn((function(){(i.current||a.current)&&I(!1);var r=Gn(e),c=Gn(e);return i.current=r,a.current=c,r.setAttribute("data-rbd-always",t),c.setAttribute("data-rbd-dynamic",t),Hn().appendChild(r),Hn().appendChild(c),s(n.always),o(n.resting),function(){var t=function(t){var e=t.current;e||I(!1),Hn().removeChild(e),t.current=null};t(i),t(a)}}),[e,s,o,n.always,n.resting,t]);var c=h((function(){return o(n.dragging)}),[o,n.dragging]),l=h((function(t){o("DROP"!==t?n.userCancel:n.dropAnimating)}),[o,n.dropAnimating,n.userCancel]),d=h((function(){a.current&&o(n.resting)}),[o,n.resting]);return u((function(){return{dragging:c,dropping:l,resting:d}}),[c,l,d])}var Vn=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function Wn(t){return t instanceof Vn(t).HTMLElement}function Yn(t,e){var n="["+Rn.contextId+'="'+t+'"]',r=at(document.querySelectorAll(n));if(!r.length)return null;var i=it(r,(function(t){return t.getAttribute(Rn.draggableId)===e}));return i&&Wn(i)?i:null}function Xn(){var t={draggables:{},droppables:{}},e=[];function n(t){e.length&&e.forEach((function(e){return e(t)}))}function r(e){return t.draggables[e]||null}function i(e){return t.droppables[e]||null}return{draggable:{register:function(e){t.draggables[e.descriptor.id]=e,n({type:"ADDITION",value:e})},update:function(e,n){var r=t.draggables[n.descriptor.id];r&&r.uniqueId===e.uniqueId&&(delete t.draggables[n.descriptor.id],t.draggables[e.descriptor.id]=e)},unregister:function(e){var i=e.descriptor.id,a=r(i);a&&e.uniqueId===a.uniqueId&&(delete t.draggables[i],n({type:"REMOVAL",value:e}))},getById:function(t){var e=r(t);return e||I(!1),e},findById:r,exists:function(t){return Boolean(r(t))},getAllByType:function(e){return nt(t.draggables).filter((function(t){return t.descriptor.type===e}))}},droppable:{register:function(e){t.droppables[e.descriptor.id]=e},unregister:function(e){var n=i(e.descriptor.id);n&&e.uniqueId===n.uniqueId&&delete t.droppables[e.descriptor.id]},getById:function(t){var e=i(t);return e||I(!1),e},findById:i,exists:function(t){return Boolean(i(t))},getAllByType:function(e){return nt(t.droppables).filter((function(t){return t.descriptor.type===e}))}},subscribe:function(t){return e.push(t),function(){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},clean:function(){t.draggables={},t.droppables={},e.length=0}}}var Zn=i.a.createContext(null),Jn=function(){var t=document.body;return t||I(!1),t},Kn={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Qn=0,tr={separator:"::"};function er(t,e){return void 0===e&&(e=tr),u((function(){return""+t+e.separator+Qn++}),[e.separator,t])}var nr=i.a.createContext(null);function rr(t){0}function ir(t,e){rr()}function ar(){ir()}function or(t){var e=Object(r.useRef)(t);return Object(r.useEffect)((function(){e.current=t})),e}var sr,cr=((sr={})[13]=!0,sr[9]=!0,sr),lr=function(t){cr[t.keyCode]&&t.preventDefault()},ur=function(){var t="visibilitychange";return"undefined"==typeof document?t:it([t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],(function(t){return"on"+t in document}))||t}();var hr,dr={type:"IDLE"};function pr(t){var e=t.cancel,n=t.completed,r=t.getPhase,i=t.setPhase;return[{eventName:"mousemove",fn:function(t){var e=t.button,n=t.clientX,a=t.clientY;if(0===e){var o={x:n,y:a},s=r();if("DRAGGING"===s.type)return t.preventDefault(),void s.actions.move(o);"PENDING"!==s.type&&I(!1);var c=s.point;if(l=c,u=o,Math.abs(u.x-l.x)>=5||Math.abs(u.y-l.y)>=5){var l,u;t.preventDefault();var h=s.actions.fluidLift(o);i({type:"DRAGGING",actions:h})}}}},{eventName:"mouseup",fn:function(t){var i=r();"DRAGGING"===i.type?(t.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):e()}},{eventName:"mousedown",fn:function(t){"DRAGGING"===r().type&&t.preventDefault(),e()}},{eventName:"keydown",fn:function(t){if("PENDING"!==r().type)return 27===t.keyCode?(t.preventDefault(),void e()):void lr(t);e()}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&e()}},{eventName:"webkitmouseforcedown",fn:function(t){var n=r();"IDLE"===n.type&&I(!1),n.actions.shouldRespectForcePress()?e():t.preventDefault()}},{eventName:ur,fn:e}]}function fr(){}var gr=((hr={})[34]=!0,hr[33]=!0,hr[36]=!0,hr[35]=!0,hr);function mr(t,e){function n(){e(),t.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),e(),void t.drop()):40===r.keyCode?(r.preventDefault(),void t.moveDown()):38===r.keyCode?(r.preventDefault(),void t.moveUp()):39===r.keyCode?(r.preventDefault(),void t.moveRight()):37===r.keyCode?(r.preventDefault(),void t.moveLeft()):void(gr[r.keyCode]?r.preventDefault():lr(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:ur,fn:n}]}var vr={type:"IDLE"};var br={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function yr(t,e){var n=e.target;return!!Wn(n)&&function t(e,n){if(null==n)return!1;if(Boolean(br[n.tagName.toLowerCase()]))return!0;var r=n.getAttribute("contenteditable");return"true"===r||""===r||n!==e&&t(e,n.parentElement)}(t,n)}var _r=function(t){return p(t.getBoundingClientRect()).center};var wr="undefined"==typeof document?"matches":it(["matches","msMatchesSelector","webkitMatchesSelector"],(function(t){return t in Element.prototype}))||"matches";function xr(t,e){return t.closest?t.closest(e):function t(e,n){return null==e?null:e[wr](n)?e:t(e.parentElement,n)}(t,e)}function Cr(t,e){var n,r=e.target;if(!((n=r)instanceof Vn(n).Element))return null;var i=xr(r,function(t){return"["+Rn.contextId+'="'+t+'"]'}(t));return i&&Wn(i)?i:null}function Ar(t){t.preventDefault()}function Or(t){var e=t.expected,n=t.phase,r=t.isLockActive;t.shouldWarn;return!!r()&&e===n}function Sr(t){var e=t.lockAPI,n=t.store,r=t.registry,i=t.draggableId;if(e.isClaimed())return!1;var a=r.draggable.findById(i);return!!a&&(!!a.options.isEnabled&&!!pn(n.getState(),i))}function Mr(t){var e=t.lockAPI,n=t.contextId,r=t.store,i=t.registry,a=t.draggableId,s=t.forceSensorStop,c=t.sourceEvent;if(!Sr({lockAPI:e,store:r,registry:i,draggableId:a}))return null;var l=i.draggable.getById(a),u=function(t,e){var n="["+Bn.contextId+'="'+t+'"]',r=it(at(document.querySelectorAll(n)),(function(t){return t.getAttribute(Bn.id)===e}));return r&&Wn(r)?r:null}(n,l.descriptor.id);if(!u)return null;if(c&&!l.options.canDragInteractiveElements&&yr(u,c))return null;var h=e.claim(s||k),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function f(){return e.isActive(h)}var g=function(t,e){Or({expected:t,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(e())}.bind(null,"DRAGGING");function m(t){function n(){e.release(),d="COMPLETED"}function i(e,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),t.cleanup(),i.shouldBlockNextClick){var a=T(window,[{eventName:"click",fn:Ar,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}n(),r.dispatch(De({reason:e}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&I(!1)),r.dispatch(function(t){return{type:"LIFT",payload:t}}(t.liftActionArgs)),d="DRAGGING",Object(o.a)({isActive:function(){return Or({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(t){return i("DROP",t)},cancel:function(t){return i("CANCEL",t)}},t.actions)}return{isActive:function(){return Or({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(t){var e=O((function(t){g((function(){return Oe({client:t})}))})),n=m({liftActionArgs:{id:a,clientSelection:t,movementMode:"FLUID"},cleanup:function(){return e.cancel()},actions:{move:e}});return Object(o.a)({},n,{move:e})},snapLift:function(){var t={moveUp:function(){return g(Se)},moveRight:function(){return g(Ee)},moveDown:function(){return g(Me)},moveLeft:function(){return g(ke)}};return m({liftActionArgs:{id:a,clientSelection:_r(u),movementMode:"SNAP"},cleanup:k,actions:t})},abort:function(){Or({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&e.release()}}}var Er=[function(t){var e=Object(r.useRef)(dr),n=Object(r.useRef)(k),i=u((function(){return{eventName:"mousedown",fn:function(e){if(!e.defaultPrevented&&0===e.button&&!(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)){var r=t.findClosestDraggableId(e);if(r){var i=t.tryGetLock(r,s,{sourceEvent:e});if(i){e.preventDefault();var a={x:e.clientX,y:e.clientY};n.current(),d(i,a)}}}}}}),[t]),a=u((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(e){if(!e.defaultPrevented){var n=t.findClosestDraggableId(e);if(n){var r=t.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||t.canGetLock(n)&&e.preventDefault())}}}}}),[t]),o=h((function(){n.current=T(window,[a,i],{passive:!1,capture:!0})}),[a,i]),s=h((function(){"IDLE"!==e.current.type&&(e.current=dr,n.current(),o())}),[o]),c=h((function(){var t=e.current;s(),"DRAGGING"===t.type&&t.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===t.type&&t.actions.abort()}),[s]),l=h((function(){var t=pr({cancel:c,completed:s,getPhase:function(){return e.current},setPhase:function(t){e.current=t}});n.current=T(window,t,{capture:!0,passive:!1})}),[c,s]),d=h((function(t,n){"IDLE"!==e.current.type&&I(!1),e.current={type:"PENDING",point:n,actions:t},l()}),[l]);qn((function(){return o(),function(){n.current()}}),[o])},function(t){var e=Object(r.useRef)(fr),n=u((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=t.findClosestDraggableId(n);if(r){var a=t.tryGetLock(r,c,{sourceEvent:n});if(a){n.preventDefault();var o=!0,s=a.snapLift();e.current(),e.current=T(window,mr(s,c),{capture:!0,passive:!1})}}}function c(){o||I(!1),o=!1,e.current(),i()}}}}),[t]),i=h((function(){e.current=T(window,[n],{passive:!1,capture:!0})}),[n]);qn((function(){return i(),function(){e.current()}}),[i])},function(t){var e=Object(r.useRef)(vr),n=Object(r.useRef)(k),i=h((function(){return e.current}),[]),a=h((function(t){e.current=t}),[]),o=u((function(){return{eventName:"touchstart",fn:function(e){if(!e.defaultPrevented){var r=t.findClosestDraggableId(e);if(r){var i=t.tryGetLock(r,c,{sourceEvent:e});if(i){var a=e.touches[0],o={x:a.clientX,y:a.clientY};n.current(),f(i,o)}}}}}}),[t]),s=h((function(){n.current=T(window,[o],{capture:!0,passive:!1})}),[o]),c=h((function(){var t=e.current;"IDLE"!==t.type&&("PENDING"===t.type&&clearTimeout(t.longPressTimerId),a(vr),n.current(),s())}),[s,a]),l=h((function(){var t=e.current;c(),"DRAGGING"===t.type&&t.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===t.type&&t.actions.abort()}),[c]),d=h((function(){var t={capture:!0,passive:!1},e={cancel:l,completed:c,getPhase:i},r=T(window,function(t){var e=t.cancel,n=t.completed,r=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(t){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=t.touches[0],a={x:i.clientX,y:i.clientY};t.preventDefault(),n.actions.move(a)}else e()}},{eventName:"touchend",fn:function(t){var i=r();"DRAGGING"===i.type?(t.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):e()}},{eventName:"touchcancel",fn:function(t){"DRAGGING"===r().type?(t.preventDefault(),e()):e()}},{eventName:"touchforcechange",fn:function(t){var n=r();"IDLE"===n.type&&I(!1);var i=t.touches[0];if(i&&i.force>=.15){var a=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return a?n.hasMoved?void t.preventDefault():void e():void t.preventDefault();a&&e()}}},{eventName:ur,fn:e}]}(e),t),a=T(window,function(t){var e=t.cancel,n=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(t){t.preventDefault()}},{eventName:"keydown",fn:function(t){"DRAGGING"===n().type?(27===t.keyCode&&t.preventDefault(),e()):e()}},{eventName:ur,fn:e}]}(e),t);n.current=function(){r(),a()}}),[l,i,c]),p=h((function(){var t=i();"PENDING"!==t.type&&I(!1);var e=t.actions.fluidLift(t.point);a({type:"DRAGGING",actions:e,hasMoved:!1})}),[i,a]),f=h((function(t,e){"IDLE"!==i().type&&I(!1);var n=setTimeout(p,120);a({type:"PENDING",point:e,actions:t,longPressTimerId:n}),d()}),[d,i,a,p]);qn((function(){return s(),function(){n.current();var t=i();"PENDING"===t.type&&(clearTimeout(t.longPressTimerId),a(vr))}}),[i,s,a]),qn((function(){return T(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function kr(t){var e=t.contextId,n=t.store,i=t.registry,a=t.customSensors,o=t.enableDefaultSensors,s=[].concat(o?Er:[],a||[]),c=Object(r.useState)((function(){return function(){var t=null;function e(){t||I(!1),t=null}return{isClaimed:function(){return Boolean(t)},isActive:function(e){return e===t},claim:function(e){t&&I(!1);var n={abandon:e};return t=n,n},release:e,tryAbandon:function(){t&&(t.abandon(),e())}}}()}))[0],l=h((function(t,e){t.isDragging&&!e.isDragging&&c.tryAbandon()}),[c]);qn((function(){var t=n.getState();return n.subscribe((function(){var e=n.getState();l(t,e),t=e}))}),[c,n,l]),qn((function(){return c.tryAbandon}),[c.tryAbandon]);var d=h((function(t){return Sr({lockAPI:c,registry:i,store:n,draggableId:t})}),[c,i,n]),p=h((function(t,r,a){return Mr({lockAPI:c,registry:i,contextId:e,store:n,draggableId:t,forceSensorStop:r,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})}),[e,c,i,n]),f=h((function(t){return function(t,e){var n=Cr(t,e);return n?n.getAttribute(Rn.draggableId):null}(e,t)}),[e]),g=h((function(t){var e=i.draggable.findById(t);return e?e.options:null}),[i.draggable]),m=h((function(){c.isClaimed()&&(c.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))}),[c,n]),v=h(c.isClaimed,[c]),b=u((function(){return{canGetLock:d,tryGetLock:p,findClosestDraggableId:f,findOptionsForDraggable:g,tryReleaseLock:m,isLockClaimed:v}}),[d,p,f,g,m,v]);rr();for(var y=0;y<s.length;y++)s[y](b)}function Tr(t){return t.current||I(!1),t.current}function Dr(t){var e=t.contextId,n=t.setCallbacks,a=t.sensors,l=t.nonce,d=t.dragHandleUsageInstructions,p=Object(r.useRef)(null);ar();var f=or(t),g=h((function(){return function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}}(f.current)}),[f]),m=function(t){var e=u((function(){return function(t){return"rbd-announcement-"+t}(t)}),[t]),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){var t=document.createElement("div");return n.current=t,t.id=e,t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),Object(o.a)(t.style,Kn),Jn().appendChild(t),function(){setTimeout((function(){var e=Jn();e.contains(t)&&e.removeChild(t),t===n.current&&(n.current=null)}))}}),[e]),h((function(t){var e=n.current;e&&(e.textContent=t)}),[])}(e),v=function(t){var e=t.contextId,n=t.text,i=er("hidden-text",{separator:"-"}),a=u((function(){return"rbd-hidden-text-"+(t={contextId:e,uniqueId:i}).contextId+"-"+t.uniqueId;var t}),[i,e]);return Object(r.useEffect)((function(){var t=document.createElement("div");return t.id=a,t.textContent=n,t.style.display="none",Jn().appendChild(t),function(){var e=Jn();e.contains(t)&&e.removeChild(t)}}),[a,n]),a}({contextId:e,text:d}),b=zn(e,l),y=h((function(t){Tr(p).dispatch(t)}),[]),_=u((function(){return Object(s.b)({publishWhileDragging:_e,updateDroppableScroll:xe,updateDroppableIsEnabled:Ce,updateDroppableIsCombineEnabled:Ae,collectionStarting:we},y)}),[y]),w=function(){var t=u(Xn,[]);return Object(r.useEffect)((function(){return function(){requestAnimationFrame(t.clean)}}),[t]),t}(),x=u((function(){return dn(w,_)}),[w,_]),C=u((function(){return Ln(Object(o.a)({scrollWindow:fn,scrollDroppable:x.scrollDroppable},Object(s.b)({move:Oe},y)))}),[x.scrollDroppable,y]),A=function(t){var e=Object(r.useRef)({}),n=Object(r.useRef)(null),i=Object(r.useRef)(null),a=Object(r.useRef)(!1),o=h((function(t,n){var r={id:t,focus:n};return e.current[t]=r,function(){var n=e.current;n[t]!==r&&delete n[t]}}),[]),s=h((function(e){var n=Yn(t,e);n&&n!==document.activeElement&&n.focus()}),[t]),c=h((function(t,e){n.current===t&&(n.current=e)}),[]),l=h((function(){i.current||a.current&&(i.current=requestAnimationFrame((function(){i.current=null;var t=n.current;t&&s(t)})))}),[s]),d=h((function(t){n.current=null;var e=document.activeElement;e&&e.getAttribute(Rn.draggableId)===t&&(n.current=t)}),[]);return qn((function(){return a.current=!0,function(){a.current=!1;var t=i.current;t&&cancelAnimationFrame(t)}}),[]),u((function(){return{register:o,tryRecordFocus:d,tryRestoreFocusRecorded:l,tryShiftRecord:c}}),[o,d,l,c])}(e),O=u((function(){return rn({announce:m,autoScroller:C,dimensionMarshal:x,focusMarshal:A,getResponders:g,styleMarshal:b})}),[m,C,x,A,g,b]);p.current=O;var S=h((function(){var t=Tr(p);"IDLE"!==t.getState().phase&&t.dispatch({type:"FLUSH",payload:null})}),[]),M=h((function(){var t=Tr(p).getState();return t.isDragging||"DROP_ANIMATING"===t.phase}),[]);n(u((function(){return{isDragging:M,tryAbort:S}}),[M,S]));var E=h((function(t){return pn(Tr(p).getState(),t)}),[]),k=h((function(){return Qt(Tr(p).getState())}),[]),T=u((function(){return{marshal:x,focus:A,contextId:e,canLift:E,isMovementAllowed:k,dragHandleUsageInstructionsId:v,registry:w}}),[e,x,v,A,E,k,w]);return kr({contextId:e,store:O,registry:w,customSensors:a,enableDefaultSensors:!1!==t.enableDefaultSensors}),Object(r.useEffect)((function(){return S}),[S]),i.a.createElement(nr.Provider,{value:T},i.a.createElement(c.a,{context:Zn,store:O},t.children))}var Ir=0;function Nr(t){var e=u((function(){return""+Ir++}),[]),n=t.dragHandleUsageInstructions||B;return i.a.createElement(N,null,(function(r){return i.a.createElement(Dr,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)}))}var jr=function(t){return function(e){return t===e}},Pr=jr("scroll"),Lr=jr("auto"),Rr=(jr("visible"),function(t,e){return e(t.overflowX)||e(t.overflowY)}),Br=function(t){var e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return Rr(n,Pr)||Rr(n,Lr)},Fr=function t(e){return null==e||e===document.body||e===document.documentElement?null:Br(e)?e:t(e.parentElement)},$r=function(t){return{x:t.scrollLeft,y:t.scrollTop}},Ur=function(t){return{closestScrollable:Fr(t),isFixedOnPage:function t(e){return!!e&&("fixed"===window.getComputedStyle(e).position||t(e.parentElement))}(t)}},qr=function(t){var e=t.ref,n=t.descriptor,r=t.env,i=t.windowScroll,a=t.direction,o=t.isDropDisabled,s=t.isCombineEnabled,c=t.shouldClipSubject,l=r.closestScrollable,u=function(t,e){var n=x(t);if(!e)return n;if(t!==e)return n;var r=n.paddingBox.top-e.scrollTop,i=n.paddingBox.left-e.scrollLeft,a=r+e.scrollHeight,o=i+e.scrollWidth,s=f({top:r,right:o,bottom:a,left:i},n.border);return v({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(e,l),h=_(u,i),d=function(){if(!l)return null;var t=x(l),e={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:t,page:_(t,i),scroll:$r(l),scrollSize:e,shouldClipSubject:c}}();return function(t){var e=t.descriptor,n=t.isEnabled,r=t.isCombineEnabled,i=t.isFixedOnPage,a=t.direction,o=t.client,s=t.page,c=t.closest,l=function(){if(!c)return null;var t=c.scrollSize,e=c.client,n=an({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,height:e.paddingBox.height,width:e.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:e,scrollSize:t,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:n,diff:{value:q,displacement:q}}}}(),u="vertical"===a?wt:xt;return{descriptor:e,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:o,page:s,frame:l,subject:tt({page:s,withPlaceholder:null,axis:u,frame:l})}}({descriptor:n,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:a,client:u,page:h,closest:d})},Hr={passive:!1},Gr={passive:!0},zr=function(t){return t.shouldPublishImmediately?Hr:Gr};function Vr(t){var e=Object(r.useContext)(t);return e||I(!1),e}var Wr=function(t){return t&&t.env.closestScrollable||null};function Yr(){}var Xr={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Zr=function(t){var e=t.isAnimatingOpenOnMount,n=t.placeholder,r=t.animate,i=function(t){var e=t.isAnimatingOpenOnMount,n=t.placeholder,r=t.animate;return e||"close"===r?Xr:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:e,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Re.placeholder:null}};var Jr=i.a.memo((function(t){var e=Object(r.useRef)(null),n=h((function(){e.current&&(clearTimeout(e.current),e.current=null)}),[]),a=t.animate,o=t.onTransitionEnd,s=t.onClose,c=t.contextId,l=Object(r.useState)("open"===t.animate),u=l[0],d=l[1];Object(r.useEffect)((function(){return u?"open"!==a?(n(),d(!1),Yr):e.current?Yr:(e.current=setTimeout((function(){e.current=null,d(!1)})),n):Yr}),[a,u,n]);var p=h((function(t){"height"===t.propertyName&&(o(),"close"===a&&s())}),[a,s,o]),f=Zr({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return i.a.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":c,onTransitionEnd:p,ref:t.innerRef})})),Kr=i.a.createContext(null);var Qr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).state={isVisible:Boolean(e.props.on),data:e.props.on,animate:e.props.shouldAnimate&&e.props.on?"open":"none"},e.onClose=function(){"close"===e.state.animate&&e.setState({isVisible:!1})},e}return Object(a.a)(e,t),e.getDerivedStateFromProps=function(t,e){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:e.isVisible?{isVisible:!0,data:e.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(t.on),data:t.on,animate:"none"}},e.prototype.render=function(){if(!this.state.isVisible)return null;var t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)},e}(i.a.PureComponent),ti=5e3,ei=4500,ni=function(t,e){return e?Re.drop(e.duration):t?Re.snap:Re.fluid},ri=function(t,e){return t?e?je.drop:je.combining:null};function ii(t){return"DRAGGING"===t.type?(r=(n=t).dimension.client,i=n.offset,a=n.combineWith,o=n.dropping,s=Boolean(a),c=function(t){return null!=t.forceShouldAnimate?t.forceShouldAnimate:"SNAP"===t.mode}(n),l=Boolean(o),u=l?$e(i,s):Fe(i),{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:ni(c,o),transform:u,opacity:ri(s,l),zIndex:l?ei:ti,pointerEvents:"none"}):{transform:Fe((e=t).offset),transition:e.shouldAnimateDisplacement?null:"none"};var e,n,r,i,a,o,s,c,l,u}function ai(t){var e=er("draggable"),n=t.descriptor,i=t.registry,a=t.getDraggableRef,o=t.canDragInteractiveElements,s=t.shouldRespectForcePress,c=t.isEnabled,l=u((function(){return{canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:c}}),[o,c,s]),d=h((function(t){var e=a();return e||I(!1),function(t,e,n){void 0===n&&(n=q);var r=window.getComputedStyle(e),i=e.getBoundingClientRect(),a=w(i,r),o=_(a,n);return{descriptor:t,placeholder:{client:a,tagName:e.tagName.toLowerCase(),display:r.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:o}}(n,e,t)}),[n,a]),p=u((function(){return{uniqueId:e,descriptor:n,options:l,getDimension:d}}),[n,d,l,e]),f=Object(r.useRef)(p),g=Object(r.useRef)(!0);qn((function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}}),[i.draggable]),qn((function(){if(g.current)g.current=!1;else{var t=f.current;f.current=p,i.draggable.update(p,t)}}),[p,i.draggable])}function oi(t,e,n){ir()}function si(t){t.preventDefault()}var ci=function(t,e){return t===e},li=function(t){var e=t.combine,n=t.destination;return n?n.droppableId:e?e.droppableId:null};function ui(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var hi={mapped:{type:"SECONDARY",offset:q,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ui(null)}};var di={dropAnimationFinished:Ie},pi=Object(c.b)((function(){var t,e,n,r=(t=A((function(t,e){return{x:t,y:e}})),e=A((function(t,e,n,r,i){return{isDragging:!0,isClone:e,isDropAnimating:Boolean(i),dropAnimation:i,mode:t,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=A((function(t,n,r,i,a,o,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:o,mode:n,offset:t,dimension:r,forceShouldAnimate:s,snapshot:e(n,i,a,o,null)}}})),function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var a=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],s=Jt(r.impact),c=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,l=r.forceShouldAnimate;return n(t(a.x,a.y),r.movementMode,o,i.isClone,s,c,l)}var u;if("DROP_ANIMATING"===r.phase){var h=r.completed;if(h.result.draggableId!==i.draggableId)return null;var d=i.isClone,p=r.dimensions.draggables[i.draggableId],f=h.result,g=f.mode,m=li(f),v=function(t){return t.combine?t.combine.draggableId:null}(f),b={duration:r.dropDuration,curve:Ne,moveTo:r.newHomeClientOffset,opacity:v?je.drop:null,scale:v?Pe.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:p,dropping:b,draggingOver:m,combineWith:v,mode:g,forceShouldAnimate:null,snapshot:e(g,d,m,v,b)}}}return null}),i=function(){var t=A((function(t,e){return{x:t,y:e}})),e=A(ui),n=A((function(t,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:t,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:e(n)}}})),r=function(t){return t?n(q,t,!0):null},i=function(e,i,a,o){var s=a.displaced.visible[e],c=Boolean(o.inVirtualList&&o.effected[e]),l=dt(a),u=l&&l.draggableId===e?i:null;if(!s){if(!c)return r(u);if(a.displaced.invisible[e])return null;var h=V(o.displacedBy.point),d=t(h.x,h.y);return n(d,u,!0)}if(c)return r(u);var p=a.displacedBy.point,f=t(p.x,p.y);return n(f,u,s.shouldAnimate)};return function(t,e){if(t.isDragging)return t.critical.draggable.id===e.draggableId?null:i(e.draggableId,t.critical.draggable.id,t.impact,t.afterCritical);if("DROP_ANIMATING"===t.phase){var n=t.completed;return n.result.draggableId===e.draggableId?null:i(e.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(t,e){return r(t,e)||i(t,e)||hi}}),di,null,{context:Zn,pure:!0,areStatePropsEqual:ci})((function(t){var e=Object(r.useRef)(null),n=h((function(t){e.current=t}),[]),i=h((function(){return e.current}),[]),a=Vr(nr),o=a.contextId,s=a.dragHandleUsageInstructionsId,c=a.registry,l=Vr(Kr),d=l.type,p=l.droppableId,f=u((function(){return{id:t.draggableId,index:t.index,type:d,droppableId:p}}),[t.draggableId,t.index,d,p]),g=t.children,m=t.draggableId,v=t.isEnabled,b=t.shouldRespectForcePress,y=t.canDragInteractiveElements,_=t.isClone,w=t.mapped,x=t.dropAnimationFinished;oi(),rr(),_||ai(u((function(){return{descriptor:f,registry:c,getDraggableRef:i,canDragInteractiveElements:y,shouldRespectForcePress:b,isEnabled:v}}),[f,c,i,y,b,v]));var C=u((function(){return v?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:si}:null}),[o,s,m,v]),A=h((function(t){"DRAGGING"===w.type&&w.dropping&&"transform"===t.propertyName&&x()}),[x,w]),O=u((function(){var t=ii(w),e="DRAGGING"===w.type&&w.dropping?A:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":m,style:t,onTransitionEnd:e},dragHandleProps:C}}),[o,C,m,w,A,n]),S=u((function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}}),[f.droppableId,f.id,f.index,f.type]);return g(O,w.snapshot,S)}));function fi(t){return Vr(Kr).isUsingCloneFor!==t.draggableId||t.isClone?i.a.createElement(pi,t):null}function gi(t){var e="boolean"!=typeof t.isDragDisabled||!t.isDragDisabled,n=Boolean(t.disableInteractiveElementBlocking),r=Boolean(t.shouldRespectForcePress);return i.a.createElement(fi,Object(o.a)({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var mi=function(t,e){return t===e.droppable.type},vi=function(t,e){return e.draggables[t.draggable.id]},bi={updateViewportMaxScroll:function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}}};var yi={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||I(!1),document.body}},_i=Object(c.b)((function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e=Object(o.a)({},t,{shouldAnimatePlaceholder:!1}),n=A((function(t){return{draggableId:t.id,type:t.type,source:{index:t.index,droppableId:t.droppableId}}})),r=A((function(r,i,a,o,s,c){var l=s.descriptor.id;if(s.descriptor.droppableId===r){var u=c?{render:c,dragging:n(s.descriptor)}:null,h={isDraggingOver:a,draggingOverWith:a?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:u}}if(!i)return e;if(!o)return t;var d={isDraggingOver:a,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(n,i){var a=i.droppableId,o=i.type,s=!i.isDropDisabled,c=i.renderClone;if(n.isDragging){var l=n.critical;if(!mi(o,l))return e;var u=vi(l,n.dimensions),h=Jt(n.impact)===a;return r(a,s,h,h,u,c)}if("DROP_ANIMATING"===n.phase){var d=n.completed;if(!mi(o,d.critical))return e;var p=vi(d.critical,n.dimensions);return r(a,s,li(d.result)===a,Jt(d.impact)===a,p,c)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var f=n.completed;if(!mi(o,f.critical))return e;var g=Jt(f.impact)===a,m=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),v=f.critical.droppable.id===a;return g?m?t:e:v?t:e}return e}}),bi,null,{context:Zn,pure:!0,areStatePropsEqual:ci})((function(t){var e=Object(r.useContext)(nr);e||I(!1);var n=e.contextId,a=e.isMovementAllowed,o=Object(r.useRef)(null),s=Object(r.useRef)(null),c=t.children,l=t.droppableId,d=t.type,p=t.mode,f=t.direction,g=t.ignoreContainerClipping,m=t.isDropDisabled,v=t.isCombineEnabled,b=t.snapshot,y=t.useClone,_=t.updateViewportMaxScroll,w=t.getContainerForClone,x=h((function(){return o.current}),[]),C=h((function(t){o.current=t}),[]),S=(h((function(){return s.current}),[]),h((function(t){s.current=t}),[]));ir();var E=h((function(){a()&&_({maxScroll:sn()})}),[a,_]);!function(t){var e=Object(r.useRef)(null),n=Vr(nr),i=er("droppable"),a=n.registry,o=n.marshal,s=or(t),c=u((function(){return{id:t.droppableId,type:t.type,mode:t.mode}}),[t.droppableId,t.mode,t.type]),l=Object(r.useRef)(c),d=u((function(){return A((function(t,n){e.current||I(!1);var r={x:t,y:n};o.updateDroppableScroll(c.id,r)}))}),[c.id,o]),p=h((function(){var t=e.current;return t&&t.env.closestScrollable?$r(t.env.closestScrollable):q}),[]),f=h((function(){var t=p();d(t.x,t.y)}),[p,d]),g=u((function(){return O(f)}),[f]),m=h((function(){var t=e.current,n=Wr(t);t&&n||I(!1),t.scrollOptions.shouldPublishImmediately?f():g()}),[g,f]),v=h((function(t,r){e.current&&I(!1);var i=s.current,a=i.getDroppableRef();a||I(!1);var o=Ur(a),l={ref:a,descriptor:c,env:o,scrollOptions:r};e.current=l;var u=qr({ref:a,descriptor:c,env:o,windowScroll:t,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),h=o.closestScrollable;return h&&(h.setAttribute($n.contextId,n.contextId),h.addEventListener("scroll",m,zr(l.scrollOptions))),u}),[n.contextId,c,m,s]),b=h((function(){var t=e.current,n=Wr(t);return t&&n||I(!1),$r(n)}),[]),y=h((function(){var t=e.current;t||I(!1);var n=Wr(t);e.current=null,n&&(g.cancel(),n.removeAttribute($n.contextId),n.removeEventListener("scroll",m,zr(t.scrollOptions)))}),[m,g]),_=h((function(t){var n=e.current;n||I(!1);var r=Wr(n);r||I(!1),r.scrollTop+=t.y,r.scrollLeft+=t.x}),[]),w=u((function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:b,dragStopped:y,scroll:_}}),[y,v,b,_]),x=u((function(){return{uniqueId:i,descriptor:c,callbacks:w}}),[w,c,i]);qn((function(){return l.current=x.descriptor,a.droppable.register(x),function(){e.current&&y(),a.droppable.unregister(x)}}),[w,c,y,x,o,a.droppable]),qn((function(){e.current&&o.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)}),[t.isDropDisabled,o]),qn((function(){e.current&&o.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)}),[t.isCombineEnabled,o])}({droppableId:l,type:d,mode:p,direction:f,isDropDisabled:m,isCombineEnabled:v,ignoreContainerClipping:g,getDroppableRef:x});var k=i.a.createElement(Qr,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},(function(t){var e=t.onClose,r=t.data,a=t.animate;return i.a.createElement(Jr,{placeholder:r,onClose:e,innerRef:S,animate:a,contextId:n,onTransitionEnd:E})})),T=u((function(){return{innerRef:C,placeholder:k,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}}),[n,l,k,C]),D=y?y.dragging.draggableId:null,N=u((function(){return{droppableId:l,type:d,isUsingCloneFor:D}}),[l,D,d]);return i.a.createElement(Kr.Provider,{value:N},c(T,b),function(){if(!y)return null;var t=y.dragging,e=y.render,n=i.a.createElement(fi,{draggableId:t.draggableId,index:t.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return e(n,r,t)}));return M.a.createPortal(n,w())}())}));_i.defaultProps=yi},function(t,e,n){"use strict";var r=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1};var i=function(t){return t!=t};var a=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};e.a=function(t,e,n){return e==e?a(t,e,n):r(t,i,n)}},function(t,e,n){"use strict";var r=n(99),i=n(294),a=n(295),o=n(95),s=n(71);var c=function(){},l=n(96),u=s.a&&1/Object(l.a)(new s.a([,-0]))[1]==1/0?function(t){return new s.a(t)}:c;e.a=function(t,e,n){var s=-1,c=i.a,h=t.length,d=!0,p=[],f=p;if(n)d=!1,c=a.a;else if(h>=200){var g=e?null:u(t);if(g)return Object(l.a)(g);d=!1,c=o.a,f=new r.a}else f=e?[]:p;t:for(;++s<h;){var m=t[s],v=e?e(m):m;if(m=n||0!==m?m:0,d&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue t;e&&f.push(v),p.push(m)}else c(f,v,n)||(f!==p&&f.push(v),p.push(m))}return p}},function(t,e,n){"use strict";var r=n(212),i=n(210),a=n(259),o=n(272),s=n(181);var c=function(t){const{variants:e,sequence:n}=t;if(!n||!e)return null;const r=n.split("").map((t,e)=>({type:"VARIANT",normal:t,pos:e+1,variants:[]}));return e.forEach(t=>{r[t.start-1]&&r[t.start-1].variants.push(t)}),r};var l=class{constructor(){this._frequency=Object(i.k)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}drawVariationPlot(t,e){const n=e.getSingleBaseWidth()/2;t.each((t,r,a)=>{const o=Object(i.l)(a[r]),s=t.filter(t=>0!==t.variants.length),c=o.selectAll("g").data(s,t=>t.pos);c.exit().remove();const l=c.enter().append("g").merge(c).selectAll("circle").data(t=>t.variants);l.exit().remove(),l.enter().append("circle").merge(l).attr("class","feature").attr("title",t=>t.start).attr("r",t=>t.size?t.size:5).attr("cx",t=>e.getXFromSeqPosition(t.start)+n).attr("cy",t=>e._yScale(t.variant.charAt(0))).attr("name",t=>{const e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId=`var_${t.wildType}${t.start}${e}`,t.internalId}).attr("fill",t=>e._colorConfig?e._colorConfig(t):t.color).call(e.bindEvents,e)})}};const u=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],h=(t,e)=>{if(!t||t.length<=0)return null;const n=t[0];return n.forEach((n,r)=>{const i=t.map(t=>t[r].variants);n.variants=e(...i)}),n};class d extends r.b{connectedCallback(){super.connectedCallback();const t=document.createElement("style");t.innerHTML=d.css,this.appendChild(t),this._height=Number(this.getAttribute("height"))?Number(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(i.i)(),this._yScale=Object(i.j)().domain(u).range([0,this._height-this.margin.top-this.margin.bottom])}processData(t){this._originalData=c(t)}static get css(){return"\n    <style>\n    protvista-variation {\n      display: flex;\n      width: 100%;\n    }\n    \n    protvista-variation svg {\n      background-color: #fff;\n    }\n    \n    protvista-variation circle {\n      opacity: 0.6;\n    }\n    protvista-variation circle:hover {\n      opacity: 0.9;\n    }\n    protvista-variation .tick line,\n    protvista-variation .axis path {\n      opacity: 0.1;\n    }\n    \n    .protvista-highlight {\n      fill: #ffe999;\n    }\n    \n    protvista-variation .variation-y-right line,\n    protvista-variation .axis path {\n      fill: none;\n      stroke: none;\n    }\n    \n    </style>\n    "}_createFeatures(){this._variationPlot=new l;const t=super.svg.select("g.sequence-features"),e=t.attr("transform",`translate(0, ${this.margin.top})`).append("g").attr("clip-path","url(#plotAreaClip)");this._clipPath=t.append("clipPath").attr("id","plotAreaClip").append("rect").attr("width",this.getWidthWithMargins()).attr("height",this._height).attr("transform",`translate(0, -${this.margin.top})`),this._series=e.datum(this._data),this._axisLeft=t.append("g"),this._axisRight=t.append("g"),this.updateScale()}set filters(t){super.filters=t,this.updateData(this._data),this.refresh()}_applyFilters(){if(!this._filters||this._filters.length<=0)return void(this._data=this._originalData);const t=Object(s.a)(this._filters,"category"),e=Object.values(t).map(t=>{const e=t.map(t=>t.filterFn(this._originalData));return h(e,a.a)});this._data=h(e,o.a)}set colorConfig(t){this._colorConfig=t}get colorConfig(){return this._colorConfig}refresh(){this._series&&(this._clipPath.attr("width",this.getWidthWithMargins()),this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}updateScale(){this._yAxisLScale=Object(i.b)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(i.c)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform",`translate(${this.margin.left},0)`).call(this._yAxisLScale),this._axisRight.attr("transform",`translate(${this.getWidthWithMargins()-this.margin.right+2}, 0)`).attr("class","variation-y-right axis").call(this._yAxisRScale)}updateData(t){this._series&&this._series.datum(t)}}e.a=d},,function(t,e,n){"use strict";var r="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,a="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in self,s="ArrayBuffer"in self;if(s)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function g(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=g(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&a&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,r=f(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=g(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=u(t),e=h(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},p.prototype.delete=function(t){delete this.map[u(t)]},p.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},p.prototype.set=function(t,e){this.map[u(t)]=h(e)},p.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(t,e){var n,r,i=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var C=[301,302,303,307,308];x.redirect=function(t,e){if(-1===C.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})};var A=self.DOMException;try{new A}catch(t){(A=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function O(t,e){return new Promise((function(n,r){var i=new _(t,e);if(i.signal&&i.signal.aborted)return r(new A("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var t,e,r={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;n(new x(i,r))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.onabort=function(){r(new A("Aborted","AbortError"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),i.headers.forEach((function(t,e){o.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",s)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}O.polyfill=!0,self.fetch||(self.fetch=O,self.Headers=p,self.Request=_,self.Response=x);var S=n(391),M=n.n(S);class E extends HTMLElement{constructor(){super(),this._mappings=[],this.loadMolecule=this.loadMolecule.bind(this),this._planHighlight=this._planHighlight.bind(this),this.propagateHighlight=this.propagateHighlight.bind(this)}get css(){return`\n    :root {\n      --blue: 0, 112, 155;\n    }\n  \n    protvista-structure h4 {\n      display: inline;\n      margin-right: 1em;\n    }\n      \n    .litemol-container {\n      position: relative;\n      height: ${this._height};\n    }\n\n    .lm-viewport-controls {\n      display: ${this.hideViewportControls?"none":"block"};\n    }\n    `}get accession(){return this._accession}set accession(t){return this.setAttribute("accession",t),this._accession}get pdbId(){return this._pdbID}set pdbId(t){this.setAttribute("pdbid",t),this._pdbID=t}get height(){return this.getAttribute("height")}get hideViewportControls(){return this.getAttribute("hide-viewport-controls")}connectedCallback(){this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._pdbId=this.getAttribute("pdb-id"),this._accession=this.getAttribute("accession"),this._height=this.getAttribute("height")||"480px",this._highlight=this.getAttribute("highlight")&&E._formatHighlight(this.getAttribute("highlight"));const t=document.createElement("style");t.innerHTML=this.css,this.appendChild(t);const e=document.createElement("div");e.className="litemol-container",e.id="litemol-instance",this.messageContainer=document.createElement("span"),this.appendChild(this.messageContainer),this.appendChild(e),this.loadLiteMol()}disconnectedCallback(){this.manager&&this.manager.unregister(this)}static get observedAttributes(){return["highlight","pdb-id","height"]}static _formatHighlight(t){return t.split(",").map(t=>{const[e,n]=t.split(":");return{start:Number(e),end:Number(n)}})}attributeChangedCallback(t,e,n){if(e!==n){const e=parseFloat(n);switch(this["_"+t]="number"==typeof e?n:e,t){case"pdb-id":this._pdbId=n,this.selectMolecule(this._pdbId);break;case"accession":this._accession=n;break;case"highlight":this._highlight=E._formatHighlight(this.getAttribute("highlight"));break;case"height":this._height=n}this._planHighlight(!0)}}_planHighlight(){this._plannedRender||(this._plannedRender=!0,requestAnimationFrame(()=>{this._plannedRender=!1,this._selectedMolecule&&this.highlightChain()}))}async loadPDBEntry(t){try{const e=await fetch("https://www.ebi.ac.uk/pdbe/api/mappings/uniprot/"+t);return await e.json()}catch(t){throw this.addMessage("Couldn't load PDB entry"),new Error(t)}}async selectMolecule(t){const e=await this.loadPDBEntry(t),n=this.processMapping(e);await this.loadMolecule(t),this._selectedMolecule={id:t,mappings:n},this._planHighlight()}loadLiteMol(){const{Plugin:t}=M.a;this.Command=M.a.Bootstrap.Command,this.Query=M.a.Core.Structure.Query,this.Bootstrap=M.a.Bootstrap,this.Core=M.a.Core,this.Tree=this.Bootstrap.Tree,this.CoreVis=M.a.Visualization,this.Transformer=this.Bootstrap.Entity.Transformer,this.Visualization=this.Bootstrap.Visualization,this.Event=this.Bootstrap.Event,this.Context=t.Components.Context,this._liteMol=t.create({target:this.querySelector("#litemol-instance"),viewportBackground:"#fff",layoutState:{hideControls:!0},allowAnalytics:!1}),this.Event.Molecule.ModelSelect.getStream(this._liteMol.context).subscribe(t=>this.propagateHighlight(t))}loadMolecule(t){this._liteMol.clear();const e=this._liteMol.createTransform();return e.add(this._liteMol.root,this.Transformer.Data.Download,{url:`https://www.ebi.ac.uk/pdbe/coordinates/${t.toLowerCase()}/full?encoding=BCIF`,type:"Binary",_id:t}).then(this.Transformer.Data.ParseBinaryCif,{id:t},{isBinding:!0,ref:"cifDict"}).then(this.Transformer.Molecule.CreateFromMmCif,{blockIndex:0},{isBinding:!0}).then(this.Transformer.Molecule.CreateModel,{modelIndex:0},{isBinding:!1,ref:"model"}).then(this.Transformer.Molecule.CreateMacromoleculeVisual,{polymer:!0,polymerRef:"polymer-visual",het:!0,water:!0}),this._liteMol.applyTransform(e)}getTheme(){const t=new Map;return t.set("Uniform",this.CoreVis.Color.fromRgb(207,178,178)),t.set("Selection",this.CoreVis.Color.fromRgb(255,0,0)),t.set("Highlight",this.CoreVis.Theme.Default.HighlightColor),this.Visualization.Molecule.uniformThemeProvider(void 0,{colors:t})}addMessage(t){this.removeMessage(),this._liteMol.command(this.Bootstrap.Command.Toast.Show,{key:"UPMessage",message:t,timeoutMs:3e4})}removeMessage(){this._liteMol.command(this.Bootstrap.Command.Toast.Hide,{key:"UPMessage"})}processMapping(t){return Object.values(t)[0].UniProt[this._accession]?Object.values(t)[0].UniProt[this._accession].mappings:null}translatePositions(t,e,n="UP_PDB"){if("string"==typeof this.highlight||Number.isNaN(t)||Number.isNaN(e))return null;for(const r of this._selectedMolecule.mappings)if(r.unp_end-r.unp_start==r.end.residue_number-r.start.residue_number){if("UP_PDB"===n&&t>=r.unp_start&&e<=r.unp_end||"PDB_UP"===n&&t>=r.start.residue_number&&e<=r.end.residue_number){const i=r.unp_start-r.start.residue_number;return{entity:r.entity_id,chain:r.chain_id,start:"UP_PDB"===n?t-i:t+i,end:"UP_PDB"===n?e-i:e+i}}}else this.addMessage("Mismatch between protein sequence and structure residues");return null}propagateHighlight(t){if(!t.data||!t.data.residues)return;const e=t.data.residues.map(t=>this.translatePositions(t.seqNumber,t.seqNumber,"PDB_UP")).map(t=>`${t.start}:${t.end}`),n=new CustomEvent("change",{detail:{highlight:e.join(",")},bubbles:!0,cancelable:!0});this.dispatchEvent(n)}highlightChain(){if(!this._highlight)return;this.Command.Visual.ResetTheme.dispatch(this._liteMol.context,void 0),this.Command.Tree.RemoveNode.dispatch(this._liteMol.context,"sequence-selection");const t=this._liteMol.context.select("polymer-visual")[0];if(!t)return;const e=this._highlight.map(({start:t,end:e})=>this.translatePositions(t,e)).filter(t=>t);if(!e||0===e.length)return;const n=e.map(t=>this.Query.sequence(t.entity.toString(),t.chain,{seqNumber:t.start},{seqNumber:t.end})),r=this.getTheme(),i=this._liteMol.createTransform();n.forEach(e=>i.add(t,this.Transformer.Molecule.CreateSelectionFromQuery,{query:e},{ref:"sequence-selection"})),this._liteMol.applyTransform(i).then(()=>{this.Command.Visual.UpdateBasicTheme.dispatch(this._liteMol.context,{visual:t,theme:r})}),this.removeMessage()}}e.a=E},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(191),i=n(190);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const a=new WeakMap,o=Object(i.b)(t=>e=>{if(!(e instanceof i.a))throw new Error("unsafeHTML can only be used in text bindings");const n=a.get(e);if(void 0!==n&&Object(r.f)(t)&&t===n.value&&e.value===n.fragment)return;const o=document.createElement("template");o.innerHTML=t;const s=document.importNode(o.content,!0);e.setValue(s),a.set(e,{value:t,fragment:s})})},,function(t,e){!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){var r=n(1);"string"==typeof r&&(r=[[t.i,r,""]]);n(3)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,"rhea-reaction {\n    display: flex;\n    flex-direction: column;\n    min-width: 100%;\n    justify-content: flex-start;\n    align-items: flex-start;\n    align-content: stretch;\n}\n\nrhea-reaction img {\n    width: 200px;\n    height: 200px;\n}\n\nrhea-reaction .rhea-reaction-container {\n    display: flex;\n    flex-direction: row;\n    justify-content: left;\n}\n\nrhea-reaction-block {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    padding: 10px;\n}\n\nrhea-reaction-block.smallMolecule:hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\nrhea-reaction .residues {\n    display: flex;\n    flex-direction: row;\n    border: 1px grey dashed;\n    justify-content: center;\n}\n\nrhea-reaction-block .name {\n    margin-bottom: 10px;\n}\n\nrhea-reaction-block.and,\nrhea-reaction-block.none,\nrhea-reaction-block.forward,\nrhea-reaction-block.backward,\nrhea-reaction-block.bi,\nrhea-reaction-block.coefficient {\n    justify-content: center;\n}\n\nrhea-reaction .participantfooter {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n\nrhea-reaction .filler {\n    flex-grow: 1;\n}",""])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var a=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){var r,i,a={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,l=0,u=[],h=n(4);function d(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(b(r.parts[o],e))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(b(r.parts[o],e));a[r.id]={id:r.id,refs:1,parts:s}}}}function p(t,e){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function f(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertAt.before,n);n.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=n.nc;r&&(t.attrs.nonce=r)}return v(e,t.attrs),f(t,e),e}function v(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,i,a;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}if(e.singleton){var o=l++;n=c||(c=m(e)),r=w.bind(null,n,o,!1),i=w.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),f(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(r=h(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return d(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var o=n[i];(s=a[o.id]).refs--,r.push(s)}for(t&&d(p(t,e),e),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete a[s.id]}}}};var y,_=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e,n){"use strict";n.r(e),n(0);const r={forward:"=>",backward:"<=",bi:"<=>",none:"="},i={SMALL_MOLECULE:"smallMolecule",GENERIC_COMPOUND:"genericcomp",POLYMER:"polymer"};window.customElements.get("rhea-reaction-block")||window.customElements.define("rhea-reaction-block",class extends HTMLElement{constructor(){super()}smallMolecule(t,e,n="",r){let i=t.htmlName?`<div class="name">\n                <a href="${function(t){return"https://www.ebi.ac.uk/chebi/searchId.do?chebiId=CHEBI:"+t}(t.chebi)}">${decodeURI(t.htmlName)}</a>\n                ${t.location?`(${t.location})`:""}\n            </div>`:"",a=r.structuresearch&&t.smiles,o=t.position?`<div class="position">Position: ${t.position}</div>`:"",s=""!==n?`<a class="participantId">${n}</a>`:"",c=r.polymer?r.polymer.thumbnail:t.thumbnail,l=r.polymer?r.polymer.zoomed:t.zoomed;return(""!==o?`<img alt="No structure information present" src="${c}"></img> ${i} ${s} ${o}`:`${i} ${s} <img alt="No structure information present" src="${c}"></img> ${o}`)+'<span class="filler"></span>'+`<div class="participantfooter">\n        ${(r.formula&&t.formula?`<span class="info"><i>Formula</i>: ${t.formula}</span>`:"")+(r.charge&&t.charge?`<span class="info"><i>Charge</i>: ${t.charge}</span>`:"")+(r.inchikey&&t.inchikey?`<span class="info"><i>InchiKey</i>: ${t.inchikey}</span>`:"")+(e?`<a class="zoomLink" data-chebi-id="${t.chebi}" data-chebi-zoom="${l}">zoom</a>`:"")+(a?`<a class="structuresearch" href="${r.rheaurl}/structuresearch/?query=${t.id}">structure search`:"")}</div>`}setParticipant(t,e,n){switch(t.type){case"SMALL_MOLECULE":this.innerHTML=this.smallMolecule(t,e,n.showids?"CHEBI:"+t.chebi:"",n);break;case"POLYMER":n.polymer={thumbnail:t.thumbnail,zoomed:t.zoomed},this.innerHTML=this.smallMolecule(t.underlyingChebi,e,n.showids?"RHEA-COMP:"+t["rhea-comp"]:"",n);break;case"GENERIC_COMPOUND":this.innerHTML=`\n                <div class="name">\n                    <a class="generic">${decodeURI(t.htmlName)}</a>\n                </div>\n                ${n.showids?`<a class="participantId"> RHEA-COMP:${t["rhea-comp"]}</a>`:""}\n                <div class="residues">${t.reactivePart.map((t,e)=>`<rhea-reaction-block class="participant ${i[t.type]}" index="${e}"></rhea-reaction-block>`).join("")}</div>`,this.querySelectorAll("rhea-reaction-block").forEach(r=>{let i=r.getAttribute("index");r.removeAttribute("index"),r.setParticipant(t.reactivePart[i],e,n)});break;default:return""}}}),window.customElements.get("rhea-reaction")||window.customElements.define("rhea-reaction",class extends HTMLElement{constructor(){super(),this.rheaURL="https://api.rhea-db.org"}attributeChangedCallback(t,e,n){if(e!==n)switch(t){case"rheaid":let t=n.toLowerCase();t.startsWith("rhea:")&&(t=t.subString(5)),this.render(t);break;case"usehost":this.rheaURL=n}}static get observedAttributes(){return["rheaid","usehost"]}get uniprot(){return"https://uniprot.org/uniprot/query="+this.rheaid}async render(t){this.hasAttribute("usehost")&&(this.rheaURL=this.getAttribute("usehost"));let e=await fetch(function(t,e){return`${e}/rhea/${t}/json`}(t,this.rheaURL));e=await e.json(),this.rheaid="rhea:"+e.id;let n={nosource:this.hasAttribute("nosource"),showids:this.hasAttribute("showids"),formula:this.hasAttribute("formula"),charge:this.hasAttribute("charge"),smiles:this.hasAttribute("smiles"),inchikey:this.hasAttribute("inchikey"),structuresearch:this.hasAttribute("structuresearch"),rheaurl:this.rheaURL};this.innerHTML=`\n            ${n.nosource?"":`<div class="rhea-reaction-source">\n                    <a href="${function(t){return"https://www.rhea-db.org/reaction?id="+t}(e.id)}">Source: Rhea</a> \n                    ${n.showids?`<a class="participantId">RHEA:${e.id}</a>`:""}\n                </div>`}\n            <div class="rhea-reaction-container">\n                ${this.getList("left",e.left)}\n                    <rhea-reaction-block class="${e.direction}">${r[e.direction]}</rhea-reaction-block>\n                ${this.getList("right",e.right)}\n            </div>`,this.querySelectorAll("rhea-reaction-block.participant").forEach(t=>{let r=t.getAttribute("index").split("-"),i=r[0];r=r[1],t.removeAttribute("index"),t.setParticipant(e[i][r],this.hasAttribute("zoom"),n)}),this.hasAttribute("zoom")&&Array.from(this.querySelectorAll(".zoomLink")).forEach(t=>t.onclick=e=>{e.stopPropagation(),e.preventDefault();let n=new CustomEvent("zoomClicked",{detail:{chebi:"chebi:"+e.target.getAttribute("data-chebi-id"),imgURL:e.target.getAttribute("data-chebi-zoom")},bubbles:!0});t.dispatchEvent(n)});let i=new CustomEvent("rendered",{detail:{},bubbles:!0});this.dispatchEvent(i)}getList(t,e){return e.map((n,r)=>{let a=r!=e.length-1;return`\n                ${n.coff?`<rhea-reaction-block class="coefficient" >${n.coff}</rhea-reaction-block>`:""}\n                <rhea-reaction-block class="participant ${i[n.type]}" index="${t}-${r}"></rhea-reaction-block>\n                ${a?'<rhea-reaction-block class="and">+</rhea-reaction-block>':""}`}).map(t=>t.trim()).join("")}})}])},,function(t,e,n){"use strict";var r=n(254),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(i.source,"g");e.a=function(t,e){var n,o,s,c=i.lastIndex=a.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(n=i.exec(t))&&(o=a.exec(e));)(s=o.index)>c&&(s=e.slice(c,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,h.push({i:l,x:Object(r.a)(n,o)})),c=a.lastIndex;return c<e.length&&(s=e.slice(c),u[l]?u[l]+=s:u[++l]=s),u.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)u[(n=h[r]).i]=n.x(t);return u.join("")})}},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var o=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&c()}function s(){a(o)}function c(){var t=Date.now();if(n){if(t-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,e);i=t}return c}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;o.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),l=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},u=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},h=v(0,0,0,0);function d(t){return parseFloat(t)||0}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+d(t["border-"+n+"-width"])}),0)}function f(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return h;var r=u(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=t["padding-"+i];e[i]=d(a)}return e}(r),a=i.left+i.right,o=i.top+i.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==e&&(s-=p(r,"left","right")+a),Math.round(c+o)!==n&&(c-=p(r,"top","bottom")+o)),!function(t){return t===u(t).document.documentElement}(t)){var l=Math.round(s+a)-e,f=Math.round(c+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(f)&&(c-=f)}return v(i.left,i.top,s,c)}var g="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof u(t).SVGGraphicsElement}:function(t){return t instanceof u(t).SVGElement&&"function"==typeof t.getBBox};function m(t){return r?g(t)?function(t){var e=t.getBBox();return v(0,0,e.width,e.height)}(t):f(t):h}function v(t,e,n,r){return{x:t,y:e,width:n,height:r}}var b=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=m(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),y=function(t,e){var n,r,i,a,o,s,c,u=(r=(n=e).x,i=n.y,a=n.width,o=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:r,y:i,width:a,height:o,top:i,right:r+a,bottom:o+i,left:r}),c);l(this,{target:t,contentRect:u})},_=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new b(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new y(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,x=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new _(e,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){x.prototype[t]=function(){var e;return(e=w.get(this))[t].apply(e,arguments)}}));var C=void 0!==i.ResizeObserver?i.ResizeObserver:x;e.a=C}).call(this,n(23))},function(t,e,n){var r=n(380),i=n(381),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(298),o=n(299),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(298),i=n(299);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},function(t,e,n){var r=n(383),i=n(384),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(303),o=n(304),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(303),i=n(304);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},function(t,e,n){var r=n(386),i=n(387),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(305),o=n(306),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(305),i=n(306);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},,function(t,e,n){"use strict";(function(t){var r=n(12),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.a.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(58)(t))},function(t,e,n){},,,function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(394),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(23))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,a,o,s,c=1,l={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){a.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(f,0,t)}:(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&f(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(o+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[c]=i,r(c),c++},d.clearImmediate=p}function p(t){delete l[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(23),n(93))},,,,,,,function(t,e,n){var r=n(402),i=n(403),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(317),o=n(318),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(317),i=n(318);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},function(t,e,n){var r=n(405),i=n(406),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(319),o=n(320),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(319),i=n(320);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},function(t,e,n){var r=n(408),i=n(409),a=i;a.v1=r,a.v4=i,t.exports=a},function(t,e,n){var r,i,a=n(321),o=n(322),s=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,u=e||[],h=(t=t||{}).node||r,d=void 0!==t.clockseq?t.clockseq:i;if(null==h||null==d){var p=a();null==h&&(h=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),g=void 0!==t.nsecs?t.nsecs:c+1,m=f-s+(g-c)/1e4;if(m<0&&void 0===t.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,c=g,i=d;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var b=f/4294967296*1e4&268435455;u[l++]=b>>>8&255,u[l++]=255&b,u[l++]=b>>>24&15|16,u[l++]=b>>>16&255,u[l++]=d>>>8|128,u[l++]=255&d;for(var y=0;y<6;++y)u[l+y]=h[y];return e||o(u)}},function(t,e,n){var r=n(321),i=n(322);t.exports=function(t,e,n){var a=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[a+s]=o[s];return e||i(o)}},function(t){t.exports=JSON.parse('{"categories":[{"name":"DOMAINS_AND_SITES","label":"Domains & sites","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"domain","label":"Domain","filter":"DOMAIN","trackType":"protvista-track","tooltip":"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold"},{"name":"region","label":"Region","filter":"REGION","trackType":"protvista-track","tooltip":"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation"},{"name":"motif","label":"Motif","filter":"MOTIF","trackType":"protvista-track","tooltip":"Short conserved sequence motif of biological significance"},{"name":"metal","label":"Metal binding","filter":"METAL","trackType":"protvista-track","tooltip":"Binding site for a metal ion"},{"name":"site","label":"Site","filter":"SITE","trackType":"protvista-track","tooltip":"Any interesting single amino acid site on the sequence"},{"name":"repeat","label":"Repeat","filter":"REPEAT","trackType":"protvista-track","tooltip":"Repeated sequence motifs or repeated domains within the protein"},{"name":"ca_bind","label":"Calcium binding","filter":"CA_BIND","trackType":"protvista-track","tooltip":"Calcium-binding regions, such as the EF-hand motif"},{"name":"dna_bind","label":"DNA binding","filter":"DNA_BIND","trackType":"protvista-track","tooltip":"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain"},{"name":"zn_fing","label":"Zinc finger","filter":"ZN_FING","trackType":"protvista-track","tooltip":"Small, functional, independently folded domain that coordinates one or more zinc ions"},{"name":"np_bind","label":"Nucleotide binding","filter":"NP_BIND","trackType":"protvista-track","tooltip":"(aka flavin-binding). Region in the protein which binds nucleotide phosphates"},{"name":"binding","label":"Binding site","filter":"BINDING","trackType":"protvista-track","tooltip":"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)"},{"name":"act_site","label":"Active site","filter":"ACT_SITE","trackType":"protvista-track","tooltip":"Amino acid(s) directly involved in the activity of an enzyme"}]},{"name":"MOLECULE_PROCESSING","label":"Molecule processing","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"signal","label":"Signal peptide","filter":"SIGNAL","trackType":"protvista-track","tooltip":"N-terminal signal peptide"},{"name":"chain","label":"Chain","filter":"CHAIN","trackType":"protvista-track","tooltip":"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing"},{"name":"transit","label":"Transit peptide","filter":"TRANSIT","trackType":"protvista-track","tooltip":"This describes the extent of a transit peptide"},{"name":"init_met","label":"Initiator methionine","filter":"INIT_MET","trackType":"protvista-track","tooltip":"This indicates that the initiator methionine is cleaved from the mature protein"},{"name":"propep","label":"Propeptide","filter":"PROPEP","trackType":"protvista-track","tooltip":"Part of a protein that is cleaved during maturation or activation"},{"name":"peptide","label":"Peptide","filter":"PEPTIDE","trackType":"protvista-track","tooltip":"The position and length of an active peptide in the mature protein"}]},{"name":"PTM","label":"PTM","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"mod_res","label":"Modified residue","filter":"MOD_RES","trackType":"protvista-track","tooltip":"Modified residues such as phosphorylation, acetylation, acylation, methylation"},{"name":"carbohyd","label":"Glycosylation","filter":"CARBOHYD","trackType":"protvista-track","tooltip":"Covalently attached glycan group(s)"},{"name":"disulfid","label":"Disulfide bond","filter":"DISULFID","trackType":"protvista-track","tooltip":"The positions of cysteine residues participating in disulphide bonds"},{"name":"crosslnk","label":"Cross-link","filter":"CROSSLNK","trackType":"protvista-track","tooltip":"Covalent linkages of various types formed between two proteins or between two parts of the same protein"},{"name":"lipid","label":"Lipidation","filter":"LIPID","trackType":"protvista-track","tooltip":"Covalently attached lipid group(s)"}]},{"name":"SEQUENCE_INFORMATION","label":"Sequence information","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"compbias","label":"Compositional bias","filter":"COMPBIAS","trackType":"protvista-track","tooltip":"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions"},{"name":"conflict","label":"Sequence conflict","filter":"CONFLICT","trackType":"protvista-track","tooltip":"Sequence discrepancies of unknown origin"},{"name":"non_cons","filter":"NON_CONS","trackType":"protvista-track","label":"Non-adjacent residues","tooltip":"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them"},{"name":"non_ter","filter":"NON_TER","trackType":"protvista-track","label":"Non-terminal residue","tooltip":"The sequence is incomplete. The residue is not the terminal residue of the complete protein"},{"name":"unsure","filter":"UNSURE","trackType":"protvista-track","label":"Sequence uncertainty","tooltip":"Regions of a sequence for which the authors are unsure about the sequence assignment"},{"name":"non_std","filter":"NON_STD","trackType":"protvista-track","label":"Non-standard residue","tooltip":"Non-standard amino acids (selenocysteine and pyrrolysine)"}]},{"name":"STRUCTURAL","label":"Structural features","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"helix","label":"Helix","filter":"HELIX","trackType":"protvista-track","tooltip":"The positions of experimentally determined helical regions"},{"name":"strand","label":"Beta strand","filter":"STRAND","trackType":"protvista-track","tooltip":"The positions of experimentally determined beta strands"},{"name":"turn","label":"Turn","filter":"TURN","trackType":"protvista-track","tooltip":"The positions of experimentally determined hydrogen-bonded turns"},{"name":"coiled","label":"Coiled coil","filter":"COILED","trackType":"protvista-track","tooltip":"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil"}]},{"name":"STRUCTURE_COVERAGE","label":"PDBe 3D structure coverage","trackType":"protvista-track","adapter":"protvista-structure-adapter","url":"https://www.ebi.ac.uk/proteins/api/proteins/","tracks":[{"name":"pdbe_cover","label":"PDBe coverage","trackType":"protvista-track","tooltip":"PDBe 3D structure coverage"}]},{"name":"TOPOLOGY","label":"Topology","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"topo_dom","label":"Topological domain","filter":"TOPO_DOM","trackType":"protvista-track","tooltip":"Location of non-membrane regions of membrane-spanning proteins"},{"name":"transmem","label":"Transmembrane","filter":"TRANSMEM","trackType":"protvista-track","tooltip":"Extent of a membrane-spanning region"},{"name":"intramem","label":"Intramembrane","filter":"INTRAMEM","trackType":"protvista-track","tooltip":"Extent of a region located in a membrane without crossing it"}]},{"name":"MUTAGENESIS","label":"Mutagenesis","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/features/","tracks":[{"name":"mutagen","label":"Mutagenesis","filter":"MUTAGEN","trackType":"protvista-track","tooltip":"Site which has been experimentally altered by mutagenesis"}]},{"name":"PROTEOMICS","label":"Proteomics","trackType":"protvista-track","adapter":"protvista-proteomics-adapter","url":"https://www.ebi.ac.uk/proteins/api/proteomics/","tracks":[{"name":"unique","label":"Unique peptide","filter":"unique","trackType":"protvista-track","tooltip":""},{"name":"non_unique","label":"Non-unique peptide","filter":"non_unique","trackType":"protvista-track","tooltip":""}]},{"name":"ANTIGEN","label":"Antigenic sequences","trackType":"protvista-track","adapter":"protvista-feature-adapter","url":"https://www.ebi.ac.uk/proteins/api/antigen/","tracks":[{"name":"antigen","label":"Antibody binding sequences","trackType":"protvista-track","tooltip":""}]},{"name":"VARIATION","label":"Variants","adapter":"protvista-variation-adapter","trackType":"protvista-variation-graph","url":"https://www.ebi.ac.uk/proteins/api/variation/","tracks":[{"name":"variation_graph","trackType":"protvista-variation-graph"},{"name":"variation","filterComponent":"protvista-filter","trackType":"protvista-variation","tooltip":"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events"}]}],"download":[{"type":"features","url":"https://www.ebi.ac.uk/proteins/api/features/"},{"type":"variants","url":"https://www.ebi.ac.uk/proteins/api/variation/"},{"type":"antigens","url":"https://www.ebi.ac.uk/proteins/api/antigen/"},{"type":"proteomics","url":"https://www.ebi.ac.uk/proteins/api/proteomics/"}]}')},,,,function(t,e,n){"use strict";var r=n(312),i=n(289),a=n(259),o=n(272),s=n(46);var c=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},l=n(98),u=n(62),h=Object.prototype.hasOwnProperty;var d=function(t,e,n){var r=t[e];h.call(t,e)&&Object(u.a)(r,n)&&(void 0!==n||e in t)||Object(l.a)(t,e,n)};var p=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],c=r?r(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),i?Object(l.a)(n,s,c):d(n,s,c)}return n},f=n(40);var g=function(t,e){return t&&p(e,Object(f.a)(e),t)},m=n(120),v=n(39),b=n(94);var y=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},_=Object.prototype.hasOwnProperty;var w=function(t){if(!Object(v.a)(t))return y(t);var e=Object(b.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&_.call(t,r))&&n.push(r);return n},x=n(56);var C=function(t){return Object(x.a)(t)?Object(m.a)(t,!0):w(t)};var A=function(t,e){return t&&p(e,C(e),t)},O=n(389);var S=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},M=n(100);var E=function(t,e){return p(t,Object(M.a)(t),e)},k=n(97),T=n(103),D=Object(T.a)(Object.getPrototypeOf,Object),I=n(107),N=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(k.a)(e,Object(M.a)(t)),t=D(t);return e}:I.a;var j=function(t,e){return p(t,N(t),e)},P=n(85),L=n(106);var R=function(t){return Object(L.a)(t,C,N)},B=n(79),F=Object.prototype.hasOwnProperty;var $=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&F.call(t,"index")&&(n.index=t.index,n.input=t.input),n},U=n(84);var q=function(t){var e=new t.constructor(t.byteLength);return new U.a(e).set(new U.a(t)),e};var H=function(t,e){var n=e?q(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},G=/\w*$/;var z=function(t){var e=new t.constructor(t.source,G.exec(t));return e.lastIndex=t.lastIndex,e},V=n(21),W=V.a?V.a.prototype:void 0,Y=W?W.valueOf:void 0;var X=function(t){return Y?Object(Y.call(t)):{}};var Z=function(t,e){var n=e?q(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var J=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return q(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return H(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Z(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return z(t);case"[object Set]":return new r;case"[object Symbol]":return X(t)}},K=Object.create,Q=function(){function t(){}return function(e){if(!Object(v.a)(e))return{};if(K)return K(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var tt=function(t){return"function"!=typeof t.constructor||Object(b.a)(t)?{}:Q(D(t))},et=n(11),nt=n(51),rt=n(24);var it=function(t){return Object(rt.a)(t)&&"[object Map]"==Object(B.a)(t)},at=n(91),ot=n(83),st=ot.a&&ot.a.isMap,ct=st?Object(at.a)(st):it;var lt=function(t){return Object(rt.a)(t)&&"[object Set]"==Object(B.a)(t)},ut=ot.a&&ot.a.isSet,ht=ut?Object(at.a)(ut):lt,dt={};dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object DataView]"]=dt["[object Boolean]"]=dt["[object Date]"]=dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object Symbol]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Error]"]=dt["[object Function]"]=dt["[object WeakMap]"]=!1;var pt=function t(e,n,r,i,a,o){var l,u=1&n,h=2&n,p=4&n;if(r&&(l=a?r(e,i,a,o):r(e)),void 0!==l)return l;if(!Object(v.a)(e))return e;var m=Object(et.a)(e);if(m){if(l=$(e),!u)return S(e,l)}else{var b=Object(B.a)(e),y="[object Function]"==b||"[object GeneratorFunction]"==b;if(Object(nt.a)(e))return Object(O.a)(e,u);if("[object Object]"==b||"[object Arguments]"==b||y&&!a){if(l=h||y?{}:tt(e),!u)return h?j(e,A(l,e)):E(e,g(l,e))}else{if(!dt[b])return a?e:{};l=J(e,b,u)}}o||(o=new s.a);var _=o.get(e);if(_)return _;o.set(e,l),ht(e)?e.forEach((function(i){l.add(t(i,n,r,i,e,o))})):ct(e)&&e.forEach((function(i,a){l.set(a,t(i,n,r,a,e,o))}));var w=p?h?R:P.a:h?keysIn:f.a,x=m?void 0:w(e);return c(x||e,(function(i,a){x&&(i=e[a=i]),d(l,a,t(i,n,r,a,e,o))})),l};var ft=function(t){return pt(t,4)};const gt=(t,e,n)=>{if(e.length<=0)return;for(const n of t)if(n.name===e[0])return void gt(n.children,e.slice(1),n);const r={name:e[0],selected:!1,parent:n,children:[]};t.push(r),gt(r.children,e.slice(1),r)};function mt(t,e){const n=t.split(", ");gt(e,n)}function vt(t,e,n){"number"==typeof n?n++:n=1;for(const r of t)r.depth=n,e(r),r.children.length>0&&vt(r.children,e,n)}function bt(t,e){const n=e.find(e=>t.id===e.id);n?t.isoform&&(n.isoform=t.isoform):e.push(t)}var yt=n(290),_t=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},wt=n(264);const xt=Symbol("implicit");function Ct(){var t=new Map,e=[],n=[],r=xt;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==xt)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ct(e,n).unknown(r)},wt.a.apply(i,arguments),i}function At(){var t,e,n=Ct().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,s=!1,c=0,l=0,u=.5;function h(){var n=r().length,h=o<a,d=h?o:a,p=h?a:o;t=(p-d)/Math.max(1,n-c+2*l),s&&(t=Math.floor(t)),d+=(p-d-t*(n-c))*u,e=t*(1-c),s&&(d=Math.round(d),e=Math.round(e));var f=_t(n).map((function(e){return d+t*e}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return At(r(),[a,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},wt.a.apply(h(),arguments)}var Ot=n(425);const St=(t,e)=>{if(t){let n="";for(const r of t)r.dbReference&&(n+=`<p><a href="//www.uniprot.org/uniprot/${e}#${r.acronym}" target="_blank">${r.diseaseId}</a></p>`);return n}return"N/A"},Mt=()=>{Object(r.a)(".interaction-tooltip").style("opacity",0).style("display","none")},Et=t=>{if(t){let e='<ul class="tree-list">';const n=[];return t.filter(t=>t.locations).forEach(t=>{for(const e of t.locations)mt(e.location.value,n)}),vt(n,t=>e+=`<li style="margin-left:${t.depth}em">${t.name}</li>`),e+"</ul>"}return"N/A"};var kt=(t,e,n)=>{const a=n,o=Object(i.a)(t).append("div").attr("class","interaction-tooltip").style("display","none").style("opacity",0);o.append("span").attr("class","close-interaction-tooltip").text("Close ✖").on("click",Mt),o.append("div").attr("class","tooltip-content"),Object(i.a)(t).append("p").attr("class","interaction-title").text(`${e} has binary interactions with ${a.length-1} proteins`);const s=100,c=0,l=10,u=100,h=18*a.length,d=h,p=At().rangeRound([0,h]),f=Object(Ot.a)().range([.2,1]),g=Object(i.a)(t).append("svg").attr("width",h+u+c).attr("height",d+s+l).attr("class","interaction-viewer").append("g").attr("class","interaction-viewer-group").attr("transform",`translate(${u},${s})`);p.domain(a.map(t=>t.accession)),f.domain([0,10]);const m=(t,e)=>`//www.ebi.ac.uk/intact/query/id:${t} AND id:${e}`,v=t=>{Object(i.a)(void 0).classed("active-cell",!0),Object(r.a)(".interaction-viewer-group").append("line").attr("class","active-row").attr("style","opacity:0.3").attr("x1",0).attr("y1",p(t.source)+p.bandwidth()/2).attr("x2",p(t.id)).attr("y2",p(t.source)+p.bandwidth()/2),Object(r.a)(".interaction-viewer-group").append("line").attr("class","active-row").attr("style","opacity:0.3").attr("x1",p(t.id)+p.bandwidth()/2).attr("y1",0).attr("x2",p(t.id)+p.bandwidth()/2).attr("y2",p(t.source))},b=()=>{Object(r.a)("g").classed("active",!1),Object(r.a)("circle").classed("active-cell",!1),Object(r.a)(".active-row").remove()},y=e=>{((t,e)=>{t.html("");const n=a.find(t=>t.accession===e.source),r=a.find(t=>t.accession===e.id);t.append("h3").text("Interaction"),t.append("p").append("a").attr("href",m(e.interactor1,e.interactor2)).attr("target","_blank").text(`Confirmed by ${e.experiments} experiment(s)`);const i=t.append("table").attr("class","interaction-viewer-table"),o=i.append("tr");o.append("th"),o.append("th").text("Interactor 1"),o.append("th").text("Interactor 2");const s=i.append("tr");s.append("td").text("Name").attr("class","interaction-viewer-table_row-header"),s.append("td").text(""+n.name),s.append("td").text(""+r.name);const c=i.append("tr");if(c.append("td").text("UniProtKB").attr("class","interaction-viewer-table_row-header"),c.append("td").append("a").attr("href","//uniprot.org/uniprot/"+n.accession).text(""+n.accession),c.append("td").append("a").attr("href","//uniprot.org/uniprot/"+r.accession).text(""+r.accession),e.chain1||e.chain2){const t=i.append("tr");t.append("td").text("Chain").attr("class","interaction-viewer-table_row-header"),t.append("td").text(""+(e.chain1?e.chain1:"N/A")),t.append("td").text(""+(e.chain2?e.chain2:"N/A"))}const l=i.append("tr");l.append("td").text("Pathology").attr("class","interaction-viewer-table_row-header"),l.append("td").html(St(n.diseases,n.accession)),l.append("td").html(St(r.diseases,r.accession));const u=i.append("tr");u.append("td").text("Subcellular location").attr("class","interaction-viewer-table_row-header"),u.append("td").html(Et(n.subcellularLocations)),u.append("td").html(Et(r.subcellularLocations));const h=i.append("tr");h.append("td").text("IntAct").attr("class","interaction-viewer-table_row-header"),h.append("td").attr("colspan",2).append("a").attr("href",m(e.interactor1,e.interactor2)).attr("target","_blank").text(`${e.interactor1};${e.interactor2}`)})(Object(r.a)(".tooltip-content"),e),o.style("opacity",.9).style("display","inline").style("left",Object(yt.a)(t)[0]+10+"px").style("top",Object(yt.a)(t)[1]-15+"px")};const _=g.selectAll(".interaction-row").data(a).enter().append("g").attr("class","interaction-row").attr("transform",t=>`translate(0,${p(t.accession)})`).each((function(t){if(!t.interactions)return;const e=Object(i.a)(this).selectAll(".cell").data(t.interactions);e.enter().append("circle").attr("class","cell").attr("cx",t=>p(t.id)+p.bandwidth()/2).attr("cy",()=>p.bandwidth()/2).attr("r",p.bandwidth()/3).style("fill-opacity",t=>f(t.experiments)).style("display",e=>p(t.accession)<p(e.id)?"none":"").on("click",y).on("mouseover",v).on("mouseout",b),e.exit().remove()}));_.append("rect").attr("x",-u).attr("width",u).attr("height",p.bandwidth()).attr("class","text-highlight"),_.append("text").attr("y",p.bandwidth()/2).attr("dy",".32em").attr("text-anchor","end").text((t,e)=>a[e].name).attr("class",(t,n)=>a[n].accession===e?"main-accession":"");const w=g.selectAll(".column").data(a).enter().append("g").attr("class","column").attr("transform",t=>`translate(${p(t.accession)}, 0)rotate(-90)`);w.append("rect").attr("x",6).attr("width",s).attr("height",p.bandwidth()).attr("class","text-highlight"),w.append("text").attr("x",6).attr("y",p.bandwidth()/2).attr("dy",".32em").attr("text-anchor","start").text((t,e)=>a[e].name).attr("class",(t,n)=>a[n].accession===e?"main-accession":"");const x=`${p(a[1].accession)} 0,${p(a[a.length-1].accession)} 0,${p(a[a.length-1].accession)} ${p(a[a.length-1].accession)},${p(a[0].accession)} 0`;g.append("polyline").attr("points",x).attr("class","hidden-side").attr("transform",()=>`translate(${p(a[1].accession)}, 0)`)};function Tt(){const t="#"+Object(i.a)(this).attr("data-toggle"),e=Object(i.a)(t).style("visibility");Object(i.a)(".dropdown-pane").style("visibility","hidden"),Object(i.a)(t).style("visibility","hidden"===e?"visible":"hidden")}function Dt(t){return t.toLowerCase().replace(/\s|,|^\d/g,"_")}var It=function(t,e,n,r,a,o){Object(i.a)(t).selectAll(".interaction-filter-container").remove();const s=Object(i.a)(t).append("div").attr("class","interaction-filter-container");for(const t of e)if(t.items.length>0){const e=s.append("div").attr("class","interaction-filter");e.append("a").text(t.label).attr("class","button dropdown").attr("data-toggle","iv_"+t.name).on("click",Tt);const i=e.append("ul").attr("id","iv_"+t.name).attr("class","dropdown-pane");if(i.append("li").text("None").on("click",()=>a(t.name,t.label)),"tree"===t.type)vt(t.items,e=>{e.type=t.name,n.push(e),i.datum(e).append("li").style("padding-left",e.depth+"em").attr("id",t=>Dt(t.name)).text(t=>t.name).on("click",e=>r(e,t.name))});else{for(const e of t.items)e.type=t.name,n.push(e);i.selectAll("li").data(t.items).enter().append("li").attr("id",t=>Dt(t.name)).text(t=>t.name.toLowerCase()).on("click",e=>{r(e,t.name)})}}return s.append("button").attr("class","iv_reset").text("Reset filters").on("click",()=>(o(),!1)),n};n(390);function Nt(t,e){return[{name:"subcellularLocations",label:"Subcellular location",type:"tree",items:t},{name:"diseases",label:"Diseases",items:e}]}class jt extends HTMLElement{constructor(){super(),this.mode="ADJACENCY_GRAPH",this.filters=[],this.nodes=null,this.clickFilter=this.clickFilter.bind(this),this.resetFilter=this.resetFilter.bind(this),this.resetAllFilters=this.resetAllFilters.bind(this),this.updateFilterSelection=this.updateFilterSelection.bind(this),this.filterData=this.filterData.bind(this),this.getNodeByAccession=this.getNodeByAccession.bind(this)}connectedCallback(){this._accession=this.getAttribute("accession"),this.render()}static get observedAttributes(){return["accession"]}attributeChangedCallback(t,e,n){"accession"===t&&null!=e&&e!==n&&(this._accession=n,this.render())}set accession(t){this._accession=t}get accession(){return this._accession}clickFilter(t,e){var n;Object(r.a)(".dropdown-pane").style("visibility","hidden"),this.filters.filter(t=>t.type===e).forEach(t=>t.selected=!1),t.selected=!t.selected,Object(i.a)(`[data-toggle=iv_${e}]`).text((n=t.name).length>25?n.substr(0,24)+"...":n),this.updateFilterSelection()}resetFilter(t,e){Object(r.a)(".dropdown-pane").style("visibility","hidden"),this.filters.filter(e=>e.type===t).forEach(t=>t.selected=!1),Object(i.a)(`[data-toggle=iv_${t}]`).text(e),this.updateFilterSelection()}updateFilterSelection(){for(const t of this.filters){Object(i.a)("#"+Dt(t.name)).classed("active",t.selected)}this.filterData()}resetAllFilters(){this.filters.filter(t=>t.selected).forEach(t=>t.selected=!1),Nt().forEach(t=>{Object(i.a)(`[data-toggle=iv_${t.name}]`).text(t.label)}),this.updateFilterSelection()}getNodeByAccession(t){return this.nodes.find(e=>e.accession===t)}filterData(){const t=this.filters.filter(t=>t.selected),e=[];Object(r.a)(".cell").attr("opacity",n=>{const r=this.getNodeByAccession(n.source),i=this.getNodeByAccession(n.id),s=((t,e,n)=>{if(n.length<=0)return!0;const r=Object(a.a)(t.filterTerms,e.filterTerms);return Object(o.a)(r,n.map(t=>t.name)).length===n.length})(r,i,t);return s&&(e.push(r.accession),e.push(i.accession)),s?1:.1}),Object(r.a)(".interaction-viewer text").attr("fill-opacity",t=>e.includes(t.accession)?1:.1)}async render(){if(!this._accession)return;this.style.display="block",this.style.minHeight="6em",Object(i.a)(this).select(".interaction-title").remove(),Object(i.a)(this).select("svg").remove(),Object(i.a)(this).select(".interaction-tooltip").remove();const t=await function(t){const e=`https://www.ebi.ac.uk/proteins/api/proteins/interaction/${t}.json`;return fetch(e).then(t=>404===t.status?null:t.ok?204===t.status?null:t.json():(console.error(new Error(`Request Failed: Status = ${t.status}; URI = ${e}; Time = ${new Date}`)),null)).then(t=>t)}(this._accession);if(t){const{data:n,subcellulartreeMenu:r,diseases:i}=function(t){const e=[],n={};t=t.map(t=>(t.interactions||(t.interactions=[]),t));for(const e of t)for(const n of e.interactions){const r=t.find(t=>t.accession===n.accession2);if(r&&!r.interactions.find(t=>t.id===e.accession)){const t=ft(n);t.id=e.accession,r.interactions.push(t)}}for(const r of t){r.filterTerms=[];const i=[];for(const e of r.interactions)"SELF"===e.interactionType?(e.source=r.accession,e.id=r.accession,bt(e,i)):t.some(t=>t.accession===e.id)&&(e.source=r.accession,bt(e,i));if(r.interactions=i,r.subcellularLocations&&r.subcellularLocations.filter(t=>t.locations).forEach(t=>{for(const n of t.locations){mt(n.location.value,e);const t=n.location.value.split(", ");r.filterTerms=r.filterTerms.concat(t)}}),r.diseases)for(const t of r.diseases)t.diseaseId&&(n[t.diseaseId]={name:t.diseaseId,selected:!1},r.filterTerms.push(t.diseaseId))}return{data:t,subcellulartreeMenu:e,diseases:Object.values(n)}}(t);switch(this.nodes=n,this.dispatchEvent(new CustomEvent("protvista-event",{detail:{loaded:!0,error:e},bubbles:!0})),It(this,Nt(r,i),this.filters,this.clickFilter,this.resetFilter,this.resetAllFilters),this.mode){case"ADJACENCY_GRAPH":kt(this,this._accession,t,Nt(r,i))}}var e}}e.a=jt},function(t,e,n){"use strict";var r=n(213),i=t=>{throw new Error(`Parameter '${t}' is required`)},a=(t=i("time"))=>new Promise(e=>setTimeout(e,t));let o="node";"undefined"!=typeof importScripts?o="worker":"undefined"!=typeof window&&(o="browser");var s=o;let c=()=>a(0);"browser"===s&&"requestAnimationFrame"in window&&(c=()=>new Promise(t=>window.requestAnimationFrame(t)));var l=c;let u;if("browser"===s&&"requestIdleCallback"in window)u=t=>new Promise(e=>window.requestIdleCallback(e,{timeout:t}));else{const t=Object.freeze({didTimeout:!0,timeRemaining:()=>1/0});if(u=e=>a((e||0)/2).then(()=>t),"browser"===s&&"requestAnimationFrame"in window){const e=u;u=()=>e().then(l).then(()=>t)}}const h=a,d=l;var p=n(261);const f=(t,e=0)=>{const n=(t||"").match(/(\d+\.?\d*)px/);return n?+n[1]:e};class g extends r.a{static get properties(){return{title:{type:String,reflect:!0},x:{type:Number,reflect:!0},y:{type:Number,reflect:!0},visible:{type:Boolean,reflect:!0},container:{type:String,reflect:!0}}}constructor(){super(),this.title="",this.x=0,this.y=0,this.visible=!1,this.container="html",this._changeHandler=()=>this.requestUpdate(),this._observer=new MutationObserver(this._changeHandler)}connectedCallback(){super.connectedCallback(),this._observer.observe(this,{subtree:!0,characterData:!0,childList:!0}),window.addEventListener("resize",this._changeHandler)}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect(),window.removeEventListener("resize",this._changeHandler)}static get styles(){return r.b`
      :host {
        --z-index: 50000;
        --title-color: black;
        --text-color: white;
        --body-color: #616161;
        --triangle-width: ${16}px;
        --triangle-height: ${10}px;
        --triangle-margin: ${10}px;
        --vertical-distance: ${5}px;
      }

      .tooltip {
        font-family: Roboto, Arial, sans-serif;
        font-size: 0.9rem;
        top: 0;
        left: 0;
        display: block;
        position: absolute;
        min-width: 220px;
        max-width: 50vw;

        /* user overridable through custom properties */
        z-index: var(--z-index);
        color: var(--text-color);

        /* will change those */
        opacity: 0;
        pointer-events: none;
        transform: translate(0, 0);
      }

      .tooltip.visible {
        opacity: 0.9;
        pointer-events: auto;
      }

      .tooltip::before {
        content: "";
        position: absolute;
        pointer-events: none;
        border-style: solid;
        border-color: transparent;
        border-width: 0 calc(var(--triangle-width) / 2);
      }

      .tooltip.arrow-left::before {
        left: var(--triangle-margin);
      }

      .tooltip.arrow-right::before {
        right: var(--triangle-margin);
      }

      .tooltip.arrow-up::before {
        top: calc(-1 * var(--triangle-height));
        border-bottom-color: var(--title-color);
        border-bottom-width: var(--triangle-height);
      }

      .tooltip.arrow-down::before {
        bottom: calc(-1 * var(--triangle-height));
        border-top-color: var(--body-color);
        border-top-width: var(--triangle-height);
      }

      h1 {
        margin: 0;
        background-color: var(--title-color);
        line-height: 2em;
        padding: 0 1ch;
      }

      :host a,
      :host a:link,
      :host a:active,
      :host a:hover {
        color: #fff;
      }

      .tooltip-body {
        padding: 1em;
        background: var(--body-color);
        font-weight: normal;
        overflow-y: auto;
        max-height: 40vh;
      }

      ::slotted(h4) {
        font-size: 1.2rem !important;
        margin: 0 0 0.5rem 0 !important;
        font-weight: 600 !important;
        color: #fff !important;
      }

      ::slotted(h5) {
        font-size: 1rem !important;
        margin: 0 !important;
        font-weight: 500 !important;
        color: #fff !important;
      }

      ::slotted(p) {
        margin: 0.25rem 0 1rem 0 !important;
      }

      ::slotted(ul) {
        list-style: none !important;
        margin: 0.25rem 0 1rem 0 !important;
        padding: 0 !important;
      }
    `}_getPosition(){if(!this.shadowRoot.firstElementChild)return{};const t=document.querySelector(this.container||"html").getBoundingClientRect(),e=this.shadowRoot.firstElementChild.getBoundingClientRect(),n=getComputedStyle(this),r=f(n.getPropertyValue("--triangle-width"),16),i=f(n.getPropertyValue("--triangle-height"),10),a=f(n.getPropertyValue("--triangle-margin"),10),o=f(n.getPropertyValue("--vertical-distance"),5);let s=this.x-r/2-a,c="left";s+e.width<=t.right||(c="right",s=this.x-e.width+r/2+a);let l=this.y+i+o,u="up";return l+e.height<=t.height||(u="down",l=this.y-e.height-i-o),{x:s,y:l,horizontal:c,vertical:u}}firstUpdated(){this.requestUpdate()}render(){let t=this.title&&this.visible;const e=t?this._getPosition():{};t=e.x&&t;const n=t&&`transform: translate(${e.x}px, ${e.y}px);`;return r.c`
        <section
          class="tooltip arrow-${e.horizontal||"left"} arrow-${e.vertical||"up"} ${t?"visible":""}"
          style="${n}"
        >
          <h1>${this.title}</h1>
          <div class="tooltip-body"><slot></slot></div>
        </sectionclass="tooltip>
      `}}var m=g,v=n(212);class b extends v.a{init(t,e){let n=0;if(this.height={},this.yPos={},this.maxYPos=0,!t)return;this.innerPadding=3;const r={};for(let e=0;e<t.length;e++){const i=t[e];this.height[i.accession]=this.expanded?14:16,this.yPos[i.accession]=this._padding,n=this.height[i.accession]+2*this._padding,this.maxYPos=Math.max(this.maxYPos,n),i.accession in r||(r[i.accession]={}),i.residues&&(n=this._initResidues(i.residues,i.accession,i.locations,this.expanded?n:this.yPos[i.accession],e,r,this.expanded))}if(e)for(let t=0;t<e.length;t++){const i=e[t];i.accession in this.height||(this.height[i.accession]=10,this.yPos[i.accession]=(this.expanded?this.maxYPos:this.innerPadding)+this._padding,n+=2*this._padding+(this.expanded?this.height[i.accession]:0),this.maxYPos=Math.max(this.maxYPos,n)),i.accession in r||(r[i.accession]={}),i.residues&&(n=this._initResidues(i.residues,i.accession,i.locations,i.expanded?n:this.yPos[i.accession],t,r,i.expanded))}this.maxYPos+=this._padding}_initResidues(t,e,n,r,i,a={},o=!0){for(let s=0;s<t.length;s++){const c=t[s];b._filterOutResidueFragmentsOutOfLocation(c,n),c.accession in a[e]||(a[e][c.accession]={});for(let t=0;t<c.locations.length;t++){const n=c.locations[t].description;n in a[e][c.accession]||(a[e][c.accession][n]={height:o?10:this.height[e]-2*this.innerPadding,yPos:o?this.maxYPos+this._padding:r+this.innerPadding},r=o?this.maxYPos+2*this._padding+10:r),this.height[`${c.accession}_${i}_${s}_${t}`]=a[e][c.accession][n].height,this.yPos[`${c.accession}_${i}_${s}_${t}`]=a[e][c.accession][n].yPos,this.maxYPos=Math.max(this.maxYPos,r)}}return o?r:this.maxYPos+2*this._padding}static _filterOutResidueFragmentsOutOfLocation(t,e){t.locations.forEach(t=>t.fragments=t.fragments.filter(t=>e.some(e=>e.fragments.some(e=>t.start>=e.start&&t.end<=e.end)))),t.locations=t.locations.filter(t=>t.fragments.length)}static _getAccFromFeature(t){let e="";return"string"==typeof t?e=t:t.accession&&(e=t.accession),e}getFeatureYPos(t){const e=b._getAccFromFeature(t);return e in this.yPos?this.yPos[e]:0}getFeatureHeight(t){const e=b._getAccFromFeature(t);return e in this.height?this.height[e]:0}}const y=(t,e)=>{let n={value:1,...t};const r=[];for(const t of e)n?n.end<t.start?(r.push(n),n=null,r.push(t)):n.start<t.start&&n.end>=t.end?(r.push({start:n.start,end:t.start-1,value:n.value}),r.push({start:t.start,end:t.end,value:t.value+n.value}),n=t.end===n.end?null:{start:t.end+1,end:n.end,value:n.value}):t.start<n.start&&t.end>n.end?(r.push({start:t.start,end:n.start-1,value:t.value}),r.push({start:n.start,end:n.end,value:t.value+n.value}),r.push({start:n.end+1,end:t.end,value:t.value}),n=null):t.end>=n.start&&t.end<=n.end?(t.start<n.start&&r.push({start:t.start,end:n.start-1,value:t.value}),r.push({start:n.start,end:t.end,value:t.value+n.value}),n=t.end<n.end?{start:t.end+1,end:n.end,value:n.value}:null):n.end>=t.start&&n.end<t.end?(r.push({start:n.start,end:t.start-1,value:n.value}),r.push({start:t.start,end:n.end,value:t.value+n.value}),r.push({start:n.end+1,end:t.end,value:t.value}),n=null):r.push(t):r.push(t);return n&&r.push(n),r},_=2;class w extends v.b{_createTrack(){this._layoutObj.expanded=this._expanded,super._createTrack(),this.children_g=null}connectedCallback(){super.connectedCallback(),this._expanded=this.hasAttribute("expanded"),this._haveCreatedFeatures=!1}attributeChangedCallback(t,e,n){if("expanded"===t&&e!==n&&this._contributors)for(const t of this._contributors)t.expanded=!e;super.attributeChangedCallback(t,e,n)}set contributors(t){this._contributors=w.normalizeLocations(t),this._coverage=((t,e=100,n=!0)=>{let r=[];return n&&(r=y({start:1,end:e,value:0},r)),t.forEach(t=>t.locations.forEach(t=>t.fragments.forEach(t=>{r=y(t,r)}))),r})(this._contributors,this._length),this._data&&this._createTrack()}getLayout(){return new b({layoutHeight:this._height,expanded:this._expanded,padding:2})}static get observedAttributes(){return v.b.observedAttributes.concat(["expanded","color"])}set color(t){this._color!==t&&(this._color=t,this.refresh())}static _createResidueGroup(t){return t.selectAll("g.residues-group").data(t=>t.residues?t.residues.map((e,n)=>({...e,feature:t,i:n})):[]).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data(t=>t.locations.map((e,n)=>({...e,accession:t.accession,feature:t.feature,location:e,i:t.i,j:n}))).enter().append("g").attr("class","residues-locations")}_createResiduePaths(t){return t.selectAll("g.residue").data(t=>t.fragments.map(e=>({...e,accession:t.accession,feature:{...t.feature,currentResidue:{...e,description:t.location.description}},location:t.location,k:t.feature.k,i:t.i,j:t.j}))).enter().append("path").attr("class","feature rectangle residue").attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(`${t.accession}_${t.k}_${t.i}_${t.j}`),t.end?t.end-t.start+1:1,"rectangle")).attr("transform",t=>`translate(${this.getXFromSeqPosition(t.start)},${_+this._layoutObj.getFeatureYPos(`${t.accession}_${t.k}_${t.i}_${t.j}`)})`).attr("fill",t=>this._getFeatureColor(t)).attr("stroke","transparent").call(this.bindEvents,this)}_refreshResiduePaths(t,e){const n=new Set(t.data().map(t=>`${t.feature.accession}-${t.location.description}`)).size;t.attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(`${t.accession}_${t.k}_${t.i}_${t.j}`),t.end?t.end-t.start+1:1,"rectangle")).attr("transform",t=>`translate(${this.getXFromSeqPosition(t.start)},${_+this._layoutObj.getFeatureYPos(`${t.accession}_${t.k}_${t.i}_${t.j}`)})`).style("pointer-events",t=>e||t.feature&&t.feature.expanded?"auto":"none").style("stroke",()=>e?null:"none").style("opacity",()=>e?null:.8/n).attr("fill",t=>e||t.feature&&t.feature.expanded?this._getFeatureColor(t):"white")}static get margin(){return{top:0,right:10,bottom:0,left:10}}_createFeatures(){if(this._layoutObj.init(this._data,this._contributors),this._data.forEach((t,e)=>t.k=e),this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data).enter().append("g").attr("class","feature-group").attr("id",t=>"g_"+t.accession),this.locations=this.featuresG.selectAll("g.location-group").data(t=>t.locations.map(e=>({...e,feature:t}))).enter().append("g").attr("class","location-group"),this.coverLines=this.locations.selectAll("line.cover").data(t=>[t.fragments.reduce((e,n)=>({start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}),{start:1/0,end:-1/0})]).enter().append("line").attr("class","cover"),this.features=this.locations.selectAll("path.feature").data(t=>t.fragments.map(e=>({...e,feature:t.feature,fragments:t.fragments}))).enter().append("path").attr("class",t=>this._getShape(t)+" feature").on("click.expanded",()=>{this._expanded?this.removeAttribute("expanded"):this.setAttribute("expanded","expanded")}).call(this.bindEvents,this),this.residues_g=w._createResidueGroup(this.featuresG),this.residues_loc=this._createResiduePaths(this.residues_g),this._contributors){this._contributors.forEach((t,e)=>t.k=e),this.children_g||(this.children_g=this.svg.append("g").attr("class","children-features")),this.childrenGroup=this.children_g.append("g").attr("class","children-group"),this.childGroup=this.childrenGroup.selectAll("g.child-group").data(this._contributors).enter().append("g").attr("class","child-group");const t=this.childGroup.selectAll("g.child-location-group").data(t=>(t.expanded=this._expanded,t.locations.map(e=>({...e,feature:t})))).enter().append("g").attr("class",(t,e)=>"child-location-group clg-"+e);this.coverLinesChildren=t.selectAll("line.cover").data(t=>[t.fragments.reduce((e,n)=>({start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}),{start:1/0,end:-1/0})]).enter().append("line").attr("class","cover"),this.featureChildren=t.selectAll("path.child-fragment").data(t=>t.fragments.map(e=>({...e,feature:t.feature,fragments:t.fragments}))).enter().append("path").attr("class",t=>this._getShape(t)+" child-fragment feature").call(this.bindEvents,this).on("click.expanded",t=>{t.feature.expanded=!t.feature.expanded,this.refresh()}),this.child_residues_g=w._createResidueGroup(this.childGroup),this.child_residues_loc=this._createResiduePaths(this.child_residues_g),this._coverage&&this._coverage.length&&this._createCoverage()}this.svg.attr("height",this._layoutObj.maxYPos),this._haveCreatedFeatures=!0}_createCoverage(){this._accession=this._data&&this._data[0]&&this._data[0].accession||"_",this.coverage_mask=this.svg.append("defs").append("mask").attr("id","mask-"+this._accession),this.coverageMaskFragment=this.coverage_mask.selectAll("rect").data(this._coverage).enter().append("rect").attr("y",0).attr("height",this._height)}_refreshCoverage(){this.featuresG.attr("mask",this._expanded?null:`url(#mask-${this._accession})`),this.coverageMaskFragment.attr("x",t=>this.getXFromSeqPosition(t.start)).attr("width",t=>this.getSingleBaseWidth()*(t.end-t.start+1)).attr("fill","white").attr("opacity",t=>(t.value/this._contributors.length+.3)/1.3)}_refreshFeatures(t,e=!0){const n=new Set(t.data().map(t=>t.feature.accession)).size;t.attr("d",t=>this._featureShape.getFeatureShape(this.getSingleBaseWidth(),this._layoutObj.getFeatureHeight(t.feature),t.end?t.end-t.start+1:1,e?this._getShape(t.shape?t:t.feature):"rectangle")).attr("fill",t=>e?this._getFeatureColor(t.feature):"white").attr("opacity",e?1:.8/n).style("stroke",t=>e?this._getFeatureColor(t.feature):"none").attr("transform",t=>`translate(${this.getXFromSeqPosition(t.start)},${_+this._layoutObj.getFeatureYPos(t.feature)})`).style("pointer-events",e?"auto":"none")}_refreshCoverLine(t,e=!0){t.attr("x1",t=>this.getXFromSeqPosition(t.start)).attr("x2",t=>this.getXFromSeqPosition(t.end+1)).attr("y1",t=>_+this._layoutObj.getFeatureYPos(t.feature)+this._layoutObj.getFeatureHeight(t.feature)/2).attr("y2",t=>_+this._layoutObj.getFeatureYPos(t.feature)+this._layoutObj.getFeatureHeight(t.feature)/2).attr("stroke",t=>this._getFeatureColor(t.feature)).attr("visibility",e?"visible":"hidden")}refresh(){this._haveCreatedFeatures&&(this._layoutObj.expanded=this._expanded,this._layoutObj.init(this._data,this._contributors),this.height=this._layoutObj.maxYPos,this._refreshCoverLine(this.coverLines),this._refreshFeatures(this.features),this._refreshResiduePaths(this.residues_loc,this._expanded),this._contributors&&(this.childrenGroup.attr("visibility",this._expanded?"visible":"hidden"),this._refreshCoverLine(this.coverLinesChildren,this._expanded),this._refreshFeatures(this.featureChildren,this._expanded),this.child_residues_g.attr("visibility",()=>this._expanded?"visible":"hidden"),this._refreshResiduePaths(this.child_residues_loc),this._coverage&&this._coverage.length&&this._refreshCoverage()),this._updateHighlight(),this.svg.attr("height",this._layoutObj.maxYPos))}}var x=w,C=n(260),A=n(327),O=n(210);class S extends v.b{constructor(){super(),this._line=Object(O.g)().x((t,e)=>this.getXFromSeqPosition(e+1)-this.getSingleBaseWidth()/2).y(t=>this._yScale(t))}init(){this._totalsArray={total:null,diseaseTotal:null}}connectedCallback(){super.connectedCallback(),this._data=void 0,this._height=Number(this.getAttribute("height"))||40,this._yScale=Object(O.i)(),this.init()}set data(t){if(this.init(),t.sequence&&!(t.variants.length<=0)){this._totalsArray.total=new Uint8ClampedArray(t.sequence.length),this._totalsArray.diseaseTotal=new Uint8ClampedArray(t.sequence.length);for(const{start:e,association:n}of t.variants){const r=+e;r<1||r>t.sequence.length||(this._totalsArray.total[r]++,n&&n.find(t=>!0===t.disease)&&this._totalsArray.diseaseTotal[r]++)}this._createTrack()}}_createTrack(){Object(O.l)(this).selectAll("svg").remove(),this.svg=Object(O.l)(this).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this._initYScale(),this.refresh()}_initYScale(){this._yScale.domain([0,Math.max(Object(O.h)(this._totalsArray.total),Object(O.h)(this._totalsArray.diseaseTotal))]).range([this._height,0])}refresh(){this.svg&&(this.svg.selectAll("path").remove(),this.svg.append("path").attr("d",this._line(this._totalsArray.diseaseTotal)).attr("fill","none").attr("stroke","red").attr("transform","translate(0,0)"),this.svg.append("path").attr("d",this._line(this._totalsArray.total)).attr("fill","none").attr("stroke","darkgrey").attr("transform","translate(0,0)"),this._updateHighlight())}}var M=S,E=n(307),k=n(240),T=(n(105),function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}c((r=r.apply(t,e||[])).next())}))});const D=new Map,I=(t,e=new Headers({accept:"application/json"}))=>{const n=D.get(t);if(n)return n;const r=T(void 0,void 0,void 0,(function*(){const n=yield window.fetch(t,{headers:e});if(!n.ok)throw new Error(`Request Failed: Status = ${n.status}; URI = ${t}; Time = ${new Date}`);return 204===n.status?{payload:null,headers:n.headers}:{payload:yield n.json(),headers:n.headers}}));return D.set(t,r),r.catch(()=>D.delete(t)),r};HTMLElement;var N=n(211),j=n(401);const P=t=>{let e=[];return t&&0!==t.length&&(e=t.features.map(t=>Object.assign(t,{category:"PROTEOMICS",type:t.unique?"unique":"non_unique",tooltipContent:Object(N.b)(t),protvistaFeatureId:Object(j.v1)()})),e=Object(N.e)(e)),e};N.a;var L=n(404);const R=t=>{let e=[];if(t&&0!==t.length){e=(t=>{if(!t||t.length<=0)return[];const e=t.sort((t,e)=>t.start-e.start),n=[];return e.forEach(t=>{const e=n[n.length-1];!e||e.end<t.start?n.push(t):e.end<t.end?(e.end=t.end,e.structures.push(t.structures[0])):e.structures.push(t.structures[0])}),n})((t=>t.dbReferences.filter(t=>"PDB"===t.type).map(t=>{const e=t.properties.chains?(t=>{const e=t.indexOf("="),n=t.indexOf("-");return-1===e||-1===n?{start:0,end:0}:{start:+t.slice(e+1,n),end:+t.slice(n+1)}})(t.properties.chains):{start:0,end:0};return{type:"PDBE_COVER",category:"STRUCTURE_COVERAGE",structures:[{description:(n=t.properties,Object.keys(n).reduce((t,e)=>{return`${t}${r=e,r.charAt(0).toUpperCase()+r.slice(1)}: ${n[e]}. `;var r},"")),start:e.start,end:e.end,source:{id:t.id,url:"http://www.ebi.ac.uk/pdbe-srv/view/entry/"+t.id}}],start:e.start,end:e.end};var n}))(t)),e.forEach(t=>{t.tooltipContent=(t=>{const e=`<ul>\n            ${t.structures.map(t=>`<li style="margin: 0.25rem 0"><a style="color:#FFF" href='${t.source.url}' target='_blank'>\n            ${t.source.id}\n        </a> (${t.start}-${t.end})</li>`).join("")}\n        </ul>`;return""+(e?"<h5>Structures</h5>"+e:"")})(t),t.protvistaFeatureId=Object(L.v1)()})}return e};N.a;var B=n(407),F=n(181);const $=t=>{return`<h4>UniProt</h4>\n        ${t.descriptionArray&&t.descriptionArray.UP?`<h5>Description</h5><p>${t.descriptionArray.UP.join("; ")}</p>`:""}\n        ${t.ftId?`<h5>Feature ID</h5><p>${t.ftId}</p>`:""}\n        ${t.association?(e=t.association,e.map(t=>`\n              <h4>Disease association</h4><p>${t.name}</p>\n              ${t.xrefs?"<h5>Cross-references</h5>"+Object(N.c)(t.xrefs):""}\n              ${Object(N.d)(t.evidences)}\n          `).join("")):""}\n        `;var e};var U=t=>(t.description&&(t.descriptionArray=(t=>{let e=t.split(/\[LSS_|\[SWP]: /g);return e=Object(F.a)(e,t=>0===t.length?"NOTHING":-1!==t.indexOf("]: ")?"LSS":"UP"),e.LSS=e.LSS?e.LSS.join("; ").replace(/]: /g,": "):void 0,e})(t.description)),`\n                <h5>Variant</h5><p>${t.wildType} > ${t.alternativeSequence}</p>\n                ${t.frequency?`<h5>Frequency (MAF)</h5><p>${t.frequency}</p>`:""}\n                ${t.siftScore?`<h5>SIFT</h5><p>${t.siftPrediction} ${t.siftScore}</p>`:""}\n                ${t.polyphenScore?`<h5>Polyphen</h5><p>${t.polyphenPrediction} ${t.polyphenScore}</p>`:""}\n                ${t.consequenceType?`<h5>Consequence</h5><p>${t.consequenceType}</p>`:""}\n                ${t.somaticStatus?`<h5>Somatic</h5><p>${0===t.somaticStatus?"No":"Yes"}</p>`:""}\n                ${t.genomicLocation?`<h5>Location</h5><p>${t.genomicLocation}</p>`:""}\n                ${"UniProt"===t.sourceType||"mixed"===t.sourceType?"<hr/>"+$(t):""}\n                ${"large_scale_study"===t.sourceType||"mixed"===t.sourceType?"<hr/>"+(t=>`<h4>Large scale studies</h4>\n        ${t.descriptionArray&&t.descriptionArray.LSS?`<h5>Description</h5><p>${t.descriptionArray.LSS}</p>`:""}\n        ${t.frequency?`<h5>Frequency (MAF)</h5><p>${t.frequency}</p>`:""}\n        <h5>Cross-references</h5>${Object(N.c)(t.xrefs)}\n        `)(t):""}\n        `);const q=(t,e)=>{const n=t.map(t=>t.name);return"uniprot"!==e&&"mixed"!==e||n.push("uniprot"),n},H=t=>{const{sequence:e,features:n}=t,r=n.map(t=>({type:"Variant",accession:t.genomicLocation,variant:t.alternativeSequence,start:t.begin,end:t.end,tooltipContent:U(t),association:t.association,sourceType:t.sourceType,xrefNames:q(t.xrefs,t.sourceType),clinicalSignificances:t.clinicalSignificances,polyphenScore:t.polyphenScore,siftScore:t.siftScore,protvistaFeatureId:Object(B.v1)()}));return r?{sequence:e,variants:r}:null};N.a;const G=t=>{try{return t.results.map(({metadata:t,proteins:e})=>({...t,locations:e[0].entry_protein_locations,start:Math.min(...e[0].entry_protein_locations.map(t=>Math.min(...t.fragments.map(t=>t.start)))),end:Math.max(...e[0].entry_protein_locations.map(t=>Math.max(...t.fragments.map(t=>t.end)))),tooltipContent:`\n        <h5>Accession</h5>\n        <a\n          target="_blank"\n          rel="noopener"\n          href="https://www.ebi.ac.uk/interpro/entry/InterPro/${t.accession}/"\n        >\n        ${t.accession}\n        </a>\n        <h5>Name</h5>\n        <p>${t.name}</p>\n      `,length:e[0].protein_length}))}catch(t){throw new Error("Failed transforming the data")}};HTMLElement;var z=n(410),V=n(329),W=n(244);const Y=function(t,e){customElements.get(t)||customElements.define(t,e)},X=[{name:"PDB",link:"https://www.ebi.ac.uk/pdbe-srv/view/entry/"},{name:"RCSB-PDB",link:"https://www.rcsb.org/structure/"},{name:"PDBj",link:"https://pdbj.org/mine/summary/"},{name:"PDBsum",link:"https://www.ebi.ac.uk/pdbsum/"}];class Z extends r.a{constructor(){super(),Y("protvista-structure",V.a),Y("protvista-datatable",W.a),this.onTableRowClick=this.onTableRowClick.bind(this)}static get properties(){return{accession:{type:String},pdbId:{type:String},data:{type:Object}}}async connectedCallback(){if(super.connectedCallback(),!this.accession)return;const t="https://www.ebi.ac.uk/proteins/api/proteins/"+this.accession,{payload:e}=await I(t);if(!e)return;const n=(t=>t.dbReferences.filter(t=>"PDB"===t.type).sort((t,e)=>t.id.localeCompare(e.id)).map(({id:t,properties:e})=>{if(!e)return null;const{chains:n,resolution:r,method:i}=e;let a,o;if(n){const t=n.split("=");2===t.length&&([a,o]=t)}return{id:t,method:i,resolution:r&&"-"!==r?r:null,chain:a,positions:o,protvistaFeatureId:t}}))(e);if(!n||!n.length)return;this.data=n;const i=this.querySelector("protvista-datatable");this.pdbId=this.data[0].id,i.columns={type:{label:"PDB Entry",resolver:({id:t})=>t},method:{label:"Method",resolver:({method:t})=>t},resolution:{label:"Resolution",resolver:({resolution:t})=>t&&t.replace("A","Å")},chain:{label:"Chain",resolver:({chain:t})=>t},positions:{label:"Positions",resolver:({positions:t})=>t},links:{label:"Links",resolver:({id:t})=>r.c`
        ${X.map(e=>r.c` <a href="${e.link}${t}">${e.name}</a> `).reduce((t,e)=>r.c` ${t} · ${e} `)}
      `}},i.data=this.data,i.rowClickEvent=this.onTableRowClick,i.selectedid=this.pdbId}onTableRowClick({id:t}){this.pdbId=t}createRenderRoot(){return this}render(){return r.c`
      <div>
        ${this.pdbId?r.c`<protvista-structure
              pdb-id=${this.pdbId}
              accession=${this.accession}
            ></protvista-structure>`:r.c``}
        <protvista-datatable noScrollToRow noDeselect></protvista-datatable>
      </div>
    `}}var J=Z,K=n(425);const Q="#990000",tt="#99cc00",et="#002594",nt="#8FE3FF",rt="#009e73",it=[/disease/i,/pathogenic\b/i,/risk factor/i],at=[/benign/i],ot=[/uncertain/i,/conflicting/i,/unclassified/i],st=(t,e)=>e.some(e=>e.test(t)),ct=(t,e)=>t.map(t=>{const n=t.variants.filter(t=>e(t));return{...t,variants:[...n]}}),lt=[{name:"disease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely disease"],colors:[Q]},filterData:t=>ct(t,t=>st(t.clinicalSignificances,it))},{name:"predicted",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Predicted deleterious","Predicted benign"],colors:[et,nt]},filterData:t=>ct(t,t=>void 0!==t.polyphenScore||void 0!==t.siftScore)},{name:"nonDisease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely benign"],colors:[tt]},filterData:t=>ct(t,t=>st(t.clinicalSignificances,at))},{name:"uncertain",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Uncertain"],colors:[rt]},filterData:t=>ct(t,t=>void 0===t.clinicalSignificances&&void 0===t.polyphenScore&&void 0===t.siftScore||st(t.clinicalSignificances,ot))},{name:"UniProt",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["UniProt reviewed"],colors:["#9f9f9f"]},filterData:t=>ct(t,t=>t.xrefNames&&(t.xrefNames.includes("uniprot")||t.xrefNames.includes("UniProt")))},{name:"ClinVar",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["ClinVar reviewed"],colors:["#9f9f9f"]},filterData:t=>ct(t,t=>t.xrefNames&&(t.xrefNames.includes("ClinVar")||t.xrefNames.includes("clinvar")))},{name:"LSS",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Large scale studies"],colors:["#9f9f9f"]},filterData:t=>ct(t,t=>"large_scale_study"===t.sourceType||"mixed"===t.sourceType)}],ut=Object(K.a)().domain([0,1]).range([et,nt]),ht=t=>{const e=[{variants:[t]}];return lt.find(t=>"disease"===t.name).filterData(e)[0].variants.length>0?Q:lt.find(t=>"nonDisease"===t.name).filterData(e)[0].variants.length>0?tt:lt.find(t=>"uncertain"===t.name).filterData(e)[0].variants.length>0?rt:lt.find(t=>"predicted"===t.name).filterData(e)[0].variants.length>0?(n=t.polyphenScore,r=t.siftScore,ut((r||0+(1-n?n:1))/(n&&r?2:1))):rt;var n,r};var dt=lt;const pt={"protvista-feature-adapter":N.f,"protvista-interpro-adapter":G,"protvista-proteomics-adapter":P,"protvista-structure-adapter":R,"protvista-variation-adapter":H};class ft extends r.a{constructor(){super(),this.openCategories=[],this.notooltip=!1,this.nostructure=!1,this.hasData=!1,this.data={},this.displayCoordinates=null}static get properties(){return{suspend:{type:Boolean,reflect:!0},accession:{type:String,reflect:!0},sequence:{type:String},data:{type:Object},openCategories:{type:Array},config:{type:Object},notooltip:{type:Boolean,reflect:!0},nostructure:{type:Boolean,reflect:!0}}}get cssStyle(){return r.c`
      <style>
        protvista-tooltip a {
          text-decoration: underline;
        }
        .track-content {
          width: 80vw;
        }

        .nav-container,
        .category,
        .category__track {
          display: flex;
          margin-bottom: 0.1rem;
        }

        .category-label,
        .track-label,
        .action-buttons,
        .credits {
          width: 20vw;
          padding: 0.5em;
        }

        .action-buttons {
          display: flex;
          justify-content: flex-end;
          align-items: flex-end;
        }

        .category-label {
          background-color: #b2f5ff;
          cursor: pointer;
        }

        .category-label::before {
          content: " ";
          display: inline-block;
          width: 0;
          height: 0;
          border-top: 5px solid transparent;
          border-bottom: 5px solid transparent;
          border-left: 5px solid #333;
          margin-right: 5px;
          -webkit-transition: all 0.1s;
          /* Safari */
          -o-transition: all 0.1s;
          transition: all 0.1s;
        }

        .category-label.open::before {
          content: " ";
          display: inline-block;
          width: 0;
          height: 0;
          border-left: 5px solid transparent;
          border-right: 5px solid transparent;
          border-top: 5px solid #333;
          margin-right: 5px;
        }

        .track-label {
          background-color: #d9faff;
        }

        protvista-track {
          border-top: 1px solid #d9faff;
        }

        .feature {
          cursor: pointer;
        }
      </style>
    `}registerWebComponents(){Y("protvista-navigation",p.a),Y("protvista-tooltip",m),Y("protvista-track",v.b),Y("protvista-interpro-track",x),Y("protvista-sequence",C.a),Y("protvista-variation",A.a),Y("protvista-variation-graph",M),Y("protvista-filter",E.a),Y("protvista-manager",k.a),Y("protvista-uniprot-structure",J)}_loadData(){const t=this.config.categories.map(({name:t,url:e,adapter:n,tracks:r})=>{const i=e.indexOf("{}")>=0?e.replace("{}",this.accession):`${e}${this.accession}`;return h(/interpro/.test(i)?100:0).then(()=>I(i)).then(({payload:e})=>{if(!e)return;const i=n?pt[n](e):e;if(this.data[t]="protvista-feature-adapter"===n?i.filter(({category:e})=>!e||e===t):i,r)for(const e of r)this.data[`${t}-${e.name}`]=Array.isArray(i)&&e.filter?i.filter(({type:t})=>t===e.filter):i;else if(Array.isArray(i))for(const e of i)this.data[`${t}-${e.accession}`]=[e];this.requestUpdate()})});return Promise.all(t)}async _loadDataInComponents(){await d(),Object.entries(this.data).forEach(([t,e])=>{const n=document.getElementById("track-"+t);n&&n.data!==e&&(n.data=e);const r=this.config.categories.filter(({name:e})=>e===t);if(r.length&&r[0].tracks)for(const e of r[0].tracks){const n=document.getElementById(`track-${t}-${e.name}`);n&&(n.data=this.data[`${t}-${e.name}`])}})}updated(t){super.updated(t);const e=this.querySelector("protvista-filter");e&&e.filters!==dt&&(e.filters=dt);const n=this.querySelector("protvista-variation");if(n&&n.colorConfig!==ht&&(n.colorConfig=ht),t.has("suspend")){if(this.suspend)return;this._init()}this._loadDataInComponents()}_init(){this.config||(this.config=z),this.accession&&(this.loadEntry(this.accession).then(t=>{this.sequence=t.sequence.sequence,this.displayCoordinates={start:1,end:this.sequence.length}}),this._loadData())}connectedCallback(){super.connectedCallback(),this.registerWebComponents(),this.suspend||this._init(),this.addEventListener("change",t=>{t.detail.displaystart&&(this.displayCoordinates.start=t.detail.displaystart),t.detail.displayend&&(this.displayCoordinates.end=t.detail.displayend),this.notooltip||(t.detail.eventtype?"click"===t.detail.eventtype&&this.updateTooltip(t,!0):this._resetTooltip())}),this.notooltip||(this.addEventListener("click",t=>{if(!t.target.closest(".feature")&&!t.target.closest("protvista-tooltip")){this.querySelector("protvista-tooltip").visible=!1}}),document.addEventListener("click",this._resetTooltip)),this.addEventListener("load",t=>{this.hasData||(this.dispatchEvent(new CustomEvent("protvista-event",{detail:{hasData:!0},bubbles:!0})),this.hasData=!0)})}disconnectedCallback(){this.notooltip||document.removeEventListener("click",this._resetTooltip)}_resetTooltip(t){if(this&&(!t||!t.target.closest("protvista-uniprot"))){const t=this.querySelector("protvista-tooltip");t&&(t.visible=!1)}}async loadEntry(t){try{return await(await fetch("https://www.ebi.ac.uk/proteins/api/proteins/"+t)).json()}catch(t){console.error("Couldn't load UniProt entry",t)}}createRenderRoot(){return this}render(){return this.sequence&&this.config&&!this.suspend?r.c`
      ${this.cssStyle}
      <protvista-manager
        attributes="length displaystart displayend highlight activefilters filters"
        additionalsubscribers="protvista-structure"
      >
        <div class="nav-container">
          <div class="action-buttons">
            <download-panel
              accession="${this.accession}"
              config="${JSON.stringify(this.config.download)}"
            />
          </div>
          <div class="track-content">
            <protvista-navigation
              length="${this.sequence.length}"
            ></protvista-navigation>
            <protvista-sequence
              length="${this.sequence.length}"
              sequence="${this.sequence}"
              displaystart=${this.displayCoordinates.start}
              displayend="${this.displayCoordinates.end}"
            ></protvista-sequence>
          </div>
        </div>
        ${this.config.categories.map(t=>this.data[t.name]&&r.c`
              <div class="category" id="category_${t.name}">
                <div
                  class="category-label"
                  data-category-toggle="${t.name}"
                  @click="${this.handleCategoryClick}"
                >
                  ${t.label}
                </div>

                <div
                  data-id="category_${t.name}"
                  class="aggregate-track-content track-content"
                  .style="${this.openCategories.includes(t.name)?"opacity:0":"opacity:1"}"
                >
                  ${this.data[t.name]&&this.getTrack(t.trackType,"non-overlapping",t.color,t.shape,t.name)}
                </div>
              </div>

              <!-- Expanded Categories -->
              ${t.tracks&&t.tracks.map(e=>{if(this.openCategories.includes(t.name)){const n=this.data[`${t.name}-${e.name}`];return n&&(Array.isArray(n)&&n.length||Object.keys(n).length)?r.c`
                        <div class="category__track" id="track_${e.name}">
                          <div class="track-label" title="${e.tooltip}">
                            ${e.filterComponent?this.getFilterComponent(`${t.name}-${e.name}`):e.label}
                          </div>
                          <div
                            class="track-content"
                            data-id="track_${e.name}"
                          >
                            ${this.getTrack(e.trackType,"non-overlapping",e.color||t.color,e.shape||t.shape,`${t.name}-${e.name}`)}
                          </div>
                        </div>
                      `:""}})}
              ${t.tracks?"":this.data[t.name].map(e=>{if(this.openCategories.includes(t.name))return e&&e.accession?r.c`
                        <div
                          class="category__track"
                          id="track_${e.accession}"
                        >
                          <div class="track-label" title="${e.accession}">
                            ${e.accession}
                          </div>
                          <div
                            class="track-content"
                            data-id="track_${e.accession}"
                          >
                            ${this.getTrack(t.trackType,"non-overlapping",t.color,t.shape,`${t.name}-${e.accession}`)}
                          </div>
                        </div>
                      `:""})}
            `)}
        <div class="nav-container">
          <div class="credits"></div>
          <div class="track-content">
            <protvista-sequence
              length="${this.sequence.length}"
              sequence="${this.sequence}"
              displaystart=${this.displayCoordinates.start}
              displayend="${this.displayCoordinates.end}"
            ></protvista-sequence>
          </div>
        </div>
        ${this.nostructure?"":r.c`
              <protvista-uniprot-structure
                accession="${this.accession||""}"
              ></protvista-uniprot-structure>
            `}
        <protvista-tooltip />
      </protvista-manager>
    `:r.c``}async updateTooltip(t){const e=t.detail.feature;if(!e.tooltipContent)return;const n=this.querySelector("protvista-tooltip");n.title=`${e.type} ${e.start}-${e.end}`,n.innerHTML=e.tooltipContent,n.visible=!0;const[r,i]=t.detail.coords;n.x=r,n.y=i}handleCategoryClick(t){const e=t.target.getAttribute("data-category-toggle");t.target.classList.contains("open")?(t.target.classList.remove("open"),this.openCategories=[...this.openCategories].filter(t=>t!==e)):(t.target.classList.add("open"),this.openCategories=[...this.openCategories,e])}getCategoryTypesAsString(t){return t.map(t=>t.filter).join(",")}getFilterComponent(t){return r.c`
      <protvista-filter
        style="minWidth: 20%"
        for="track-${t}"
      ></protvista-filter>
    `}getTrack(t,e="",n="",i="",a=""){switch(t){case"protvista-track":return r.c`
          <protvista-track
            length="${this.sequence.length}"
            layout="${e}"
            color="${n}"
            shape="${i}"
            displaystart="${this.displayCoordinates.start}"
            displayend="${this.displayCoordinates.end}"
            id="track-${a}"
          >
          </protvista-track>
        `;case"protvista-interpro-track":return r.c`
          <protvista-interpro-track
            length="${this.sequence.length}"
            color="${n}"
            shape="${i}"
            displaystart="${this.displayCoordinates.start}"
            displayend="${this.displayCoordinates.end}"
            id="track-${a}"
          >
          </protvista-interpro-track>
        `;case"protvista-variation":return r.c`
          <protvista-variation
            length="${this.sequence.length}"
            displaystart="${this.displayCoordinates.start}"
            displayend="${this.displayCoordinates.end}"
            id="track-${a}"
          >
          </protvista-variation>
        `;case"protvista-variation-graph":return r.c`
          <protvista-variation-graph
            length="${this.sequence.length}"
            displaystart="${this.displayCoordinates.start}"
            displayend="${this.displayCoordinates.end}"
            id="track-${a}"
          >
          </protvista-variation-graph>
        `;default:console.warn("No Matching ProtvistaTrack Found.")}}}e.a=ft},function(t,e,n){"use strict";var r=n(433);function i(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}var a=n(286);function o(t,e){return function(n){return t+n*e}}function s(t){return 1==(t=+t)?c:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Object(a.a)(isNaN(e)?n:e)}}function c(t,e){var n=e-t;return n?o(t,n):Object(a.a)(isNaN(t)?e:t)}e.a=function t(e){var n=s(e);function i(t,e){var i=n((t=Object(r.b)(t)).r,(e=Object(r.b)(e)).r),a=n(t.g,e.g),o=n(t.b,e.b),s=c(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=a(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function l(t){return function(e){var n,i,a=e.length,o=new Array(a),s=new Array(a),c=new Array(a);for(n=0;n<a;++n)i=Object(r.b)(e[n]),o[n]=i.r||0,s[n]=i.g||0,c[n]=i.b||0;return o=t(o),s=t(s),c=t(c),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=c(t),i+""}}}l((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[r],o=t[r+1],s=r>0?t[r-1]:2*a-o,c=r<e-1?t[r+2]:2*o-a;return i((n-r/e)*e,s,a,o,c)}})),l((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),a=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],c=t[(r+2)%e];return i((n-r/e)*e,a,o,s,c)}}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(211),i=n(385),a=n(181);const o=t=>{return`<h4>UniProt</h4>\n        ${t.descriptionArray&&t.descriptionArray.UP?`<h5>Description</h5><p>${t.descriptionArray.UP.join("; ")}</p>`:""}\n        ${t.ftId?`<h5>Feature ID</h5><p>${t.ftId}</p>`:""}\n        ${t.association?(e=t.association,e.map(t=>`\n              <h4>Disease association</h4><p>${t.name}</p>\n              ${t.xrefs?"<h5>Cross-references</h5>"+Object(r.c)(t.xrefs):""}\n              ${Object(r.d)(t.evidences)}\n          `).join("")):""}\n        `;var e};var s=t=>(t.description&&(t.descriptionArray=(t=>{let e=t.split(/\[LSS_|\[SWP]: /g);return e=Object(a.a)(e,t=>0===t.length?"NOTHING":-1!==t.indexOf("]: ")?"LSS":"UP"),e.LSS=e.LSS?e.LSS.join("; ").replace(/]: /g,": "):void 0,e})(t.description)),`\n                <h5>Variant</h5><p>${t.wildType} > ${t.alternativeSequence}</p>\n                ${t.frequency?`<h5>Frequency (MAF)</h5><p>${t.frequency}</p>`:""}\n                ${t.siftScore?`<h5>SIFT</h5><p>${t.siftPrediction} ${t.siftScore}</p>`:""}\n                ${t.polyphenScore?`<h5>Polyphen</h5><p>${t.polyphenPrediction} ${t.polyphenScore}</p>`:""}\n                ${t.consequenceType?`<h5>Consequence</h5><p>${t.consequenceType}</p>`:""}\n                ${t.somaticStatus?`<h5>Somatic</h5><p>${0===t.somaticStatus?"No":"Yes"}</p>`:""}\n                ${t.genomicLocation?`<h5>Location</h5><p>${t.genomicLocation}</p>`:""}\n                ${"UniProt"===t.sourceType||"mixed"===t.sourceType?"<hr/>"+o(t):""}\n                ${"large_scale_study"===t.sourceType||"mixed"===t.sourceType?"<hr/>"+(t=>`<h4>Large scale studies</h4>\n        ${t.descriptionArray&&t.descriptionArray.LSS?`<h5>Description</h5><p>${t.descriptionArray.LSS}</p>`:""}\n        ${t.frequency?`<h5>Frequency (MAF)</h5><p>${t.frequency}</p>`:""}\n        <h5>Cross-references</h5>${Object(r.c)(t.xrefs)}\n        `)(t):""}\n        `);const c=(t,e)=>{const n=t?t.map(t=>t.name):[];return"uniprot"!==e&&"mixed"!==e||n.push("uniprot"),n},l=t=>{const{sequence:e,features:n}=t,r=n.map(t=>({type:"Variant",accession:t.genomicLocation,variant:t.alternativeSequence,start:t.begin,end:t.end,tooltipContent:s(t),association:t.association,sourceType:t.sourceType,xrefNames:c(t.xrefs,t.sourceType),clinicalSignificances:t.clinicalSignificances,polyphenScore:t.polyphenScore,siftScore:t.siftScore,protvistaFeatureId:Object(i.v1)()}));return r?{sequence:e,variants:r}:null};r.a},,function(t,e,n){"use strict";var r=n(274);e.a=function(t){return(null==t?0:t.length)?Object(r.a)(t,1):[]}},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}},function(t,e,n){"use strict";var r=n(326);e.a=function(t){return t&&t.length?Object(r.a)(t):[]}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(t,e,n){var o=(e-t)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),c=o/Math.pow(10,s);return s>=0?(c>=r?10:c>=i?5:c>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(c>=r?10:c>=i?5:c>=a?2:1)}var s=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var c,l,u=(1===(c=s).length&&(l=c,c=function(t,e){return s(l(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;c(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;c(t[i],e)>0?r=i:n=i+1}return n}}),h=u.right,d=n(427),p=n(254),f=n(420),g=function(t){return+t},m=[0,1];function v(t){return t}function b(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function y(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=b(i,r),a=n(o,a)):(r=b(r,i),a=n(a,o)),function(t){return a(r(t))}}function _(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=b(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=h(t,e,1,r)-1;return a[n](i[n](e))}}function w(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function x(){var t,e,n,r,i,a,o=m,s=m,c=d.a,l=v;function u(){var t,e,n,c=Math.min(o.length,s.length);return l!==v&&(t=o[0],e=o[c-1],t>e&&(n=t,t=e,e=n),l=function(n){return Math.max(t,Math.min(e,n))}),r=c>2?_:y,i=a=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,c)))(t(l(e)))}return h.invert=function(n){return l(e((a||(a=r(s,o.map(t),p.a)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,g),u()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),c=f.a,u()},h.clamp=function(t){return arguments.length?(l=!!t||v,u()):l!==v},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,u()}}function C(){return x()(v,v)}var A=n(264),O=n(238),S=n(291),M=n(237),E=n(292),k=n(293),T=function(t,e,n,o){var s,c=function(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),c=o/s;return c>=r?s*=10:c>=i?s*=5:c>=a&&(s*=2),e<t?-s:s}(t,e,n);switch((o=Object(O.a)(null==o?",f":o)).type){case"s":var l=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(s=Object(S.a)(c,l))||(o.precision=s),Object(M.b)(o,l);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(s=Object(E.a)(c,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=s-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(s=Object(k.a)(c))||(o.precision=s-2*("%"===o.type))}return Object(M.a)(o)};function D(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,a,s,c=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=o(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(i=Math.ceil(e-t+1));++c<i;)a[c]=(t+c)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(i=Math.ceil(t-e+1));++c<i;)a[c]=(t-c)/s;return r&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return T(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,s=i.length-1,c=i[a],l=i[s];return l<c&&(r=c,c=l,l=r,r=a,a=s,s=r),(r=o(c,l,n))>0?r=o(c=Math.floor(c/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=o(c=Math.ceil(c*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[a]=Math.floor(c/r)*r,i[s]=Math.ceil(l/r)*r,e(i)):r<0&&(i[a]=Math.ceil(c*r)/r,i[s]=Math.floor(l*r)/r,e(i)),t},t}function I(){var t=C();return t.copy=function(){return w(t,I())},A.a.apply(t,arguments),D(t)}},function(t,e,n){"use strict";var r=n(274),i=n(92),a=n(119),o=n(121),s=n(56);var c=function(t,e){var n=-1,r=Object(s.a)(t)?Array(t.length):[];return Object(o.a)(t,(function(t,i,a){r[++n]=e(t,i,a)})),r};var l=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},u=n(91),h=n(41);var d=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,a=Object(h.a)(t),o=void 0!==e,s=null===e,c=e==e,l=Object(h.a)(e);if(!s&&!l&&!a&&t>e||a&&o&&c&&!s&&!l||r&&o&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!c)return-1}return 0};var p=function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var c=d(i[r],a[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index},f=n(59);var g=function(t,e,n){var r=-1;e=Object(i.a)(e.length?e:[f.a],Object(u.a)(a.a));var o=c(t,(function(t,n,a){return{criteria:Object(i.a)(e,(function(e){return e(t)})),index:++r,value:t}}));return l(o,(function(t,e){return p(t,e,n)}))},m=n(271),v=n(62),b=n(65),y=n(39);var _=function(t,e,n){if(!Object(y.a)(n))return!1;var r=typeof e;return!!("number"==r?Object(s.a)(n)&&Object(b.a)(e,n.length):"string"==r&&e in n)&&Object(v.a)(n[e],t)},w=Object(m.a)((function(t,e){if(null==t)return[];var n=e.length;return n>1&&_(t,e[0],e[1])?e=[]:n>2&&_(e[0],e[1],e[2])&&(e=[e[0]]),g(t,Object(r.a)(e,1),[])}));e.a=w},function(t,e,n){"use strict";var r=n(433),i=n(416),a=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function o(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function s(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=p(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var c=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},l=n(254),u=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=p(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},h=n(377),d=n(286),p=e.a=function(t,e){var n,p=typeof e;return null==e||"boolean"===p?Object(d.a)(e):("number"===p?l.a:"string"===p?(n=Object(r.a)(e))?(e=n,i.a):h.a:e instanceof r.a?i.a:e instanceof Date?c:o(e)?a:Array.isArray(e)?s:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u:l.a)(t,e)}},,,,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return C}));var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function a(){}var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),h=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),d=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),p=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),f=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),g=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function y(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=l.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?_(e):3===n?new A(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?w(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?w(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=u.exec(t))?new A(e[1],e[2],e[3],1):(e=h.exec(t))?new A(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?w(e[1],e[2],e[3],e[4]):(e=p.exec(t))?w(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=f.exec(t))?E(e[1],e[2]/100,e[3]/100,1):(e=g.exec(t))?E(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?_(m[t]):"transparent"===t?new A(NaN,NaN,NaN,0):null}function _(t){return new A(t>>16&255,t>>8&255,255&t,1)}function w(t,e,n,r){return r<=0&&(t=e=n=NaN),new A(t,e,n,r)}function x(t){return t instanceof a||(t=y(t)),t?new A((t=t.rgb()).r,t.g,t.b,t.opacity):new A}function C(t,e,n,r){return 1===arguments.length?x(t):new A(t,e,n,null==r?1:r)}function A(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function O(){return"#"+M(this.r)+M(this.g)+M(this.b)}function S(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function M(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function E(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new T(t,e,n,r)}function k(t){if(t instanceof T)return new T(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=y(t)),!t)return new T;if(t instanceof T)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,c=o-i,l=(o+i)/2;return c?(s=e===o?(n-r)/c+6*(n<r):n===o?(r-e)/c+2:(e-n)/c+4,c/=l<.5?o+i:2-o-i,s*=60):c=l>0&&l<1?0:s,new T(s,c,l,t.opacity)}function T(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function D(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(a,y,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:function(){return k(this).formatHsl()},formatRgb:b,toString:b}),r(A,C,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new A(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new A(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:O,formatHex:O,formatRgb:S,toString:S})),r(T,(function(t,e,n,r){return 1===arguments.length?k(t):new T(t,e,n,null==r?1:r)}),i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new T(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new T(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new A(D(t>=240?t-240:t+120,i,r),D(t,i,r),D(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))}])]);
//# sourceMappingURL=default-vendors.e62fb9.js.map